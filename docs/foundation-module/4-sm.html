<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>String Manipulation</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Module</h2><ul>
<li><a href="index.html"><span class="selectedlink">foundation</span></a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'String Manipulation' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">foundation</a></li><li><a href="index.html#4">Chapter 4: Text Handling</a></li><li><b>String Manipulation</b></li></ul></div>
<p class="purpose">Convenient routines for manipulating strings of text.</p>

<ul class="toc"><li><a href="4-sm.html#SP1">&#167;1. Strings are streams</a></li><li><a href="4-sm.html#SP2">&#167;2. New strings</a></li><li><a href="4-sm.html#SP4">&#167;4. Converting from C strings</a></li><li><a href="4-sm.html#SP6">&#167;6. Converting to C strings</a></li><li><a href="4-sm.html#SP7">&#167;7. Converting to integers</a></li><li><a href="4-sm.html#SP8">&#167;8. Length</a></li><li><a href="4-sm.html#SP9">&#167;9. Position markers</a></li><li><a href="4-sm.html#SP13">&#167;13. Character operations</a></li><li><a href="4-sm.html#SP15">&#167;15. Truncation</a></li><li><a href="4-sm.html#SP16">&#167;16. Indentation</a></li><li><a href="4-sm.html#SP17">&#167;17. Copying</a></li><li><a href="4-sm.html#SP19">&#167;19. Comparisons</a></li><li><a href="4-sm.html#SP23">&#167;23. White space</a></li><li><a href="4-sm.html#SP25">&#167;25. Deleting characters</a></li><li><a href="4-sm.html#SP26">&#167;26. Substrings</a></li><li><a href="4-sm.html#SP27">&#167;27. Shim for literal storage</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Strings are streams.</b>Although Foundation provides limited facilities for handling standard or
wide C-style strings &mdash; that is, null-terminated arrays of <span class="extract"><span class="extract-syntax">char</span></span> or
<span class="extract"><span class="extract-syntax">inchar32_t</span></span> &mdash; these are not encouraged.
</p>

<p class="commentary">Instead, a standard string for a program using Foundation is nothing more than
a text stream (see Chapter 2). These are unbounded in size, with memory
allocation being automatic; they are encoded as an array of Unicode code
points (not as UTF-8, -16 or -32); and they do not use a null or indeed any
terminator. This has the advantage that finding the length of a string, and
appending characters to it, run in constant time regardless of the string's
length. It is is entirely feasible to write hundreds of megabytes of
output into a string, if that's useful, and no substantial slowing down
will occur in handling the result (except, of course, that printing it
out on screen would take a while). Strings are also very well protected
against buffer overruns.
</p>

<p class="commentary">The present section of code provides convenient routines for creating,
duplicating, modifying and examining such strings.
</p>

<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. New strings.</b>Sometimes we want to make a new string in the sense of allocating more
memory to hold it. These objects won't automatically be destroyed, so we
shouldn't call these routines too casually. If we need a string just for
some space to play with for a short while, it's better to create one
with <span class="extract"><span class="extract-syntax">TEMPORARY_TEXT</span></span> and then get rid of it with <span class="extract"><span class="extract-syntax">DISCARD_TEXT</span></span>, macros
defined in Chapter 2.
</p>

<p class="commentary">The capacity of these strings is unlimited in principle, and the number
here is just the size of the initial memory block, which is fastest to
access.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="function-syntax">Str::new</span></span>:<br/><a href="4-sm.html#SP3">&#167;3</a><br/>Debugging Log - <a href="2-dl.html#SP4_1">&#167;4.1</a><br/>Dictionaries - <a href="2-dct.html#SP7_3_1">&#167;7.3.1</a><br/>Command Line Arguments - <a href="3-cla.html#SP6">&#167;6</a>, <a href="3-cla.html#SP11">&#167;11</a><br/>Directories - <a href="3-drc.html#SP4">&#167;4</a><br/>Textual Tables - <a href="4-tt.html#SP1">&#167;1</a><br/>Preprocessor - <a href="4-prp.html#SP1_1">&#167;1.1</a>, <a href="4-prp.html#SP4_3_1">&#167;4.3.1</a>, <a href="4-prp.html#SP5_1_3_1_1">&#167;5.1.3.1.1</a>, <a href="4-prp.html#SP5_1_3_1_3">&#167;5.1.3.1.3</a><br/>Finite State Machines - <a href="4-fsm.html#SP3">&#167;3</a><br/>JSON - <a href="4-jsn.html#SP29">&#167;29</a>, <a href="4-jsn.html#SP34">&#167;34</a>, <a href="4-jsn.html#SP38">&#167;38</a><br/>HTML - <a href="5-htm.html#SP28_2">&#167;28.2</a><br/>Markdown Phase I - <a href="5-mpi.html#SP3_2">&#167;3.2</a>, <a href="5-mpi.html#SP25_3_3_3">&#167;25.3.3.3</a>, <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a>, <a href="5-mpi.html#SP25_3_3_9">&#167;25.3.3.9</a>, <a href="5-mpi.html#SP25_3_3_10">&#167;25.3.3.10</a>, <a href="5-mpi.html#SP25_3_3_11">&#167;25.3.3.11</a>, <a href="5-mpi.html#SP29">&#167;29</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3_1_1">&#167;3.1.1</a><br/>Markdown Variations - <a href="5-mv.html#SP11">&#167;11</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP11">&#167;11</a>, <a href="5-im.html#SP14_1">&#167;14.1</a>, <a href="5-im.html#SP17">&#167;17</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a><br/>Version Numbers - <a href="7-vn.html#SP7">&#167;7</a><br/>Web Control Language - <a href="8-wcl.html#SP3">&#167;3</a><br/>Colonies - <a href="8-cln.html#SP3">&#167;3</a>, <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP6">&#167;6</a><br/>Web Structure - <a href="8-ws.html#SP6">&#167;6</a>, <a href="8-ws.html#SP7">&#167;7</a><br/>Web Contents Pages - <a href="8-wcp.html#SP1_1">&#167;1.1</a>, <a href="8-wcp.html#SP3">&#167;3</a><br/>Literate Source - <a href="8-ls.html#SP8_3">&#167;8.3</a>, <a href="8-ls.html#SP8_4_1">&#167;8.4.1</a>, <a href="8-ls.html#SP8_6">&#167;8.6</a>, <a href="8-ls.html#SP20">&#167;20</a>, <a href="8-ls.html#SP8_10_1">&#167;8.10.1</a><br/>Line Classification - <a href="8-lc.html#SP17_2_1">&#167;17.2.1</a>, <a href="8-lc.html#SP17_2_3">&#167;17.2.3</a><br/>Web Notations - <a href="8-wn.html#SP16">&#167;16</a>, <a href="8-wn.html#SP16_2">&#167;16.2</a>, <a href="8-wn.html#SP16_3">&#167;16.3</a>, <a href="8-wn.html#SP16_5">&#167;16.5</a>, <a href="8-wn.html#SP16_5_1">&#167;16.5.1</a>, <a href="8-wn.html#SP16_6">&#167;16.6</a>, <a href="8-wn.html#SP17_1_1">&#167;17.1.1</a>, <a href="8-wn.html#SP17_2">&#167;17.2</a>, <a href="8-wn.html#SP20">&#167;20</a><br/>Holons - <a href="8-hln.html#SP5_1_1_1">&#167;5.1.1.1</a>, <a href="8-hln.html#SP5_2">&#167;5.2</a>, <a href="8-hln.html#SP5_3_3">&#167;5.3.3</a><br/>Build Files - <a href="8-bf.html#SP3">&#167;3</a><br/>Programming Languages - <a href="9-pl.html#SP16">&#167;16</a><br/>Code Analysis - <a href="9-ca.html#SP11_1">&#167;11.1</a><br/>Types and Functions - <a href="9-taf.html#SP7_1">&#167;7.1</a><br/>InC Support - <a href="9-is.html#SP2_1_1_1">&#167;2.1.1.1</a>, <a href="9-is.html#SP2_1_1_1_2_1">&#167;2.1.1.1.2.1</a>, <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a>, <a href="9-is.html#SP11_2_1">&#167;11.2.1</a>, <a href="9-is.html#SP11_2_2">&#167;11.2.2</a><br/>The Swarm - <a href="10-ts.html#SP9_1">&#167;9.1</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP10_1">&#167;10.1</a><br/>The Weaver - <a href="10-tw.html#SP2_6_1_2_2_2">&#167;2.6.1.2.2.2</a><br/>TeX Format - <a href="10-tf.html#SP5_2">&#167;5.2</a><br/>Makefiles - <a href="11-mk.html#SP1">&#167;1</a><br/>Git Support - <a href="11-gs.html#SP1">&#167;1</a><br/>Readme Writeme - <a href="11-rw.html#SP4">&#167;4</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP2" class="function-link"><span class="function-syntax">Str::new_with_capacity</span></a><span class="plain-syntax">(32);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new_with_capacity</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="function-syntax">Str::new_with_capacity</span></span>:<br/>Pathnames - <a href="3-pth.html#SP4">&#167;4</a><br/>Filenames - <a href="3-fln.html#SP2">&#167;2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">c</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP26" class="function-link"><span class="function-syntax">Streams::open_to_memory</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">c</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::dispose_of</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="function-syntax">Str::dispose_of</span></span>:<br/>Dictionaries - <a href="2-dct.html#SP7_3_2">&#167;7.3.2</a>, <a href="2-dct.html#SP11">&#167;11</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">text</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">text</span><span class="plain-syntax">) </span><span class="identifier-syntax">STREAM_CLOSE</span><span class="plain-syntax">(</span><span class="identifier-syntax">text</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3. </b>Duplication of an existing string is complicated only by the issue that
we want the duplicate always to be writeable, so that <span class="extract"><span class="extract-syntax">NULL</span></span> can't be
duplicated as <span class="extract"><span class="extract-syntax">NULL</span></span>.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::duplicate</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="function-syntax">Str::duplicate</span></span>:<br/>Dictionaries - <a href="2-dct.html#SP7_3_1">&#167;7.3.1</a><br/>Trees - <a href="2-trs.html#SP7">&#167;7</a>, <a href="2-trs.html#SP9">&#167;9</a><br/>Command Line Arguments - <a href="3-cla.html#SP5_1">&#167;5.1</a><br/>Time - <a href="3-tm.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP3">&#167;3</a>, <a href="4-prp.html#SP7">&#167;7</a>, <a href="4-prp.html#SP9">&#167;9</a>, <a href="4-prp.html#SP12_1">&#167;12.1</a>, <a href="4-prp.html#SP12_2">&#167;12.2</a>, <a href="4-prp.html#SP12_2_1">&#167;12.2.1</a>, <a href="4-prp.html#SP13">&#167;13</a>, <a href="4-prp.html#SP14">&#167;14</a><br/>Finite State Machines - <a href="4-fsm.html#SP3">&#167;3</a><br/>JSON - <a href="4-jsn.html#SP4">&#167;4</a>, <a href="4-jsn.html#SP6">&#167;6</a>, <a href="4-jsn.html#SP9">&#167;9</a>, <a href="4-jsn.html#SP26">&#167;26</a>, <a href="4-jsn.html#SP28">&#167;28</a><br/>Markdown - <a href="5-mrk.html#SP5">&#167;5</a>, <a href="5-mrk.html#SP15">&#167;15</a>, <a href="5-mrk.html#SP20">&#167;20</a>, <a href="5-mrk.html#SP32">&#167;32</a>, <a href="5-mrk.html#SP50">&#167;50</a><br/>Markdown Phase I - <a href="5-mpi.html#SP29_1">&#167;29.1</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3_2_1">&#167;3.2.1</a><br/>Markdown Variations - <a href="5-mv.html#SP2">&#167;2</a>, <a href="5-mv.html#SP3">&#167;3</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP2">&#167;2</a>, <a href="5-im.html#SP3">&#167;3</a>, <a href="5-im.html#SP5">&#167;5</a>, <a href="5-im.html#SP11">&#167;11</a>, <a href="5-im.html#SP14">&#167;14</a>, <a href="5-im.html#SP14_1">&#167;14.1</a>, <a href="5-im.html#SP16">&#167;16</a>, <a href="5-im.html#SP17">&#167;17</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a><br/>Version Numbers - <a href="7-vn.html#SP7_1">&#167;7.1</a><br/>Licence Data - <a href="7-ld.html#SP1">&#167;1</a><br/>Web Control Language - <a href="8-wcl.html#SP6">&#167;6</a>, <a href="8-wcl.html#SP12_5">&#167;12.5</a>, <a href="8-wcl.html#SP12_6">&#167;12.6</a>, <a href="8-wcl.html#SP31">&#167;31</a><br/>Colonies - <a href="8-cln.html#SP3">&#167;3</a>, <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP6">&#167;6</a>, <a href="8-cln.html#SP8">&#167;8</a>, <a href="8-cln.html#SP13_3">&#167;13.3</a>, <a href="8-cln.html#SP14_3_1">&#167;14.3.1</a><br/>Web Structure - <a href="8-ws.html#SP6">&#167;6</a>, <a href="8-ws.html#SP7">&#167;7</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP7_1">&#167;7.1</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2">&#167;3.2</a>, <a href="8-wcp.html#SP3_2_1_3">&#167;3.2.1.3</a>, <a href="8-wcp.html#SP3_2_1_3_1_1">&#167;3.2.1.3.1.1</a><br/>Web Modules - <a href="8-wm.html#SP3">&#167;3</a><br/>Literate Source - <a href="8-ls.html#SP3">&#167;3</a>, <a href="8-ls.html#SP6">&#167;6</a>, <a href="8-ls.html#SP7">&#167;7</a>, <a href="8-ls.html#SP9">&#167;9</a>, <a href="8-ls.html#SP8_5_3">&#167;8.5.3</a>, <a href="8-ls.html#SP20">&#167;20</a><br/>Line Classification - <a href="8-lc.html#SP16">&#167;16</a>, <a href="8-lc.html#SP17_2_1">&#167;17.2.1</a>, <a href="8-lc.html#SP17_2_2">&#167;17.2.2</a>, <a href="8-lc.html#SP17_2_2_1">&#167;17.2.2.1</a><br/>Web Errors - <a href="8-we.html#SP1">&#167;1</a><br/>Web Notations - <a href="8-wn.html#SP3">&#167;3</a>, <a href="8-wn.html#SP12">&#167;12</a>, <a href="8-wn.html#SP14">&#167;14</a>, <a href="8-wn.html#SP16_4">&#167;16.4</a>, <a href="8-wn.html#SP17_2">&#167;17.2</a><br/>Holons - <a href="8-hln.html#SP1">&#167;1</a>, <a href="8-hln.html#SP5_1_1_1_3">&#167;5.1.1.1.3</a><br/>The Tangler - <a href="8-tt2.html#SP8_3">&#167;8.3</a><br/>Build Files - <a href="8-bf.html#SP3">&#167;3</a><br/>Programming Languages - <a href="9-pl.html#SP6">&#167;6</a>, <a href="9-pl.html#SP7_1">&#167;7.1</a>, <a href="9-pl.html#SP13">&#167;13</a><br/>Enumerated Constants - <a href="9-ec.html#SP3_3">&#167;3.3</a><br/>Types and Functions - <a href="9-taf.html#SP2_1">&#167;2.1</a>, <a href="9-taf.html#SP4">&#167;4</a>, <a href="9-taf.html#SP7_1">&#167;7.1</a><br/>Ctags Support - <a href="9-cs.html#SP5">&#167;5</a><br/>Reserved Words - <a href="9-rw.html#SP4">&#167;4</a><br/>The Painter - <a href="9-tp.html#SP8">&#167;8</a><br/>C-Like Languages - <a href="9-cl.html#SP3_2_2">&#167;3.2.2</a><br/>InC Support - <a href="9-is.html#SP2_1_2">&#167;2.1.2</a>, <a href="9-is.html#SP2_1_2_1">&#167;2.1.2.1</a>, <a href="9-is.html#SP2_1_2_5">&#167;2.1.2.5</a>, <a href="9-is.html#SP2_1_1_1">&#167;2.1.1.1</a>, <a href="9-is.html#SP2_1_1_1_1">&#167;2.1.1.1.1</a>, <a href="9-is.html#SP2_1_1_1_2_1">&#167;2.1.1.1.2.1</a>, <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a><br/>The Swarm - <a href="10-ts.html#SP9_1">&#167;9.1</a>, <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a><br/>Patterns - <a href="10-pt.html#SP6">&#167;6</a>, <a href="10-pt.html#SP7">&#167;7</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP2">&#167;2</a>, <a href="10-apacs.html#SP4">&#167;4</a>, <a href="10-apacs.html#SP10">&#167;10</a>, <a href="10-apacs.html#SP10_2">&#167;10.2</a><br/>The Collater - <a href="10-tc.html#SP3">&#167;3</a>, <a href="10-tc.html#SP3_2">&#167;3.2</a>, <a href="10-tc.html#SP4">&#167;4</a>, <a href="10-tc.html#SP5_1_9_14">&#167;5.1.9.14</a><br/>The Weaver - <a href="10-tw.html#SP2_6">&#167;2.6</a>, <a href="10-tw.html#SP4">&#167;4</a><br/>Weave Tree - <a href="10-wt.html#SP2">&#167;2</a>, <a href="10-wt.html#SP4">&#167;4</a>, <a href="10-wt.html#SP5">&#167;5</a>, <a href="10-wt.html#SP7">&#167;7</a>, <a href="10-wt.html#SP8">&#167;8</a><br/>Format Methods - <a href="10-fm.html#SP1">&#167;1</a><br/>Makefiles - <a href="11-mk.html#SP4">&#167;4</a>, <a href="11-mk.html#SP6_1">&#167;6.1</a><br/>Readme Writeme - <a href="11-rw.html#SP4">&#167;4</a>, <a href="11-rw.html#SP5">&#167;5</a>, <a href="11-rw.html#SP6">&#167;6</a>, <a href="11-rw.html#SP7">&#167;7</a>, <a href="11-rw.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">E</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">E</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP2" class="function-link"><span class="function-syntax">Str::new</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP26" class="function-link"><span class="function-syntax">Streams::open_to_memory</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">E</span><span class="plain-syntax">)+4)) {</span>
<span class="plain-syntax">        </span><a href="2-str.html#SP44" class="function-link"><span class="function-syntax">Streams::copy</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">E</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4. Converting from C strings.</b>Here we open text streams initially equal to the given C strings, and
with the capacity of the initial block large enough to hold the whole
thing plus a little extra, for efficiency's sake.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new_from_wide_string</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="function-syntax">Str::new_from_wide_string</span></span>:<br/>Command Line Arguments - <a href="3-cla.html#SP2">&#167;2</a>, <a href="3-cla.html#SP5">&#167;5</a><br/>Pathnames - <a href="3-pth.html#SP3">&#167;3</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a><br/>TeX Format - <a href="10-tf.html#SP5">&#167;5</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">const</span><span class="plain-syntax"> </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">C_len</span><span class="plain-syntax"> = (</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">)?</span><a href="4-ws.html#SP1" class="function-link"><span class="function-syntax">Wide::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">):0;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP28" class="function-link"><span class="function-syntax">Streams::open_from_wide_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_len</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new_from_ISO_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">const</span><span class="plain-syntax"> </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP29" class="function-link"><span class="function-syntax">Streams::open_from_ISO_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new_from_UTF8_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">const</span><span class="plain-syntax"> </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP30" class="function-link"><span class="function-syntax">Streams::open_from_UTF8_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::new_from_locale_string</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="function-syntax">Str::new_from_locale_string</span></span>:<br/>Pathnames - <a href="3-pth.html#SP2">&#167;2</a>, <a href="3-pth.html#SP3">&#167;3</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">const</span><span class="plain-syntax"> </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP34" class="function-link"><span class="function-syntax">Streams::open_from_locale_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. </b>And sometimes we want to use an existing stream object:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::from_wide_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">c_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">c_len</span><span class="plain-syntax"> = (</span><span class="identifier-syntax">c_string</span><span class="plain-syntax">)?</span><a href="4-ws.html#SP1" class="function-link"><span class="function-syntax">Wide::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">c_string</span><span class="plain-syntax">):0;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP28" class="function-link"><span class="function-syntax">Streams::open_from_wide_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">c_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">c_len</span><span class="plain-syntax">) == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::from_locale_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">c_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="2-str.html#SP34" class="function-link"><span class="function-syntax">Streams::open_from_locale_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">c_string</span><span class="plain-syntax">) == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. Converting to C strings.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_to_ISO_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP32" class="function-link"><span class="function-syntax">Streams::write_as_ISO_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_to_UTF8_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP33" class="function-link"><span class="function-syntax">Streams::write_as_UTF8_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_to_wide_string</span><span class="plain-syntax">(</span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP31" class="function-link"><span class="function-syntax">Streams::write_as_wide_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_to_locale_string</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="function-syntax">Str::copy_to_locale_string</span></span>:<br/>Pathnames - <a href="3-pth.html#SP9">&#167;9</a>, <a href="3-pth.html#SP10">&#167;10</a>, <a href="3-pth.html#SP11">&#167;11</a><br/>Filenames - <a href="3-fln.html#SP10">&#167;10</a>, <a href="3-fln.html#SP12">&#167;12</a>, <a href="3-fln.html#SP13">&#167;13</a>, <a href="3-fln.html#SP14">&#167;14</a>, <a href="3-fln.html#SP15">&#167;15</a><br/>Directories - <a href="3-drc.html#SP2">&#167;2</a>, <a href="3-drc.html#SP5">&#167;5</a><br/>Binary Files - <a href="6-bf.html#SP10">&#167;10</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP34" class="function-link"><span class="function-syntax">Streams::write_as_locale_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">buffer_size</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. Converting to integers.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::atoi</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="function-syntax">Str::atoi</span></span>:<br/>Command Line Arguments - <a href="3-cla.html#SP12">&#167;12</a><br/>JSON - <a href="4-jsn.html#SP16">&#167;16</a><br/>HTML - <a href="5-htm.html#SP28_2">&#167;28.2</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP11_2">&#167;11.2</a><br/>Markdown Rendering - <a href="5-mr.html#SP2_13">&#167;2.13</a><br/>Version Numbers - <a href="7-vn.html#SP10">&#167;10</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2_1_2">&#167;3.2.1.2</a><br/>Literate Source - <a href="8-ls.html#SP8_10_1">&#167;8.10.1</a>, <a href="8-ls.html#SP25">&#167;25</a><br/>Programming Languages - <a href="9-pl.html#SP12_1">&#167;12.1</a><br/>Enumerated Constants - <a href="9-ec.html#SP3_3">&#167;3.3</a><br/>InC Support - <a href="9-is.html#SP2_1_1">&#167;2.1.1</a><br/>The Collater - <a href="10-tc.html#SP5_1_9_14">&#167;5.1.9.14</a><br/>The Weaver - <a href="10-tw.html#SP4">&#167;4</a><br/>TeX Utilities - <a href="10-tu.html#SP4">&#167;4</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">index</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">char</span><span class="plain-syntax"> </span><span class="identifier-syntax">buffer</span><span class="plain-syntax">[32];</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">index</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        ((</span><span class="identifier-syntax">i</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">31</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">))); </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">))</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">buffer</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">++] = (</span><span class="reserved-syntax">char</span><span class="plain-syntax">) </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">buffer</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">] = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">atoi</span><span class="plain-syntax">(</span><span class="identifier-syntax">buffer</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8. Length.</b>A puritan would return a <span class="extract"><span class="extract-syntax">size_t</span></span> here, but I am not a puritan.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::len</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="function-syntax">Str::len</span></span>:<br/><a href="4-sm.html#SP3">&#167;3</a>, <a href="4-sm.html#SP7">&#167;7</a>, <a href="4-sm.html#SP10">&#167;10</a>, <a href="4-sm.html#SP11">&#167;11</a>, <a href="4-sm.html#SP12">&#167;12</a>, <a href="4-sm.html#SP13">&#167;13</a>, <a href="4-sm.html#SP14">&#167;14</a>, <a href="4-sm.html#SP15">&#167;15</a>, <a href="4-sm.html#SP17">&#167;17</a>, <a href="4-sm.html#SP19">&#167;19</a>, <a href="4-sm.html#SP20">&#167;20</a>, <a href="4-sm.html#SP21">&#167;21</a>, <a href="4-sm.html#SP22">&#167;22</a>, <a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP25">&#167;25</a>, <a href="4-sm.html#SP26">&#167;26</a><br/>Debugging Log - <a href="2-dl.html#SP9">&#167;9</a><br/>Command Line Arguments - <a href="3-cla.html#SP8">&#167;8</a>, <a href="3-cla.html#SP13">&#167;13</a>, <a href="3-cla.html#SP14">&#167;14</a>, <a href="3-cla.html#SP14_2">&#167;14.2</a>, <a href="3-cla.html#SP14_2_1">&#167;14.2.1</a><br/>Pathnames - <a href="3-pth.html#SP4">&#167;4</a>, <a href="3-pth.html#SP5">&#167;5</a>, <a href="3-pth.html#SP7">&#167;7</a>, <a href="3-pth.html#SP8">&#167;8</a><br/>Filenames - <a href="3-fln.html#SP2">&#167;2</a>, <a href="3-fln.html#SP3">&#167;3</a>, <a href="3-fln.html#SP5">&#167;5</a>, <a href="3-fln.html#SP8">&#167;8</a>, <a href="3-fln.html#SP9">&#167;9</a><br/>Directories - <a href="3-drc.html#SP6">&#167;6</a><br/>Tab Stops - <a href="4-ts.html#SP6">&#167;6</a>, <a href="4-ts.html#SP9">&#167;9</a><br/>Textual Tables - <a href="4-tt.html#SP1">&#167;1</a><br/>Preprocessor - <a href="4-prp.html#SP1">&#167;1</a>, <a href="4-prp.html#SP4_2">&#167;4.2</a>, <a href="4-prp.html#SP4_4">&#167;4.4</a>, <a href="4-prp.html#SP5">&#167;5</a>, <a href="4-prp.html#SP5_1_1">&#167;5.1.1</a><br/>Tries and Avinues - <a href="4-taa.html#SP2_1">&#167;2.1</a><br/>Finite State Machines - <a href="4-fsm.html#SP11">&#167;11</a>, <a href="4-fsm.html#SP15">&#167;15</a><br/>Pattern Matching - <a href="4-pm.html#SP3">&#167;3</a>, <a href="4-pm.html#SP4">&#167;4</a>, <a href="4-pm.html#SP10">&#167;10</a>, <a href="4-pm.html#SP11_3">&#167;11.3</a>, <a href="4-pm.html#SP14">&#167;14</a><br/>JSON - <a href="4-jsn.html#SP11">&#167;11</a>, <a href="4-jsn.html#SP29">&#167;29</a>, <a href="4-jsn.html#SP32">&#167;32</a>, <a href="4-jsn.html#SP38">&#167;38</a>, <a href="4-jsn.html#SP39">&#167;39</a><br/>HTML - <a href="5-htm.html#SP8">&#167;8</a>, <a href="5-htm.html#SP15">&#167;15</a>, <a href="5-htm.html#SP17">&#167;17</a>, <a href="5-htm.html#SP20">&#167;20</a>, <a href="5-htm.html#SP26">&#167;26</a><br/>Markdown - <a href="5-mrk.html#SP5_1">&#167;5.1</a>, <a href="5-mrk.html#SP20">&#167;20</a>, <a href="5-mrk.html#SP34">&#167;34</a>, <a href="5-mrk.html#SP50">&#167;50</a>, <a href="5-mrk.html#SP51">&#167;51</a>, <a href="5-mrk.html#SP52">&#167;52</a>, <a href="5-mrk.html#SP53">&#167;53</a><br/>Markdown Phase I - <a href="5-mpi.html#SP17">&#167;17</a>, <a href="5-mpi.html#SP25_3">&#167;25.3</a>, <a href="5-mpi.html#SP25_3_2_2">&#167;25.3.2.2</a>, <a href="5-mpi.html#SP25_3_3_5">&#167;25.3.3.5</a>, <a href="5-mpi.html#SP25_3_3_6">&#167;25.3.3.6</a>, <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a>, <a href="5-mpi.html#SP25_3_3_2_1">&#167;25.3.3.2.1</a>, <a href="5-mpi.html#SP25_3_3_10">&#167;25.3.3.10</a>, <a href="5-mpi.html#SP25_3_3_11">&#167;25.3.3.11</a>, <a href="5-mpi.html#SP26_1">&#167;26.1</a>, <a href="5-mpi.html#SP26_4">&#167;26.4</a>, <a href="5-mpi.html#SP26_5">&#167;26.5</a>, <a href="5-mpi.html#SP26_5_1">&#167;26.5.1</a>, <a href="5-mpi.html#SP26_6">&#167;26.6</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a>, <a href="5-mpi.html#SP28">&#167;28</a>, <a href="5-mpi.html#SP28_1_1">&#167;28.1.1</a>, <a href="5-mpi.html#SP28_1_2">&#167;28.1.2</a>, <a href="5-mpi.html#SP28_2">&#167;28.2</a>, <a href="5-mpi.html#SP29">&#167;29</a>, <a href="5-mpi.html#SP29_1">&#167;29.1</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP2">&#167;2</a>, <a href="5-mpi2.html#SP3">&#167;3</a>, <a href="5-mpi2.html#SP3_1">&#167;3.1</a>, <a href="5-mpi2.html#SP3_1_1">&#167;3.1.1</a>, <a href="5-mpi2.html#SP3_2_1">&#167;3.2.1</a>, <a href="5-mpi2.html#SP3_3">&#167;3.3</a>, <a href="5-mpi2.html#SP3_4_1">&#167;3.4.1</a>, <a href="5-mpi2.html#SP3_4_2">&#167;3.4.2</a>, <a href="5-mpi2.html#SP3_4_3">&#167;3.4.3</a>, <a href="5-mpi2.html#SP3_4_4">&#167;3.4.4</a>, <a href="5-mpi2.html#SP9_1">&#167;9.1</a>, <a href="5-mpi2.html#SP11_2">&#167;11.2</a>, <a href="5-mpi2.html#SP11_2_2">&#167;11.2.2</a>, <a href="5-mpi2.html#SP11_2_3">&#167;11.2.3</a><br/>Markdown Rendering - <a href="5-mr.html#SP2_5">&#167;2.5</a>, <a href="5-mr.html#SP2_6">&#167;2.6</a>, <a href="5-mr.html#SP2_7">&#167;2.7</a>, <a href="5-mr.html#SP2_11">&#167;2.11</a>, <a href="5-mr.html#SP2_13">&#167;2.13</a>, <a href="5-mr.html#SP4">&#167;4</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP6">&#167;6</a>, <a href="5-im.html#SP7">&#167;7</a>, <a href="5-im.html#SP8">&#167;8</a>, <a href="5-im.html#SP12">&#167;12</a>, <a href="5-im.html#SP13">&#167;13</a>, <a href="5-im.html#SP14">&#167;14</a>, <a href="5-im.html#SP14_1">&#167;14.1</a>, <a href="5-im.html#SP17">&#167;17</a>, <a href="5-im.html#SP18_2">&#167;18.2</a>, <a href="5-im.html#SP18_2_1">&#167;18.2.1</a>, <a href="5-im.html#SP18_2_2">&#167;18.2.2</a>, <a href="5-im.html#SP18_2_2_1">&#167;18.2.2.1</a>, <a href="5-im.html#SP18_2_2_1_1">&#167;18.2.2.1.1</a>, <a href="5-im.html#SP18_2_3">&#167;18.2.3</a>, <a href="5-im.html#SP18_2_4">&#167;18.2.4</a>, <a href="5-im.html#SP18_2_4_1">&#167;18.2.4.1</a><br/>Epub Ebooks - <a href="5-ee.html#SP7_1">&#167;7.1</a>, <a href="5-ee.html#SP7_2_3">&#167;7.2.3</a>, <a href="5-ee.html#SP7_2_4">&#167;7.2.4</a><br/>Version Numbers - <a href="7-vn.html#SP7">&#167;7</a>, <a href="7-vn.html#SP7_1">&#167;7.1</a>, <a href="7-vn.html#SP10">&#167;10</a><br/>Web Control Language - <a href="8-wcl.html#SP9">&#167;9</a>, <a href="8-wcl.html#SP12">&#167;12</a>, <a href="8-wcl.html#SP12_5">&#167;12.5</a>, <a href="8-wcl.html#SP21_1">&#167;21.1</a>, <a href="8-wcl.html#SP22">&#167;22</a>, <a href="8-wcl.html#SP32">&#167;32</a>, <a href="8-wcl.html#SP33">&#167;33</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP6">&#167;6</a>, <a href="8-cln.html#SP7">&#167;7</a>, <a href="8-cln.html#SP14_3">&#167;14.3</a>, <a href="8-cln.html#SP14_3_1">&#167;14.3.1</a><br/>Web Structure - <a href="8-ws.html#SP7">&#167;7</a>, <a href="8-ws.html#SP12_1">&#167;12.1</a>, <a href="8-ws.html#SP12_1_1">&#167;12.1.1</a>, <a href="8-ws.html#SP13">&#167;13</a>, <a href="8-ws.html#SP14">&#167;14</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP5">&#167;5</a>, <a href="8-bdfw.html#SP6">&#167;6</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a>, <a href="8-wcp.html#SP3_2_1_1">&#167;3.2.1.1</a>, <a href="8-wcp.html#SP3_2_1_3_1_1">&#167;3.2.1.3.1.1</a>, <a href="8-wcp.html#SP3_2_1_3_2">&#167;3.2.1.3.2</a><br/>Single-File Webs - <a href="8-sw.html#SP3_1">&#167;3.1</a><br/>Web Ranges - <a href="8-wr.html#SP1">&#167;1</a>, <a href="8-wr.html#SP1_1">&#167;1.1</a>, <a href="8-wr.html#SP1_1_1">&#167;1.1.1</a>, <a href="8-wr.html#SP1_1_2">&#167;1.1.2</a><br/>Literate Source - <a href="8-ls.html#SP5">&#167;5</a>, <a href="8-ls.html#SP5_4">&#167;5.4</a>, <a href="8-ls.html#SP8_7">&#167;8.7</a>, <a href="8-ls.html#SP8_8">&#167;8.8</a>, <a href="8-ls.html#SP14">&#167;14</a>, <a href="8-ls.html#SP15">&#167;15</a>, <a href="8-ls.html#SP16">&#167;16</a>, <a href="8-ls.html#SP20">&#167;20</a>, <a href="8-ls.html#SP21">&#167;21</a>, <a href="8-ls.html#SP22">&#167;22</a>, <a href="8-ls.html#SP23">&#167;23</a>, <a href="8-ls.html#SP25">&#167;25</a>, <a href="8-ls.html#SP26">&#167;26</a>, <a href="8-ls.html#SP26_1">&#167;26.1</a>, <a href="8-ls.html#SP26_2">&#167;26.2</a><br/>Line Classification - <a href="8-lc.html#SP17_2">&#167;17.2</a>, <a href="8-lc.html#SP17_2_1">&#167;17.2.1</a>, <a href="8-lc.html#SP17_2_2">&#167;17.2.2</a>, <a href="8-lc.html#SP17_2_3">&#167;17.2.3</a><br/>Web Notations - <a href="8-wn.html#SP14">&#167;14</a>, <a href="8-wn.html#SP15">&#167;15</a>, <a href="8-wn.html#SP17">&#167;17</a>, <a href="8-wn.html#SP20">&#167;20</a>, <a href="8-wn.html#SP22_1">&#167;22.1</a>, <a href="8-wn.html#SP22_1_1">&#167;22.1.1</a>, <a href="8-wn.html#SP22_1_2">&#167;22.1.2</a>, <a href="8-wn.html#SP22_1_4">&#167;22.1.4</a><br/>Holons - <a href="8-hln.html#SP1">&#167;1</a>, <a href="8-hln.html#SP2">&#167;2</a>, <a href="8-hln.html#SP5_1_1">&#167;5.1.1</a>, <a href="8-hln.html#SP5_1_1_1">&#167;5.1.1.1</a>, <a href="8-hln.html#SP5_2">&#167;5.2</a>, <a href="8-hln.html#SP5_3_1">&#167;5.3.1</a>, <a href="8-hln.html#SP6">&#167;6</a><br/>Holon Syntax - <a href="8-hs.html#SP1_1_1">&#167;1.1.1</a>, <a href="8-hs.html#SP1_1_3">&#167;1.1.3</a>, <a href="8-hs.html#SP1_1_4">&#167;1.1.4</a>, <a href="8-hs.html#SP1_1_5">&#167;1.1.5</a>, <a href="8-hs.html#SP1_1_6">&#167;1.1.6</a>, <a href="8-hs.html#SP1_1_7">&#167;1.1.7</a><br/>The Tangler - <a href="8-tt2.html#SP8_3">&#167;8.3</a>, <a href="8-tt2.html#SP9">&#167;9</a>, <a href="8-tt2.html#SP10_1">&#167;10.1</a>, <a href="8-tt2.html#SP10_1_3">&#167;10.1.3</a>, <a href="8-tt2.html#SP13">&#167;13</a><br/>Build Files - <a href="8-bf.html#SP3">&#167;3</a>, <a href="8-bf.html#SP4">&#167;4</a>, <a href="8-bf.html#SP5">&#167;5</a>, <a href="8-bf.html#SP6">&#167;6</a>, <a href="8-bf.html#SP9">&#167;9</a><br/>Programming Languages - <a href="9-pl.html#SP6">&#167;6</a>, <a href="9-pl.html#SP7">&#167;7</a>, <a href="9-pl.html#SP7_2">&#167;7.2</a>, <a href="9-pl.html#SP12_1">&#167;12.1</a>, <a href="9-pl.html#SP16">&#167;16</a>, <a href="9-pl.html#SP17">&#167;17</a><br/>Code Analysis - <a href="9-ca.html#SP2_2">&#167;2.2</a>, <a href="9-ca.html#SP7">&#167;7</a>, <a href="9-ca.html#SP11_1">&#167;11.1</a>, <a href="9-ca.html#SP12">&#167;12</a>, <a href="9-ca.html#SP13">&#167;13</a><br/>Enumerated Constants - <a href="9-ec.html#SP3">&#167;3</a>, <a href="9-ec.html#SP3_3">&#167;3.3</a><br/>Types and Functions - <a href="9-taf.html#SP7_4">&#167;7.4</a><br/>Ctags Support - <a href="9-cs.html#SP3">&#167;3</a><br/>Reserved Words - <a href="9-rw.html#SP1">&#167;1</a><br/>The Painter - <a href="9-tp.html#SP2">&#167;2</a>, <a href="9-tp.html#SP2_1">&#167;2.1</a>, <a href="9-tp.html#SP2_2">&#167;2.2</a>, <a href="9-tp.html#SP4">&#167;4</a>, <a href="9-tp.html#SP6">&#167;6</a>, <a href="9-tp.html#SP7">&#167;7</a>, <a href="9-tp.html#SP9">&#167;9</a>, <a href="9-tp.html#SP9_1">&#167;9.1</a>, <a href="9-tp.html#SP9_3_1">&#167;9.3.1</a><br/>Language Methods - <a href="9-lm.html#SP23">&#167;23</a>, <a href="9-lm.html#SP27">&#167;27</a><br/>ACME Support - <a href="9-as.html#SP2">&#167;2</a>, <a href="9-as.html#SP3">&#167;3</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1">&#167;2.1</a><br/>InC Support - <a href="9-is.html#SP2_2">&#167;2.2</a>, <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a>, <a href="9-is.html#SP9_1">&#167;9.1</a>, <a href="9-is.html#SP9_1_2">&#167;9.1.2</a>, <a href="9-is.html#SP10">&#167;10</a>, <a href="9-is.html#SP11">&#167;11</a>, <a href="9-is.html#SP11_2_1">&#167;11.2.1</a>, <a href="9-is.html#SP11_3">&#167;11.3</a>, <a href="9-is.html#SP11_4">&#167;11.4</a><br/>The Swarm - <a href="10-ts.html#SP8">&#167;8</a>, <a href="10-ts.html#SP9_1">&#167;9.1</a>, <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a><br/>Patterns - <a href="10-pt.html#SP5">&#167;5</a>, <a href="10-pt.html#SP6">&#167;6</a>, <a href="10-pt.html#SP8">&#167;8</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP4">&#167;4</a>, <a href="10-apacs.html#SP12">&#167;12</a>, <a href="10-apacs.html#SP12_1">&#167;12.1</a>, <a href="10-apacs.html#SP12_3">&#167;12.3</a>, <a href="10-apacs.html#SP12_5">&#167;12.5</a><br/>The Collater - <a href="10-tc.html#SP5_1_3">&#167;5.1.3</a>, <a href="10-tc.html#SP5_1_9_6_1">&#167;5.1.9.6.1</a>, <a href="10-tc.html#SP5_1_9_17_1">&#167;5.1.9.17.1</a>, <a href="10-tc.html#SP9">&#167;9</a><br/>The Weaver - <a href="10-tw.html#SP2_3">&#167;2.3</a>, <a href="10-tw.html#SP2_4">&#167;2.4</a>, <a href="10-tw.html#SP2_6_1_2">&#167;2.6.1.2</a>, <a href="10-tw.html#SP2_6_1_3">&#167;2.6.1.3</a>, <a href="10-tw.html#SP2_6_1_3_1">&#167;2.6.1.3.1</a>, <a href="10-tw.html#SP2_6_1_2_2_1_4">&#167;2.6.1.2.2.1.4</a>, <a href="10-tw.html#SP2_6_1_2_1_1">&#167;2.6.1.2.1.1</a>, <a href="10-tw.html#SP2_6_1_2_2_2">&#167;2.6.1.2.2.2</a>, <a href="10-tw.html#SP8">&#167;8</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP3">&#167;3</a>, <a href="10-twot.html#SP4">&#167;4</a>, <a href="10-twot.html#SP4_1">&#167;4.1</a>, <a href="10-twot.html#SP4_2">&#167;4.2</a>, <a href="10-twot.html#SP4_3">&#167;4.3</a><br/>Weave Tree - <a href="10-wt.html#SP5">&#167;5</a><br/>Plain Text Format - <a href="10-ptf.html#SP2_9">&#167;2.9</a><br/>TeX Format - <a href="10-tf.html#SP4_31">&#167;4.31</a>, <a href="10-tf.html#SP5_1">&#167;5.1</a>, <a href="10-tf.html#SP5_2">&#167;5.2</a>, <a href="10-tf.html#SP6">&#167;6</a>, <a href="10-tf.html#SP9">&#167;9</a>, <a href="10-tf.html#SP10_2">&#167;10.2</a><br/>HTML Formats - <a href="10-hf.html#SP4">&#167;4</a>, <a href="10-hf.html#SP5_2">&#167;5.2</a>, <a href="10-hf.html#SP5_14_1">&#167;5.14.1</a>, <a href="10-hf.html#SP5_15_2">&#167;5.15.2</a>, <a href="10-hf.html#SP5_22">&#167;5.22</a>, <a href="10-hf.html#SP5_23">&#167;5.23</a>, <a href="10-hf.html#SP5_23_1">&#167;5.23.1</a>, <a href="10-hf.html#SP5_27">&#167;5.27</a>, <a href="10-hf.html#SP5_33">&#167;5.33</a>, <a href="10-hf.html#SP7">&#167;7</a>, <a href="10-hf.html#SP10">&#167;10</a>, <a href="10-hf.html#SP12">&#167;12</a><br/>Debugging Format - <a href="10-df.html#SP3">&#167;3</a><br/>TeX Utilities - <a href="10-tu.html#SP7">&#167;7</a>, <a href="10-tu.html#SP7_4">&#167;7.4</a>, <a href="10-tu.html#SP7_4_1">&#167;7.4.1</a>, <a href="10-tu.html#SP7_4_2">&#167;7.4.2</a><br/>Makefiles - <a href="11-mk.html#SP4">&#167;4</a>, <a href="11-mk.html#SP5_1">&#167;5.1</a>, <a href="11-mk.html#SP7">&#167;7</a>, <a href="11-mk.html#SP8">&#167;8</a><br/>Readme Writeme - <a href="11-rw.html#SP5">&#167;5</a>, <a href="11-rw.html#SP6">&#167;6</a>, <a href="11-rw.html#SP7">&#167;7</a>, <a href="11-rw.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="2-str.html#SP40" class="function-link"><span class="function-syntax">Streams::get_position</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9. Position markers.</b>A position marker is a lightweight way to refer to a particular position
in a given string. Position 0 is before the first character; if, for
example, the string contains the word "gazpacho", then position 8 represents
the end of the string, after the "o". Negative positions are not allowed,
but positive ones well past the end of the string are legal. (Doing things
at those positions may well not be, of course.)
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">typedef</span><span class="plain-syntax"> </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">index</span><span class="plain-syntax">;</span>
<span class="plain-syntax">} </span><span class="reserved-syntax">string_position</span><span class="plain-syntax">;</span>
</pre>
<ul class="endnotetexts"><li>The structure string_position is accessed in 4/tt and here.</li></ul>
<p class="commentary firstcommentary"><a id="SP10" class="paragraph-anchor"></a><b>&#167;10. </b>You can then find a position in a given string thus:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::start</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="function-syntax">Str::start</span></span>:<br/><a href="4-sm.html#SP12">&#167;12</a>, <a href="4-sm.html#SP20">&#167;20</a>, <a href="4-sm.html#SP24">&#167;24</a><br/>Pathnames - <a href="3-pth.html#SP5">&#167;5</a><br/>Literate Source - <a href="8-ls.html#SP25">&#167;25</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a><br/>Reserved Words - <a href="9-rw.html#SP1">&#167;1</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1">&#167;2.1.1</a><br/>The Collater - <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">S</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::at</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="function-syntax">Str::at</span></span>:<br/><a href="4-sm.html#SP7">&#167;7</a>, <a href="4-sm.html#SP13">&#167;13</a>, <a href="4-sm.html#SP14">&#167;14</a>, <a href="4-sm.html#SP15">&#167;15</a>, <a href="4-sm.html#SP17">&#167;17</a>, <a href="4-sm.html#SP25">&#167;25</a><br/>Pathnames - <a href="3-pth.html#SP4">&#167;4</a>, <a href="3-pth.html#SP5">&#167;5</a>, <a href="3-pth.html#SP8">&#167;8</a><br/>Filenames - <a href="3-fln.html#SP2">&#167;2</a>, <a href="3-fln.html#SP3">&#167;3</a>, <a href="3-fln.html#SP9">&#167;9</a><br/>Literate Source - <a href="8-ls.html#SP25">&#167;25</a><br/>Web Notations - <a href="8-wn.html#SP22_1_3">&#167;22.1.3</a>, <a href="8-wn.html#SP22_1_4">&#167;22.1.4</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a><br/>Conditional Compilation - <a href="9-cc.html#SP1">&#167;1</a><br/>The Painter - <a href="9-tp.html#SP6">&#167;6</a><br/>InC Support - <a href="9-is.html#SP11_2_2">&#167;11.2.2</a>, <a href="9-is.html#SP11_3">&#167;11.3</a>, <a href="9-is.html#SP11_4">&#167;11.4</a><br/>The Collater - <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP4_1">&#167;4.1</a>, <a href="10-twot.html#SP4_2">&#167;4.2</a>, <a href="10-twot.html#SP5">&#167;5</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax"> &gt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">)) </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">S</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> = </span><span class="identifier-syntax">i</span><span class="plain-syntax">; </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::end</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="function-syntax">Str::end</span></span>:<br/><a href="4-sm.html#SP12">&#167;12</a><br/>Pathnames - <a href="3-pth.html#SP8">&#167;8</a><br/>Filenames - <a href="3-fln.html#SP9">&#167;9</a><br/>Literate Source - <a href="8-ls.html#SP25">&#167;25</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a><br/>Conditional Compilation - <a href="9-cc.html#SP1">&#167;1</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1_4">&#167;2.1.1.4</a><br/>InC Support - <a href="9-is.html#SP11_2_2">&#167;11.2.2</a>, <a href="9-is.html#SP11_3">&#167;11.3</a>, <a href="9-is.html#SP11_4">&#167;11.4</a><br/>The Collater - <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP4_1">&#167;4.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> = </span><span class="identifier-syntax">S</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">); </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP11" class="paragraph-anchor"></a><b>&#167;11. </b>And you can step forwards or backwards:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::back</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="function-syntax">Str::back</span></span>:<br/><a href="4-sm.html#SP12">&#167;12</a><br/>Filenames - <a href="3-fln.html#SP9">&#167;9</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &gt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">--; </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::forward</span><button class="popup" onclick="togglePopup('usagePopup14')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup14">Usage of <span class="code-font"><span class="function-syntax">Str::forward</span></span>:<br/><a href="4-sm.html#SP7">&#167;7</a>, <a href="4-sm.html#SP17">&#167;17</a>, <a href="4-sm.html#SP20">&#167;20</a>, <a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP25">&#167;25</a><br/>Filenames - <a href="3-fln.html#SP2">&#167;2</a><br/>Reserved Words - <a href="9-rw.html#SP1">&#167;1</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1_2">&#167;2.1.1.2</a>, <a href="9-cl.html#SP2_1_1_3">&#167;2.1.1.3</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">++; </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="function-syntax">Str::plus</span><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">increment</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> += </span><span class="identifier-syntax">increment</span><span class="plain-syntax">; </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::width_between</span><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P1</span><span class="plain-syntax">, </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P1</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> != </span><span class="identifier-syntax">P2</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"positions are in different strings"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P2</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> - </span><span class="identifier-syntax">P1</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::in_range</span><button class="popup" onclick="togglePopup('usagePopup15')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup15">Usage of <span class="code-font"><span class="function-syntax">Str::in_range</span></span>:<br/>Reserved Words - <a href="9-rw.html#SP1">&#167;1</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1">&#167;2.1.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::index</span><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP12" class="paragraph-anchor"></a><b>&#167;12. </b>This leads to the following convenient loop macros:
</p>

<pre class="definitions code-font"><span class="definition-keyword">define</span> <span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">ST</span><span class="plain-syntax">)</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::start</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">ST</span><span class="plain-syntax">); </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">); </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">++)</span>
<span class="definition-keyword">define</span> <span class="identifier-syntax">LOOP_BACKWARDS_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">ST</span><span class="plain-syntax">)</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::back</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::end</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">ST</span><span class="plain-syntax">)); </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &gt;= </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">--)</span>
</pre>
<p class="commentary firstcommentary"><a id="SP13" class="paragraph-anchor"></a><b>&#167;13. Character operations.</b>How to get at individual characters, then, now that we can refer to positions:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="function-syntax">Str::get</span><button class="popup" onclick="togglePopup('usagePopup16')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup16">Usage of <span class="code-font"><span class="function-syntax">Str::get</span></span>:<br/><a href="4-sm.html#SP7">&#167;7</a>, <a href="4-sm.html#SP17">&#167;17</a>, <a href="4-sm.html#SP20">&#167;20</a>, <a href="4-sm.html#SP22">&#167;22</a>, <a href="4-sm.html#SP23">&#167;23</a>, <a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP25">&#167;25</a>, <a href="4-sm.html#SP26">&#167;26</a><br/>Dictionaries - <a href="2-dct.html#SP4">&#167;4</a><br/>Pathnames - <a href="3-pth.html#SP4">&#167;4</a>, <a href="3-pth.html#SP5">&#167;5</a><br/>Filenames - <a href="3-fln.html#SP2">&#167;2</a>, <a href="3-fln.html#SP3">&#167;3</a>, <a href="3-fln.html#SP7">&#167;7</a>, <a href="3-fln.html#SP8">&#167;8</a>, <a href="3-fln.html#SP9">&#167;9</a><br/>Shell - <a href="3-shl.html#SP1">&#167;1</a><br/>Preprocessor - <a href="4-prp.html#SP4_1">&#167;4.1</a>, <a href="4-prp.html#SP6">&#167;6</a>, <a href="4-prp.html#SP19_1">&#167;19.1</a><br/>Pattern Matching - <a href="4-pm.html#SP5">&#167;5</a><br/>JSON - <a href="4-jsn.html#SP19">&#167;19</a><br/>HTML - <a href="5-htm.html#SP27">&#167;27</a><br/>Markdown - <a href="5-mrk.html#SP5_1">&#167;5.1</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a><br/>Version Numbers - <a href="7-vn.html#SP7">&#167;7</a>, <a href="7-vn.html#SP10">&#167;10</a><br/>Web Control Language - <a href="8-wcl.html#SP12_1">&#167;12.1</a><br/>Colonies - <a href="8-cln.html#SP14">&#167;14</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP7_2">&#167;7.2</a><br/>Literate Source - <a href="8-ls.html#SP8_10">&#167;8.10</a>, <a href="8-ls.html#SP25">&#167;25</a><br/>Reserved Words - <a href="9-rw.html#SP1">&#167;1</a><br/>The Painter - <a href="9-tp.html#SP8">&#167;8</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1">&#167;2.1.1</a>, <a href="9-cl.html#SP2_1_1_2">&#167;2.1.1.2</a>, <a href="9-cl.html#SP2_1_1_3">&#167;2.1.1.3</a><br/>InC Support - <a href="9-is.html#SP2_1_2_2">&#167;2.1.2.2</a>, <a href="9-is.html#SP2_1_1_1_2_1">&#167;2.1.1.1.2.1</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a><br/>HTML Formats - <a href="10-hf.html#SP5_3">&#167;5.3</a><br/>TeX Utilities - <a href="10-tu.html#SP7_4_1">&#167;7.4.1</a><br/>Makefiles - <a href="11-mk.html#SP5">&#167;5</a>, <a href="11-mk.html#SP9_1">&#167;9.1</a>, <a href="11-mk.html#SP10">&#167;10</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="2-str.html#SP42" class="function-link"><span class="function-syntax">Streams::get_char_at_index</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="function-syntax">Str::get_at</span><button class="popup" onclick="togglePopup('usagePopup17')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup17">Usage of <span class="code-font"><span class="function-syntax">Str::get_at</span></span>:<br/><a href="4-sm.html#SP20">&#167;20</a>, <a href="4-sm.html#SP21">&#167;21</a>, <a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP26">&#167;26</a><br/>Pathnames - <a href="3-pth.html#SP7">&#167;7</a><br/>Filenames - <a href="3-fln.html#SP5">&#167;5</a><br/>Tab Stops - <a href="4-ts.html#SP3">&#167;3</a>, <a href="4-ts.html#SP4">&#167;4</a>, <a href="4-ts.html#SP9">&#167;9</a><br/>Preprocessor - <a href="4-prp.html#SP1">&#167;1</a>, <a href="4-prp.html#SP4_2">&#167;4.2</a>, <a href="4-prp.html#SP5">&#167;5</a><br/>Tries and Avinues - <a href="4-taa.html#SP2">&#167;2</a><br/>Finite State Machines - <a href="4-fsm.html#SP11">&#167;11</a><br/>Pattern Matching - <a href="4-pm.html#SP3">&#167;3</a>, <a href="4-pm.html#SP4">&#167;4</a>, <a href="4-pm.html#SP11">&#167;11</a>, <a href="4-pm.html#SP11_4">&#167;11.4</a>, <a href="4-pm.html#SP11_6">&#167;11.6</a>, <a href="4-pm.html#SP14">&#167;14</a>, <a href="4-pm.html#SP14_1">&#167;14.1</a><br/>JSON - <a href="4-jsn.html#SP11">&#167;11</a>, <a href="4-jsn.html#SP12_1">&#167;12.1</a>, <a href="4-jsn.html#SP13">&#167;13</a>, <a href="4-jsn.html#SP14">&#167;14</a>, <a href="4-jsn.html#SP15">&#167;15</a>, <a href="4-jsn.html#SP16">&#167;16</a>, <a href="4-jsn.html#SP17">&#167;17</a>, <a href="4-jsn.html#SP17_1">&#167;17.1</a>, <a href="4-jsn.html#SP33">&#167;33</a>, <a href="4-jsn.html#SP34">&#167;34</a>, <a href="4-jsn.html#SP33_1">&#167;33.1</a>, <a href="4-jsn.html#SP35">&#167;35</a>, <a href="4-jsn.html#SP36">&#167;36</a><br/>HTML Entities - <a href="5-he.html#SP1">&#167;1</a><br/>Markdown - <a href="5-mrk.html#SP34">&#167;34</a>, <a href="5-mrk.html#SP52">&#167;52</a>, <a href="5-mrk.html#SP53">&#167;53</a><br/>Markdown Phase I - <a href="5-mpi.html#SP17">&#167;17</a>, <a href="5-mpi.html#SP25_3">&#167;25.3</a>, <a href="5-mpi.html#SP25_3_2_1">&#167;25.3.2.1</a>, <a href="5-mpi.html#SP25_3_2_2">&#167;25.3.2.2</a>, <a href="5-mpi.html#SP25_3_3_3">&#167;25.3.3.3</a>, <a href="5-mpi.html#SP25_3_3_5">&#167;25.3.3.5</a>, <a href="5-mpi.html#SP25_3_3_6">&#167;25.3.3.6</a>, <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a>, <a href="5-mpi.html#SP25_3_3_2_1">&#167;25.3.3.2.1</a>, <a href="5-mpi.html#SP25_3_3_10">&#167;25.3.3.10</a>, <a href="5-mpi.html#SP25_3_3_11">&#167;25.3.3.11</a>, <a href="5-mpi.html#SP26_1">&#167;26.1</a>, <a href="5-mpi.html#SP26_3">&#167;26.3</a>, <a href="5-mpi.html#SP26_4">&#167;26.4</a>, <a href="5-mpi.html#SP26_5">&#167;26.5</a>, <a href="5-mpi.html#SP26_5_1">&#167;26.5.1</a>, <a href="5-mpi.html#SP26_6">&#167;26.6</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a>, <a href="5-mpi.html#SP27">&#167;27</a>, <a href="5-mpi.html#SP28_1">&#167;28.1</a>, <a href="5-mpi.html#SP28_1_1">&#167;28.1.1</a>, <a href="5-mpi.html#SP28_1_2">&#167;28.1.2</a>, <a href="5-mpi.html#SP28_2">&#167;28.2</a>, <a href="5-mpi.html#SP29">&#167;29</a>, <a href="5-mpi.html#SP29_1">&#167;29.1</a>, <a href="5-mpi.html#SP32">&#167;32</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3">&#167;3</a>, <a href="5-mpi2.html#SP4">&#167;4</a>, <a href="5-mpi2.html#SP3_1_1">&#167;3.1.1</a>, <a href="5-mpi2.html#SP3_2">&#167;3.2</a>, <a href="5-mpi2.html#SP3_3">&#167;3.3</a>, <a href="5-mpi2.html#SP3_3_1">&#167;3.3.1</a>, <a href="5-mpi2.html#SP3_3_1_1">&#167;3.3.1.1</a>, <a href="5-mpi2.html#SP3_3_1_2">&#167;3.3.1.2</a>, <a href="5-mpi2.html#SP3_3_2">&#167;3.3.2</a>, <a href="5-mpi2.html#SP3_3_2_1">&#167;3.3.2.1</a>, <a href="5-mpi2.html#SP3_3_2_2">&#167;3.3.2.2</a>, <a href="5-mpi2.html#SP3_3_3">&#167;3.3.3</a>, <a href="5-mpi2.html#SP3_3_3_1">&#167;3.3.3.1</a>, <a href="5-mpi2.html#SP3_3_3_2">&#167;3.3.3.2</a>, <a href="5-mpi2.html#SP3_3_3_3">&#167;3.3.3.3</a>, <a href="5-mpi2.html#SP3_3_3_4">&#167;3.3.3.4</a>, <a href="5-mpi2.html#SP3_3_3_5">&#167;3.3.3.5</a>, <a href="5-mpi2.html#SP3_3_3_6">&#167;3.3.3.6</a>, <a href="5-mpi2.html#SP3_4">&#167;3.4</a>, <a href="5-mpi2.html#SP3_4_1">&#167;3.4.1</a>, <a href="5-mpi2.html#SP3_4_2">&#167;3.4.2</a>, <a href="5-mpi2.html#SP3_4_3">&#167;3.4.3</a>, <a href="5-mpi2.html#SP3_4_4">&#167;3.4.4</a>, <a href="5-mpi2.html#SP3_4_5">&#167;3.4.5</a>, <a href="5-mpi2.html#SP3_4_6">&#167;3.4.6</a>, <a href="5-mpi2.html#SP3_4_5_1">&#167;3.4.5.1</a>, <a href="5-mpi2.html#SP3_4_5_2">&#167;3.4.5.2</a>, <a href="5-mpi2.html#SP3_4_5_2_1">&#167;3.4.5.2.1</a>, <a href="5-mpi2.html#SP3_4_5_2_2">&#167;3.4.5.2.2</a>, <a href="5-mpi2.html#SP3_4_5_2_3">&#167;3.4.5.2.3</a>, <a href="5-mpi2.html#SP3_4_5_3">&#167;3.4.5.3</a>, <a href="5-mpi2.html#SP3_5">&#167;3.5</a>, <a href="5-mpi2.html#SP11_2">&#167;11.2</a>, <a href="5-mpi2.html#SP11_2_3">&#167;11.2.3</a><br/>Markdown Rendering - <a href="5-mr.html#SP2_5">&#167;2.5</a>, <a href="5-mr.html#SP2_6">&#167;2.6</a>, <a href="5-mr.html#SP2_7">&#167;2.7</a>, <a href="5-mr.html#SP2_13">&#167;2.13</a>, <a href="5-mr.html#SP4">&#167;4</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP6">&#167;6</a>, <a href="5-im.html#SP7">&#167;7</a>, <a href="5-im.html#SP13">&#167;13</a>, <a href="5-im.html#SP14">&#167;14</a>, <a href="5-im.html#SP17">&#167;17</a>, <a href="5-im.html#SP18_2">&#167;18.2</a>, <a href="5-im.html#SP18_2_1">&#167;18.2.1</a>, <a href="5-im.html#SP18_2_2">&#167;18.2.2</a>, <a href="5-im.html#SP18_2_2_1">&#167;18.2.2.1</a>, <a href="5-im.html#SP18_2_2_1_1">&#167;18.2.2.1.1</a>, <a href="5-im.html#SP18_2_3">&#167;18.2.3</a>, <a href="5-im.html#SP18_2_4">&#167;18.2.4</a>, <a href="5-im.html#SP19">&#167;19</a><br/>Web Structure - <a href="8-ws.html#SP13">&#167;13</a><br/>Web Ranges - <a href="8-wr.html#SP1_1_1">&#167;1.1.1</a><br/>Literate Source - <a href="8-ls.html#SP14">&#167;14</a>, <a href="8-ls.html#SP27">&#167;27</a><br/>Web Notations - <a href="8-wn.html#SP20">&#167;20</a>, <a href="8-wn.html#SP22_1">&#167;22.1</a>, <a href="8-wn.html#SP22_1_4">&#167;22.1.4</a><br/>Holons - <a href="8-hln.html#SP5_1_1">&#167;5.1.1</a><br/>The Tangler - <a href="8-tt2.html#SP10_1_3">&#167;10.1.3</a>, <a href="8-tt2.html#SP13">&#167;13</a>, <a href="8-tt2.html#SP14_1">&#167;14.1</a><br/>Build Files - <a href="8-bf.html#SP9">&#167;9</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a>, <a href="9-pl.html#SP16">&#167;16</a>, <a href="9-pl.html#SP17">&#167;17</a><br/>Code Analysis - <a href="9-ca.html#SP7">&#167;7</a>, <a href="9-ca.html#SP7_1">&#167;7.1</a><br/>Ctags Support - <a href="9-cs.html#SP3">&#167;3</a><br/>The Painter - <a href="9-tp.html#SP2_1">&#167;2.1</a>, <a href="9-tp.html#SP2_2">&#167;2.2</a>, <a href="9-tp.html#SP3">&#167;3</a>, <a href="9-tp.html#SP4">&#167;4</a>, <a href="9-tp.html#SP6">&#167;6</a>, <a href="9-tp.html#SP7_1">&#167;7.1</a>, <a href="9-tp.html#SP9">&#167;9</a>, <a href="9-tp.html#SP9_3_1">&#167;9.3.1</a><br/>ACME Support - <a href="9-as.html#SP2">&#167;2</a><br/>InC Support - <a href="9-is.html#SP2_2">&#167;2.2</a>, <a href="9-is.html#SP2_2_1">&#167;2.2.1</a>, <a href="9-is.html#SP10">&#167;10</a>, <a href="9-is.html#SP11">&#167;11</a>, <a href="9-is.html#SP11_1">&#167;11.1</a>, <a href="9-is.html#SP11_2">&#167;11.2</a>, <a href="9-is.html#SP11_2_1">&#167;11.2.1</a>, <a href="9-is.html#SP11_4">&#167;11.4</a><br/>Patterns - <a href="10-pt.html#SP8">&#167;8</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP12_1">&#167;12.1</a>, <a href="10-apacs.html#SP12_5">&#167;12.5</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP4">&#167;4</a><br/>Weave Tree - <a href="10-wt.html#SP5">&#167;5</a><br/>TeX Format - <a href="10-tf.html#SP6">&#167;6</a>, <a href="10-tf.html#SP9">&#167;9</a><br/>HTML Formats - <a href="10-hf.html#SP5_22">&#167;5.22</a>, <a href="10-hf.html#SP5_27">&#167;5.27</a>, <a href="10-hf.html#SP12">&#167;12</a><br/>Debugging Format - <a href="10-df.html#SP3">&#167;3</a><br/>TeX Utilities - <a href="10-tu.html#SP7">&#167;7</a>, <a href="10-tu.html#SP7_1">&#167;7.1</a>, <a href="10-tu.html#SP7_2">&#167;7.2</a>, <a href="10-tu.html#SP7_3">&#167;7.3</a>, <a href="10-tu.html#SP7_4">&#167;7.4</a>, <a href="10-tu.html#SP7_4_2">&#167;7.4.2</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">index</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (</span><span class="identifier-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="2-str.html#SP42" class="function-link"><span class="function-syntax">Streams::get_char_at_index</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">index</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="function-syntax">Str::get_first_char</span><button class="popup" onclick="togglePopup('usagePopup18')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup18">Usage of <span class="code-font"><span class="function-syntax">Str::get_first_char</span></span>:<br/><a href="4-sm.html#SP16">&#167;16</a><br/>Filenames - <a href="3-fln.html#SP8">&#167;8</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3">&#167;5.1.3</a>, <a href="4-prp.html#SP12_2_1">&#167;12.2.1</a><br/>Markdown Phase I - <a href="5-mpi.html#SP26_6">&#167;26.6</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3_1_1">&#167;3.1.1</a><br/>Version Numbers - <a href="7-vn.html#SP10">&#167;10</a><br/>Colonies - <a href="8-cln.html#SP7">&#167;7</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a>, <a href="8-wcp.html#SP3_2_1">&#167;3.2.1</a><br/>The Tangler - <a href="8-tt2.html#SP14_2">&#167;14.2</a><br/>Programming Languages - <a href="9-pl.html#SP7">&#167;7</a>, <a href="9-pl.html#SP12_2">&#167;12.2</a>, <a href="9-pl.html#SP14">&#167;14</a><br/>Ctags Support - <a href="9-cs.html#SP3">&#167;3</a><br/>The Painter - <a href="9-tp.html#SP2_1">&#167;2.1</a>, <a href="9-tp.html#SP9_3_1">&#167;9.3.1</a>, <a href="9-tp.html#SP9_3_2">&#167;9.3.2</a>, <a href="9-tp.html#SP9_3_3">&#167;9.3.3</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1">&#167;2.1</a>, <a href="9-cl.html#SP3_2">&#167;3.2</a><br/>Patterns - <a href="10-pt.html#SP6">&#167;6</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP6">&#167;6</a><br/>HTML Formats - <a href="10-hf.html#SP5_25">&#167;5.25</a>, <a href="10-hf.html#SP5_36">&#167;5.36</a>, <a href="10-hf.html#SP10">&#167;10</a><br/>TeX Utilities - <a href="10-tu.html#SP4">&#167;4</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="constant-syntax">0</span><span class="plain-syntax">));</span>
<span class="plain-syntax">}</span>

<span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="function-syntax">Str::get_last_char</span><button class="popup" onclick="togglePopup('usagePopup19')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup19">Usage of <span class="code-font"><span class="function-syntax">Str::get_last_char</span></span>:<br/>Pathnames - <a href="3-pth.html#SP8">&#167;8</a><br/>Directories - <a href="3-drc.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3">&#167;5.1.3</a><br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3_1_1">&#167;3.1.1</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP14_1">&#167;14.1</a><br/>Web Control Language - <a href="8-wcl.html#SP16">&#167;16</a>, <a href="8-wcl.html#SP24_1">&#167;24.1</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a>, <a href="8-wcp.html#SP3_2_1_1">&#167;3.2.1.1</a><br/>Web Notations - <a href="8-wn.html#SP13">&#167;13</a><br/>The Tangler - <a href="8-tt2.html#SP14_2_2">&#167;14.2.2</a><br/>Programming Languages - <a href="9-pl.html#SP1">&#167;1</a><br/>Patterns - <a href="10-pt.html#SP3">&#167;3</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP6">&#167;6</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_2">&#167;1.2</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">L</span><span class="plain-syntax"> == </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">L</span><span class="plain-syntax">-1));</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP14" class="paragraph-anchor"></a><b>&#167;14. </b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::put</span><button class="popup" onclick="togglePopup('usagePopup20')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup20">Usage of <span class="code-font"><span class="function-syntax">Str::put</span></span>:<br/><a href="4-sm.html#SP15">&#167;15</a>, <a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP25">&#167;25</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP7_2">&#167;7.2</a><br/>InC Support - <a href="9-is.html#SP2_1_2_2">&#167;2.1.2.2</a>, <a href="9-is.html#SP2_1_1_1_2_1">&#167;2.1.1.1.2.1</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="identifier-syntax">C</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"wrote before start of string"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"wrote to null stream"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">ext</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &gt; </span><span class="identifier-syntax">ext</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"wrote beyond end of string"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> == </span><span class="identifier-syntax">ext</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">C</span><span class="plain-syntax">) </span><span class="identifier-syntax">PUT_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">return</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP42" class="function-link"><span class="function-syntax">Streams::put_char_at_index</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">, </span><span class="identifier-syntax">C</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::put_at</span><button class="popup" onclick="togglePopup('usagePopup21')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup21">Usage of <span class="code-font"><span class="function-syntax">Str::put_at</span></span>:<br/>Text Files - <a href="4-tf.html#SP5_3">&#167;5.3</a>, <a href="4-tf.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP4_2">&#167;4.2</a><br/>Markdown - <a href="5-mrk.html#SP45">&#167;45</a><br/>Markdown Phase I - <a href="5-mpi.html#SP26_6">&#167;26.6</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP18_2_2">&#167;18.2.2</a><br/>Web Ranges - <a href="8-wr.html#SP1_1_1">&#167;1.1.1</a><br/>The Painter - <a href="9-tp.html#SP2">&#167;2</a>, <a href="9-tp.html#SP2_1">&#167;2.1</a>, <a href="9-tp.html#SP2_2">&#167;2.2</a>, <a href="9-tp.html#SP7">&#167;7</a><br/>Language Methods - <a href="9-lm.html#SP23">&#167;23</a><br/>Weave Tree - <a href="10-wt.html#SP5">&#167;5</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">index</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="identifier-syntax">C</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP14" class="function-link"><span class="function-syntax">Str::put</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">index</span><span class="plain-syntax">), </span><span class="identifier-syntax">C</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP15" class="paragraph-anchor"></a><b>&#167;15. Truncation.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::clear</span><button class="popup" onclick="togglePopup('usagePopup22')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup22">Usage of <span class="code-font"><span class="function-syntax">Str::clear</span></span>:<br/><a href="4-sm.html#SP16">&#167;16</a>, <a href="4-sm.html#SP17">&#167;17</a>, <a href="4-sm.html#SP18">&#167;18</a>, <a href="4-sm.html#SP25">&#167;25</a><br/>Filenames - <a href="3-fln.html#SP13">&#167;13</a><br/>Directories - <a href="3-drc.html#SP2">&#167;2</a>, <a href="3-drc.html#SP5">&#167;5</a><br/>Text Files - <a href="4-tf.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3_1_1">&#167;5.1.3.1.1</a>, <a href="4-prp.html#SP12_2">&#167;12.2</a>, <a href="4-prp.html#SP14">&#167;14</a>, <a href="4-prp.html#SP18">&#167;18</a>, <a href="4-prp.html#SP19_1">&#167;19.1</a><br/>Pattern Matching - <a href="4-pm.html#SP11_6">&#167;11.6</a><br/>JSON - <a href="4-jsn.html#SP39">&#167;39</a><br/>HTML - <a href="5-htm.html#SP28_2">&#167;28.2</a><br/>Markdown - <a href="5-mrk.html#SP5_1">&#167;5.1</a>, <a href="5-mrk.html#SP52">&#167;52</a><br/>Markdown Phase I - <a href="5-mpi.html#SP5">&#167;5</a>, <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a>, <a href="5-mpi.html#SP25_3_3_10">&#167;25.3.3.10</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a>, <a href="5-mpi.html#SP28_2">&#167;28.2</a>, <a href="5-mpi.html#SP29">&#167;29</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP11_2_3">&#167;11.2.3</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP3">&#167;3</a>, <a href="5-im.html#SP4">&#167;4</a>, <a href="5-im.html#SP5">&#167;5</a>, <a href="5-im.html#SP13">&#167;13</a>, <a href="5-im.html#SP14">&#167;14</a>, <a href="5-im.html#SP16">&#167;16</a>, <a href="5-im.html#SP17">&#167;17</a>, <a href="5-im.html#SP18_2_1">&#167;18.2.1</a>, <a href="5-im.html#SP18_2_2">&#167;18.2.2</a>, <a href="5-im.html#SP18_2_4">&#167;18.2.4</a><br/>Version Numbers - <a href="7-vn.html#SP7_1">&#167;7.1</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP8">&#167;8</a>, <a href="8-bdfw.html#SP8_1">&#167;8.1</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2_1_2">&#167;3.2.1.2</a>, <a href="8-wcp.html#SP3_2_1_3">&#167;3.2.1.3</a>, <a href="8-wcp.html#SP3_2_1_3_2">&#167;3.2.1.3.2</a><br/>Web Ranges - <a href="8-wr.html#SP1_1">&#167;1.1</a>, <a href="8-wr.html#SP1_1_2">&#167;1.1.2</a><br/>Literate Source - <a href="8-ls.html#SP8_8">&#167;8.8</a>, <a href="8-ls.html#SP8_8_1">&#167;8.8.1</a>, <a href="8-ls.html#SP14">&#167;14</a>, <a href="8-ls.html#SP8_10">&#167;8.10</a>, <a href="8-ls.html#SP25">&#167;25</a><br/>Line Classification - <a href="8-lc.html#SP17_2_3">&#167;17.2.3</a><br/>Web Notations - <a href="8-wn.html#SP14">&#167;14</a>, <a href="8-wn.html#SP22_1">&#167;22.1</a><br/>Holons - <a href="8-hln.html#SP5_1_1">&#167;5.1.1</a>, <a href="8-hln.html#SP5_1_1_1">&#167;5.1.1.1</a>, <a href="8-hln.html#SP5_3_4">&#167;5.3.4</a>, <a href="8-hln.html#SP6">&#167;6</a><br/>The Tangler - <a href="8-tt2.html#SP13">&#167;13</a>, <a href="8-tt2.html#SP14">&#167;14</a>, <a href="8-tt2.html#SP14_2_1">&#167;14.2.1</a><br/>Build Files - <a href="8-bf.html#SP8">&#167;8</a>, <a href="8-bf.html#SP9">&#167;9</a><br/>Programming Languages - <a href="9-pl.html#SP12_1">&#167;12.1</a><br/>Conditional Compilation - <a href="9-cc.html#SP2">&#167;2</a>, <a href="9-cc.html#SP3">&#167;3</a><br/>Ctags Support - <a href="9-cs.html#SP3">&#167;3</a><br/>The Painter - <a href="9-tp.html#SP4">&#167;4</a>, <a href="9-tp.html#SP9">&#167;9</a><br/>InC Support - <a href="9-is.html#SP2_1_1_1_2">&#167;2.1.1.1.2</a>, <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a>, <a href="9-is.html#SP11_2_2">&#167;11.2.2</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a>, <a href="10-ts.html#SP9_1_1_1">&#167;9.1.1.1</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP13">&#167;13</a><br/>The Collater - <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a><br/>The Weaver - <a href="10-tw.html#SP2_6_1_2_1_1">&#167;2.6.1.2.1.1</a>, <a href="10-tw.html#SP2_6_1_2_1_1_5">&#167;2.6.1.2.1.1.5</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_2">&#167;1.2</a><br/>TeX Format - <a href="10-tf.html#SP5">&#167;5</a>, <a href="10-tf.html#SP5_2">&#167;5.2</a>, <a href="10-tf.html#SP10_2">&#167;10.2</a><br/>HTML Formats - <a href="10-hf.html#SP5_16">&#167;5.16</a><br/>TeX Utilities - <a href="10-tu.html#SP6">&#167;6</a>, <a href="10-tu.html#SP7_4_2">&#167;7.4.2</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a>, <a href="11-mk.html#SP9_1">&#167;9.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="constant-syntax">0</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::truncate</span><button class="popup" onclick="togglePopup('usagePopup23')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup23">Usage of <span class="code-font"><span class="function-syntax">Str::truncate</span></span>:<br/><a href="4-sm.html#SP24">&#167;24</a>, <a href="4-sm.html#SP25">&#167;25</a><br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a><br/>Markdown Rendering - <a href="5-mr.html#SP2_13">&#167;2.13</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP17">&#167;17</a><br/>Web Structure - <a href="8-ws.html#SP13">&#167;13</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2_1_1">&#167;3.2.1.1</a><br/>Web Ranges - <a href="8-wr.html#SP1_1_2">&#167;1.1.2</a><br/>Holons - <a href="8-hln.html#SP5_1_1_1">&#167;5.1.1.1</a><br/>The Tangler - <a href="8-tt2.html#SP13">&#167;13</a><br/>C-Like Languages - <a href="9-cl.html#SP3_2_2_1">&#167;3.2.2.1</a><br/>InC Support - <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP4">&#167;4</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">len</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">len</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="identifier-syntax">len</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">len</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">)) </span><a href="4-sm.html#SP14" class="function-link"><span class="function-syntax">Str::put</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">len</span><span class="plain-syntax">), </span><span class="constant-syntax">0</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP16" class="paragraph-anchor"></a><b>&#167;16. Indentation.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::remove_indentation</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">spaces_per_tab</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">, </span><span class="identifier-syntax">tab_stops_of_indentation</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">while</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP2" class="function-link"><span class="function-syntax">Characters::is_space_or_tab</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_first_char</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">))) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_first_char</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">) == </span><span class="character-syntax">'\t'</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">tab_stops_of_indentation</span><span class="plain-syntax">++;</span>
<span class="plain-syntax">        } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax">++;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> == </span><span class="identifier-syntax">spaces_per_tab</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">tab_stops_of_indentation</span><span class="plain-syntax">++;</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP25" class="function-link"><span class="function-syntax">Str::delete_first_character</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> &gt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">TEMPORARY_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">respaced</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">while</span><span class="plain-syntax"> (</span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax"> &gt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) { </span><span class="identifier-syntax">PUT_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">respaced</span><span class="plain-syntax">, </span><span class="character-syntax">' '</span><span class="plain-syntax">); </span><span class="identifier-syntax">spaces_in</span><span class="plain-syntax">--; }</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">respaced</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP17" class="function-link"><span class="function-syntax">Str::copy</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">respaced</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">DISCARD_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">respaced</span><span class="plain-syntax">)</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">tab_stops_of_indentation</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::rectify_indentation</span><button class="popup" onclick="togglePopup('usagePopup24')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup24">Usage of <span class="code-font"><span class="function-syntax">Str::rectify_indentation</span></span>:<br/>The Weaver - <a href="10-tw.html#SP2_6_1_2_1_1">&#167;2.6.1.2.1.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">spaces_per_tab</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">TEMPORARY_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">tail</span><span class="plain-syntax">)</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">tail</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">N</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP16" class="function-link"><span class="function-syntax">Str::remove_indentation</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">tail</span><span class="plain-syntax">, </span><span class="identifier-syntax">spaces_per_tab</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">N</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">j</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">spaces_per_tab</span><span class="plain-syntax">; </span><span class="identifier-syntax">j</span><span class="plain-syntax">++) </span><span class="identifier-syntax">PUT_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="character-syntax">' '</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">tail</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">DISCARD_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">tail</span><span class="plain-syntax">)</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP17" class="paragraph-anchor"></a><b>&#167;17. Copying.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::concatenate</span><button class="popup" onclick="togglePopup('usagePopup25')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup25">Usage of <span class="code-font"><span class="function-syntax">Str::concatenate</span></span>:<br/>C-Like Languages - <a href="9-cl.html#SP3_2_1">&#167;3.2.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP44" class="function-link"><span class="function-syntax">Streams::copy</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy</span><button class="popup" onclick="togglePopup('usagePopup26')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup26">Usage of <span class="code-font"><span class="function-syntax">Str::copy</span></span>:<br/><a href="4-sm.html#SP16">&#167;16</a><br/>Command Line Arguments - <a href="3-cla.html#SP12">&#167;12</a><br/>Filenames - <a href="3-fln.html#SP13">&#167;13</a><br/>Directories - <a href="3-drc.html#SP5">&#167;5</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3_1_1">&#167;5.1.3.1.1</a>, <a href="4-prp.html#SP12_2">&#167;12.2</a>, <a href="4-prp.html#SP18">&#167;18</a><br/>Pattern Matching - <a href="4-pm.html#SP14">&#167;14</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP16">&#167;16</a>, <a href="5-im.html#SP17">&#167;17</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a>, <a href="5-ee.html#SP7_1">&#167;7.1</a><br/>Web Control Language - <a href="8-wcl.html#SP12_4">&#167;12.4</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP6">&#167;6</a><br/>Web Structure - <a href="8-ws.html#SP12_1">&#167;12.1</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP7">&#167;7</a>, <a href="8-bdfw.html#SP7_2">&#167;7.2</a>, <a href="8-bdfw.html#SP8">&#167;8</a><br/>Web Contents Pages - <a href="8-wcp.html#SP1">&#167;1</a>, <a href="8-wcp.html#SP3_2_1_2">&#167;3.2.1.2</a>, <a href="8-wcp.html#SP3_2_1_3_1">&#167;3.2.1.3.1</a><br/>Single-File Webs - <a href="8-sw.html#SP1">&#167;1</a><br/>Web Ranges - <a href="8-wr.html#SP1_1_2">&#167;1.1.2</a><br/>Literate Source - <a href="8-ls.html#SP21">&#167;21</a>, <a href="8-ls.html#SP25">&#167;25</a><br/>Line Classification - <a href="8-lc.html#SP17_2_3">&#167;17.2.3</a><br/>Web Notations - <a href="8-wn.html#SP6">&#167;6</a>, <a href="8-wn.html#SP14">&#167;14</a><br/>Build Files - <a href="8-bf.html#SP8">&#167;8</a><br/>Programming Languages - <a href="9-pl.html#SP6">&#167;6</a>, <a href="9-pl.html#SP12_1">&#167;12.1</a><br/>Code Analysis - <a href="9-ca.html#SP11_1">&#167;11.1</a><br/>Enumerated Constants - <a href="9-ec.html#SP3_1">&#167;3.1</a><br/>The Painter - <a href="9-tp.html#SP4">&#167;4</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1">&#167;2.1.1</a>, <a href="9-cl.html#SP2_1_1_1">&#167;2.1.1.1</a>, <a href="9-cl.html#SP2_1_1_4">&#167;2.1.1.4</a>, <a href="9-cl.html#SP3_2">&#167;3.2</a>, <a href="9-cl.html#SP3_2_1">&#167;3.2.1</a><br/>InC Support - <a href="9-is.html#SP2_1_1">&#167;2.1.1</a>, <a href="9-is.html#SP2_1_1_1_2">&#167;2.1.1.1.2</a>, <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a>, <a href="10-ts.html#SP9_1_1_1">&#167;9.1.1.1</a><br/>Patterns - <a href="10-pt.html#SP4_2">&#167;4.2</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP13">&#167;13</a><br/>The Collater - <a href="10-tc.html#SP5">&#167;5</a>, <a href="10-tc.html#SP5_1">&#167;5.1</a>, <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a>, <a href="10-tc.html#SP5_1_9_7_1">&#167;5.1.9.7.1</a>, <a href="10-tc.html#SP5_1_9_8_1">&#167;5.1.9.8.1</a><br/>The Weaver - <a href="10-tw.html#SP2_6_1_2_2">&#167;2.6.1.2.2</a>, <a href="10-tw.html#SP2_6_1_2_2_1_3">&#167;2.6.1.2.2.1.3</a>, <a href="10-tw.html#SP2_6_1_2_2_1_4">&#167;2.6.1.2.2.1.4</a>, <a href="10-tw.html#SP2_6_1_2_1_1_2">&#167;2.6.1.2.1.1.2</a>, <a href="10-tw.html#SP2_6_1_2_1_1_3">&#167;2.6.1.2.1.1.3</a>, <a href="10-tw.html#SP2_6_1_2_1_1_5">&#167;2.6.1.2.1.1.5</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a><br/>TeX Format - <a href="10-tf.html#SP5">&#167;5</a>, <a href="10-tf.html#SP5_2">&#167;5.2</a>, <a href="10-tf.html#SP10_2">&#167;10.2</a><br/>HTML Formats - <a href="10-hf.html#SP5_3">&#167;5.3</a><br/>TeX Utilities - <a href="10-tu.html#SP6">&#167;6</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S1</span><span class="plain-syntax"> == </span><span class="identifier-syntax">S2</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP44" class="function-link"><span class="function-syntax">Streams::copy</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_tail</span><button class="popup" onclick="togglePopup('usagePopup27')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup27">Usage of <span class="code-font"><span class="function-syntax">Str::copy_tail</span></span>:<br/>InC Support - <a href="9-is.html#SP2_2_1_1">&#167;2.2.1.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">from</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">from</span><span class="plain-syntax"> &lt; </span><span class="identifier-syntax">L</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="identifier-syntax">from</span><span class="plain-syntax">); </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="identifier-syntax">L</span><span class="plain-syntax">; </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">))</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">PUT_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">));</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP18" class="paragraph-anchor"></a><b>&#167;18. </b>A subtly different operation is to set a string equal to a given C string:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_ISO_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP29" class="function-link"><span class="function-syntax">Streams::write_ISO_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_UTF8_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP30" class="function-link"><span class="function-syntax">Streams::write_UTF8_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::copy_wide_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="2-str.html#SP28" class="function-link"><span class="function-syntax">Streams::write_wide_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP19" class="paragraph-anchor"></a><b>&#167;19. Comparisons.</b>We provide both case sensitive and insensitive versions.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::eq</span><button class="popup" onclick="togglePopup('usagePopup28')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup28">Usage of <span class="code-font"><span class="function-syntax">Str::eq</span></span>:<br/>Debugging Log - <a href="2-dl.html#SP9">&#167;9</a><br/>Dictionaries - <a href="2-dct.html#SP7_3">&#167;7.3</a><br/>Command Line Arguments - <a href="3-cla.html#SP8">&#167;8</a><br/>Pathnames - <a href="3-pth.html#SP3">&#167;3</a>, <a href="3-pth.html#SP7">&#167;7</a>, <a href="3-pth.html#SP8">&#167;8</a><br/>Filenames - <a href="3-fln.html#SP11">&#167;11</a>, <a href="3-fln.html#SP13">&#167;13</a><br/>Directories - <a href="3-drc.html#SP5">&#167;5</a>, <a href="3-drc.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_1">&#167;5.1.1</a>, <a href="4-prp.html#SP5_1_3_1_1">&#167;5.1.3.1.1</a>, <a href="4-prp.html#SP8">&#167;8</a>, <a href="4-prp.html#SP15">&#167;15</a><br/>JSON - <a href="4-jsn.html#SP10">&#167;10</a><br/>HTML Entities - <a href="5-he.html#SP1">&#167;1</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP18_2_2">&#167;18.2.2</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP14_3_1">&#167;14.3.1</a><br/>Web Structure - <a href="8-ws.html#SP12_1">&#167;12.1</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP6">&#167;6</a><br/>Single-File Webs - <a href="8-sw.html#SP3_2">&#167;3.2</a><br/>Web Ranges - <a href="8-wr.html#SP1">&#167;1</a>, <a href="8-wr.html#SP1_1_2">&#167;1.1.2</a>, <a href="8-wr.html#SP2">&#167;2</a>, <a href="8-wr.html#SP3">&#167;3</a><br/>Literate Source - <a href="8-ls.html#SP20">&#167;20</a><br/>Web Notations - <a href="8-wn.html#SP14">&#167;14</a>, <a href="8-wn.html#SP19">&#167;19</a>, <a href="8-wn.html#SP21">&#167;21</a><br/>Holons - <a href="8-hln.html#SP2">&#167;2</a>, <a href="8-hln.html#SP5_1_1_2">&#167;5.1.1.2</a><br/>Holon Syntax - <a href="8-hs.html#SP1_1_4">&#167;1.1.4</a>, <a href="8-hs.html#SP1_1_6">&#167;1.1.6</a><br/>The Tangler - <a href="8-tt2.html#SP8_3">&#167;8.3</a><br/>Programming Languages - <a href="9-pl.html#SP6_2">&#167;6.2</a>, <a href="9-pl.html#SP7_1">&#167;7.1</a>, <a href="9-pl.html#SP7_2">&#167;7.2</a>, <a href="9-pl.html#SP12_2">&#167;12.2</a>, <a href="9-pl.html#SP13">&#167;13</a>, <a href="9-pl.html#SP14">&#167;14</a>, <a href="9-pl.html#SP15">&#167;15</a>, <a href="9-pl.html#SP16">&#167;16</a><br/>Code Analysis - <a href="9-ca.html#SP12">&#167;12</a>, <a href="9-ca.html#SP13">&#167;13</a><br/>Enumerated Constants - <a href="9-ec.html#SP2">&#167;2</a><br/>Types and Functions - <a href="9-taf.html#SP5">&#167;5</a>, <a href="9-taf.html#SP7_2">&#167;7.2</a><br/>Reserved Words - <a href="9-rw.html#SP4">&#167;4</a><br/>C-Like Languages - <a href="9-cl.html#SP2_2_1">&#167;2.2.1</a><br/>InC Support - <a href="9-is.html#SP2_1_1_1_2">&#167;2.1.1.1.2</a>, <a href="9-is.html#SP11_2_2">&#167;11.2.2</a>, <a href="9-is.html#SP12">&#167;12</a>, <a href="9-is.html#SP13">&#167;13</a>, <a href="9-is.html#SP16">&#167;16</a>, <a href="9-is.html#SP17">&#167;17</a><br/>The Swarm - <a href="10-ts.html#SP11">&#167;11</a><br/>Patterns - <a href="10-pt.html#SP7">&#167;7</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP10_2">&#167;10.2</a><br/>The Collater - <a href="10-tc.html#SP5_1_2">&#167;5.1.2</a>, <a href="10-tc.html#SP5_1_3">&#167;5.1.3</a>, <a href="10-tc.html#SP5_1_5_2">&#167;5.1.5.2</a>, <a href="10-tc.html#SP5_1_9_15_1">&#167;5.1.9.15.1</a><br/>TeX Format - <a href="10-tf.html#SP4_28">&#167;4.28</a><br/>HTML Formats - <a href="10-hf.html#SP5_3">&#167;5.3</a>, <a href="10-hf.html#SP5_33">&#167;5.33</a><br/>TeX Utilities - <a href="10-tu.html#SP7_4">&#167;7.4</a>, <a href="10-tu.html#SP7_4_1">&#167;7.4.1</a>, <a href="10-tu.html#SP7_4_2">&#167;7.4.2</a><br/>Makefiles - <a href="11-mk.html#SP6">&#167;6</a>, <a href="11-mk.html#SP7">&#167;7</a>, <a href="11-mk.html#SP7_1">&#167;7.1</a><br/>Readme Writeme - <a href="11-rw.html#SP2">&#167;2</a>, <a href="11-rw.html#SP3">&#167;3</a>, <a href="11-rw.html#SP4">&#167;4</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP20" class="function-link"><span class="function-syntax">Str::cmp</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">) == </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::eq_insensitive</span><button class="popup" onclick="togglePopup('usagePopup29')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup29">Usage of <span class="code-font"><span class="function-syntax">Str::eq_insensitive</span></span>:<br/>Filenames - <a href="3-fln.html#SP11">&#167;11</a><br/>Markdown - <a href="5-mrk.html#SP25">&#167;25</a><br/>Markdown Phase I - <a href="5-mpi.html#SP26_6_1">&#167;26.6.1</a>, <a href="5-mpi.html#SP26_6_6">&#167;26.6.6</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP18_2">&#167;18.2</a><br/>Web Control Language - <a href="8-wcl.html#SP9">&#167;9</a>, <a href="8-wcl.html#SP16">&#167;16</a>, <a href="8-wcl.html#SP21_1">&#167;21.1</a>, <a href="8-wcl.html#SP30">&#167;30</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a>, <a href="8-cln.html#SP10">&#167;10</a>, <a href="8-cln.html#SP11_1">&#167;11.1</a>, <a href="8-cln.html#SP11_2">&#167;11.2</a>, <a href="8-cln.html#SP13_4">&#167;13.4</a>, <a href="8-cln.html#SP13_5">&#167;13.5</a><br/>Web Modules - <a href="8-wm.html#SP11">&#167;11</a>, <a href="8-wm.html#SP11_1">&#167;11.1</a><br/>Web Notations - <a href="8-wn.html#SP4">&#167;4</a>, <a href="8-wn.html#SP5">&#167;5</a>, <a href="8-wn.html#SP8">&#167;8</a><br/>Programming Languages - <a href="9-pl.html#SP4">&#167;4</a><br/>The Swarm - <a href="10-ts.html#SP11">&#167;11</a><br/>Patterns - <a href="10-pt.html#SP6">&#167;6</a>, <a href="10-pt.html#SP7">&#167;7</a>, <a href="10-pt.html#SP9">&#167;9</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP2">&#167;2</a>, <a href="10-apacs.html#SP4">&#167;4</a>, <a href="10-apacs.html#SP10">&#167;10</a>, <a href="10-apacs.html#SP11">&#167;11</a><br/>The Collater - <a href="10-tc.html#SP9">&#167;9</a><br/>Format Methods - <a href="10-fm.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) == </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">)) &amp;&amp; (</span><a href="4-sm.html#SP20" class="function-link"><span class="function-syntax">Str::cmp_insensitive</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">) == </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::ne</span><button class="popup" onclick="togglePopup('usagePopup30')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup30">Usage of <span class="code-font"><span class="function-syntax">Str::ne</span></span>:<br/>Inform-Flavoured Markdown - <a href="5-im.html#SP14">&#167;14</a><br/>Version Numbers - <a href="7-vn.html#SP8">&#167;8</a><br/>Colonies - <a href="8-cln.html#SP7">&#167;7</a>, <a href="8-cln.html#SP14">&#167;14</a><br/>Web Structure - <a href="8-ws.html#SP7">&#167;7</a><br/>Build Files - <a href="8-bf.html#SP8">&#167;8</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a><br/>Types and Functions - <a href="9-taf.html#SP7_4">&#167;7.4</a><br/>InC Support - <a href="9-is.html#SP11_2_3">&#167;11.2.3</a><br/>The Weaver of Text - <a href="10-twot.html#SP1">&#167;1</a>, <a href="10-twot.html#SP4">&#167;4</a><br/>TeX Format - <a href="10-tf.html#SP4_3">&#167;4.3</a><br/>HTML Formats - <a href="10-hf.html#SP5_3">&#167;5.3</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP20" class="function-link"><span class="function-syntax">Str::cmp</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">) != </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::ne_insensitive</span><button class="popup" onclick="togglePopup('usagePopup31')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup31">Usage of <span class="code-font"><span class="function-syntax">Str::ne_insensitive</span></span>:<br/>Web Structure - <a href="8-ws.html#SP4">&#167;4</a><br/>Patterns - <a href="10-pt.html#SP4_2">&#167;4.2</a><br/>The Collater - <a href="10-tc.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) != </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">)) || (</span><a href="4-sm.html#SP20" class="function-link"><span class="function-syntax">Str::cmp_insensitive</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">) != </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP20" class="paragraph-anchor"></a><b>&#167;20. </b>These two routines produce a numerical string difference suitable for
alphabetic sorting, like <span class="extract"><span class="extract-syntax">strlen</span></span> in the C standard library.
</p>

<p class="commentary">This would be a more elegant implementation:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><span class="function-syntax">Str::start</span><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">), </span><span class="identifier-syntax">Q</span><span class="plain-syntax"> = </span><span class="function-syntax">Str::start</span><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="function-syntax">Str::len</span><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">)) &amp;&amp; (</span><span class="identifier-syntax">Q</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><span class="function-syntax">Str::len</span><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">));</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><span class="function-syntax">Str::forward</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">), </span><span class="identifier-syntax">Q</span><span class="plain-syntax"> = </span><span class="function-syntax">Str::forward</span><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax"> = (</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><span class="function-syntax">Str::get</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">) - (</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><span class="function-syntax">Str::get</span><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">d</span><span class="plain-syntax"> != </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="function-syntax">Str::len</span><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) - </span><span class="function-syntax">Str::len</span><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
</pre>
<p class="commentary">But profiling shows that the following speeds up the Inform 7 compiler by
around 1%.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::cmp</span><button class="popup" onclick="togglePopup('usagePopup32')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup32">Usage of <span class="code-font"><span class="function-syntax">Str::cmp</span></span>:<br/><a href="4-sm.html#SP19">&#167;19</a><br/>Time - <a href="3-tm.html#SP8">&#167;8</a><br/>Version Numbers - <a href="7-vn.html#SP8">&#167;8</a><br/>Types and Functions - <a href="9-taf.html#SP2_3">&#167;2.3</a><br/>InC Support - <a href="9-is.html#SP2_1_2_4">&#167;2.1.2.4</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L1</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">), </span><span class="identifier-syntax">L2</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">), </span><span class="identifier-syntax">M</span><span class="plain-syntax"> = </span><span class="identifier-syntax">L1</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">L2</span><span class="plain-syntax"> &lt; </span><span class="identifier-syntax">M</span><span class="plain-syntax">) </span><span class="identifier-syntax">M</span><span class="plain-syntax"> = </span><span class="identifier-syntax">L2</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">M</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax"> = (</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">) - (</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">d</span><span class="plain-syntax"> != </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">L1</span><span class="plain-syntax"> - </span><span class="identifier-syntax">L2</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::cmp_insensitive</span><button class="popup" onclick="togglePopup('usagePopup33')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup33">Usage of <span class="code-font"><span class="function-syntax">Str::cmp_insensitive</span></span>:<br/><a href="4-sm.html#SP19">&#167;19</a><br/>Command Line Arguments - <a href="3-cla.html#SP15">&#167;15</a><br/>Directories - <a href="3-drc.html#SP4">&#167;4</a><br/>Textual Tables - <a href="4-tt.html#SP1">&#167;1</a><br/>Web Control Language - <a href="8-wcl.html#SP23">&#167;23</a><br/>The Collater - <a href="10-tc.html#SP9">&#167;9</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::start</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">), </span><span class="identifier-syntax">Q</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::start</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        (</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">)) &amp;&amp; (</span><span class="identifier-syntax">Q</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">));</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">), </span><span class="identifier-syntax">Q</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax"> = </span><span class="identifier-syntax">tolower</span><span class="plain-syntax">((</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">)) - </span><span class="identifier-syntax">tolower</span><span class="plain-syntax">((</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">));</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">d</span><span class="plain-syntax"> != </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">d</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) - </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP21" class="paragraph-anchor"></a><b>&#167;21. </b>It's sometimes useful to see whether two strings agree on their last
<span class="extract"><span class="extract-syntax">N</span></span> characters, or their first <span class="extract"><span class="extract-syntax">N</span></span>. For example,
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">    </span><span class="function-syntax">Str::suffix_eq</span><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"wayzgoose"</span><span class="plain-syntax">, </span><span class="identifier-syntax">I</span><span class="string-syntax">"snow goose"</span><span class="plain-syntax">, </span><span class="identifier-syntax">N</span><span class="plain-syntax">)</span>
</pre>
<p class="commentary">will return <span class="extract"><span class="extract-syntax">TRUE</span></span> for <span class="extract"><span class="extract-syntax">N</span></span> equal to 0 to 5, and <span class="extract"><span class="extract-syntax">FALSE</span></span> thereafter.
</p>

<p class="commentary">(The Oxford English Dictionary defines a "wayzgoose" as a holiday outing
for the staff of a publishing house.)
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::prefix_eq</span><button class="popup" onclick="togglePopup('usagePopup34')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup34">Usage of <span class="code-font"><span class="function-syntax">Str::prefix_eq</span></span>:<br/>Pathnames - <a href="3-pth.html#SP7">&#167;7</a><br/>Filenames - <a href="3-fln.html#SP5">&#167;5</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP13">&#167;13</a><br/>InC Support - <a href="9-is.html#SP11_2_2">&#167;11.2.2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">N</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L1</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">), </span><span class="identifier-syntax">L2</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">N</span><span class="plain-syntax"> &gt; </span><span class="identifier-syntax">L1</span><span class="plain-syntax">) || (</span><span class="identifier-syntax">N</span><span class="plain-syntax"> &gt; </span><span class="identifier-syntax">L2</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">N</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">) != </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">))</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::suffix_eq</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">N</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L1</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">), </span><span class="identifier-syntax">L2</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">N</span><span class="plain-syntax"> &gt; </span><span class="identifier-syntax">L1</span><span class="plain-syntax">) || (</span><span class="identifier-syntax">N</span><span class="plain-syntax"> &gt; </span><span class="identifier-syntax">L2</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=1; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;=</span><span class="identifier-syntax">N</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">L1</span><span class="plain-syntax">-</span><span class="identifier-syntax">i</span><span class="plain-syntax">) != </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><span class="identifier-syntax">L2</span><span class="plain-syntax">-</span><span class="identifier-syntax">i</span><span class="plain-syntax">))</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::begins_with</span><button class="popup" onclick="togglePopup('usagePopup35')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup35">Usage of <span class="code-font"><span class="function-syntax">Str::begins_with</span></span>:<br/>Markdown Phase I - <a href="5-mpi.html#SP26_6_2">&#167;26.6.2</a>, <a href="5-mpi.html#SP26_6_3">&#167;26.6.3</a>, <a href="5-mpi.html#SP26_6_4">&#167;26.6.4</a>, <a href="5-mpi.html#SP26_6_5">&#167;26.6.5</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP14_1">&#167;14.1</a><br/>Web Control Language - <a href="8-wcl.html#SP12">&#167;12</a><br/>Colonies - <a href="8-cln.html#SP7">&#167;7</a><br/>Conditional Compilation - <a href="9-cc.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP21" class="function-link"><span class="function-syntax">Str::prefix_eq</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">));</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::ends_with</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><a href="4-sm.html#SP21" class="function-link"><span class="function-syntax">Str::suffix_eq</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">, </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">));</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::begins_with_wide_string</span><button class="popup" onclick="togglePopup('usagePopup36')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup36">Usage of <span class="code-font"><span class="function-syntax">Str::begins_with_wide_string</span></span>:<br/>Command Line Arguments - <a href="3-cla.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">prefix</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (*</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">]; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">) != </span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">])</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::ends_with_wide_string</span><button class="popup" onclick="togglePopup('usagePopup37')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup37">Usage of <span class="code-font"><span class="function-syntax">Str::ends_with_wide_string</span></span>:<br/>Readme Writeme - <a href="11-rw.html#SP4_1">&#167;4.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">suffix</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">suffix</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (*</span><span class="identifier-syntax">suffix</span><span class="plain-syntax"> == </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">, </span><span class="identifier-syntax">at</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">) - </span><a href="4-ws.html#SP1" class="function-link"><span class="function-syntax">Wide::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">suffix</span><span class="plain-syntax">); </span><span class="identifier-syntax">suffix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">]; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">at</span><span class="plain-syntax">+</span><span class="identifier-syntax">i</span><span class="plain-syntax">) != </span><span class="identifier-syntax">suffix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">])</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP22" class="paragraph-anchor"></a><b>&#167;22. </b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::eq_wide_string</span><button class="popup" onclick="togglePopup('usagePopup38')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup38">Usage of <span class="code-font"><span class="function-syntax">Str::eq_wide_string</span></span>:<br/>Debugging Log - <a href="2-dl.html#SP9">&#167;9</a><br/>Filenames - <a href="3-fln.html#SP9">&#167;9</a><br/>Epub Ebooks - <a href="5-ee.html#SP5">&#167;5</a>, <a href="5-ee.html#SP7_2_1">&#167;7.2.1</a>, <a href="5-ee.html#SP7_3_2_1">&#167;7.3.2.1</a><br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP7">&#167;7</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2_1_2">&#167;3.2.1.2</a><br/>Web Ranges - <a href="8-wr.html#SP3">&#167;3</a><br/>Code Analysis - <a href="9-ca.html#SP13">&#167;13</a><br/>Types and Functions - <a href="9-taf.html#SP7_1">&#167;7.1</a>, <a href="9-taf.html#SP7_4">&#167;7.4</a><br/>ACME Support - <a href="9-as.html#SP6">&#167;6</a><br/>C-Like Languages - <a href="9-cl.html#SP3_2_2">&#167;3.2.2</a>, <a href="9-cl.html#SP4">&#167;4</a><br/>InC Support - <a href="9-is.html#SP6">&#167;6</a>, <a href="9-is.html#SP7">&#167;7</a>, <a href="9-is.html#SP13">&#167;13</a>, <a href="9-is.html#SP18">&#167;18</a><br/>The Swarm - <a href="10-ts.html#SP9_1_1">&#167;9.1.1</a><br/>The Collater - <a href="10-tc.html#SP5_1_5_2">&#167;5.1.5.2</a>, <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a>, <a href="10-tc.html#SP5_1_9_6_1">&#167;5.1.9.6.1</a>, <a href="10-tc.html#SP5_1_9_7_1">&#167;5.1.9.7.1</a>, <a href="10-tc.html#SP5_1_9_8_1">&#167;5.1.9.8.1</a><br/>TeX Utilities - <a href="10-tu.html#SP6">&#167;6</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S2</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) == </span><span class="constant-syntax">0</span><span class="plain-syntax">)?</span><span class="identifier-syntax">TRUE:FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) == </span><a href="4-ws.html#SP1" class="function-link"><span class="function-syntax">Wide::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0;</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">S1</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">) != </span><span class="identifier-syntax">S2</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">++])</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::eq_narrow_string</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="reserved-syntax">char</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S2</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) == </span><span class="constant-syntax">0</span><span class="plain-syntax">)?</span><span class="identifier-syntax">TRUE:FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">) == (</span><span class="reserved-syntax">int</span><span class="plain-syntax">) </span><span class="identifier-syntax">strlen</span><span class="plain-syntax">(</span><span class="identifier-syntax">S2</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0;</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">S1</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">) != (</span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax">) </span><span class="identifier-syntax">S2</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">++])</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::ne_wide_string</span><button class="popup" onclick="togglePopup('usagePopup39')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup39">Usage of <span class="code-font"><span class="function-syntax">Str::ne_wide_string</span></span>:<br/>Bibliographic Data for Webs - <a href="8-bdfw.html#SP8_1">&#167;8.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S2</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP22" class="function-link"><span class="function-syntax">Str::eq_wide_string</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S1</span><span class="plain-syntax">, </span><span class="identifier-syntax">S2</span><span class="plain-syntax">)?</span><span class="identifier-syntax">FALSE:TRUE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP23" class="paragraph-anchor"></a><b>&#167;23. White space.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::is_whitespace</span><button class="popup" onclick="togglePopup('usagePopup40')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup40">Usage of <span class="code-font"><span class="function-syntax">Str::is_whitespace</span></span>:<br/>Command Line Arguments - <a href="3-cla.html#SP11">&#167;11</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_1">&#167;5.1.1</a>, <a href="4-prp.html#SP5_1_3_1_1">&#167;5.1.3.1.1</a>, <a href="4-prp.html#SP12_2">&#167;12.2</a><br/>Markdown - <a href="5-mrk.html#SP51">&#167;51</a><br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_2_2">&#167;25.3.3.2.2</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP18_2_2_1">&#167;18.2.2.1</a><br/>Web Control Language - <a href="8-wcl.html#SP12_6">&#167;12.6</a>, <a href="8-wcl.html#SP31">&#167;31</a><br/>Colonies - <a href="8-cln.html#SP5">&#167;5</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3_2">&#167;3.2</a><br/>Single-File Webs - <a href="8-sw.html#SP3">&#167;3</a><br/>Literate Source - <a href="8-ls.html#SP5_1">&#167;5.1</a>, <a href="8-ls.html#SP8_2_1">&#167;8.2.1</a>, <a href="8-ls.html#SP8_5">&#167;8.5</a>, <a href="8-ls.html#SP8_5_1">&#167;8.5.1</a>, <a href="8-ls.html#SP8_5_3">&#167;8.5.3</a><br/>Line Classification - <a href="8-lc.html#SP17">&#167;17</a><br/>Web Notations - <a href="8-wn.html#SP16_1">&#167;16.1</a><br/>The Painter - <a href="9-tp.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP2" class="function-link"><span class="function-syntax">Characters::is_space_or_tab</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">)) == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP24" class="paragraph-anchor"></a><b>&#167;24. </b>This removes spaces and tabs from both ends:
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::trim_white_space</span><button class="popup" onclick="togglePopup('usagePopup41')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup41">Usage of <span class="code-font"><span class="function-syntax">Str::trim_white_space</span></span>:<br/>Preprocessor - <a href="4-prp.html#SP18">&#167;18</a><br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_2_1">&#167;25.3.2.1</a>, <a href="5-mpi.html#SP26_5_1">&#167;26.5.1</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a>, <a href="5-mpi.html#SP29_1">&#167;29.1</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP14_1">&#167;14.1</a>, <a href="5-im.html#SP16">&#167;16</a><br/>Colonies - <a href="8-cln.html#SP7">&#167;7</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a><br/>Web Notations - <a href="8-wn.html#SP15">&#167;15</a><br/>Programming Languages - <a href="9-pl.html#SP7">&#167;7</a>, <a href="9-pl.html#SP12">&#167;12</a><br/>Code Analysis - <a href="9-ca.html#SP11_1">&#167;11.1</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1">&#167;2.1.1</a><br/>InC Support - <a href="9-is.html#SP11_2_1">&#167;11.2.1</a><br/>Patterns - <a href="10-pt.html#SP6">&#167;6</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">len</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">), </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">F</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::start</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (!(</span><a href="4-chr.html#SP2" class="function-link"><span class="function-syntax">Characters::is_space_or_tab</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">)))) { </span><span class="identifier-syntax">F</span><span class="plain-syntax"> = </span><span class="identifier-syntax">P</span><span class="plain-syntax">; </span><span class="reserved-syntax">break</span><span class="plain-syntax">; }</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">i</span><span class="plain-syntax">++;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_BACKWARDS_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (!(</span><a href="4-chr.html#SP2" class="function-link"><span class="function-syntax">Characters::is_space_or_tab</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">Q</span><span class="plain-syntax">)))) </span><span class="reserved-syntax">break</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">j</span><span class="plain-syntax">++;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">j</span><span class="plain-syntax"> &gt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">)) </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="constant-syntax">0</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">else</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">len</span><span class="plain-syntax"> = </span><span class="identifier-syntax">len</span><span class="plain-syntax"> - </span><span class="identifier-syntax">j</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">len</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax"> &gt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::start</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="identifier-syntax">c</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">do</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">c</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">F</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><a href="4-sm.html#SP14" class="function-link"><span class="function-syntax">Str::put</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><span class="identifier-syntax">c</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">); </span><span class="identifier-syntax">F</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">F</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">while</span><span class="plain-syntax"> (</span><span class="identifier-syntax">c</span><span class="plain-syntax"> != </span><span class="constant-syntax">0</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">len</span><span class="plain-syntax"> = </span><span class="identifier-syntax">len</span><span class="plain-syntax"> - </span><span class="identifier-syntax">i</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">len</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::trim_white_space_at_end</span><button class="popup" onclick="togglePopup('usagePopup42')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup42">Usage of <span class="code-font"><span class="function-syntax">Str::trim_white_space_at_end</span></span>:<br/>The Painter - <a href="9-tp.html#SP8">&#167;8</a>, <a href="9-tp.html#SP9">&#167;9</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">shortened</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">)-1; </span><span class="identifier-syntax">j</span><span class="plain-syntax"> &gt;= </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">j</span><span class="plain-syntax">--) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP2" class="function-link"><span class="function-syntax">Characters::is_space_or_tab</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">))) {</span>
<span class="plain-syntax">            </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">shortened</span><span class="plain-syntax"> = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">break</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">shortened</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::trim_all_white_space_at_end</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">shortened</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">)-1; </span><span class="identifier-syntax">j</span><span class="plain-syntax"> &gt;= </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">j</span><span class="plain-syntax">--) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP3" class="function-link"><span class="function-syntax">Characters::is_babel_whitespace</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">))) {</span>
<span class="plain-syntax">            </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">shortened</span><span class="plain-syntax"> = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">break</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">shortened</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP25" class="paragraph-anchor"></a><b>&#167;25. Deleting characters.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::delete_first_character</span><button class="popup" onclick="togglePopup('usagePopup43')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup43">Usage of <span class="code-font"><span class="function-syntax">Str::delete_first_character</span></span>:<br/><a href="4-sm.html#SP16">&#167;16</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3">&#167;5.1.3</a>, <a href="4-prp.html#SP12_2_1">&#167;12.2.1</a><br/>Markdown Phase I - <a href="5-mpi.html#SP26_6">&#167;26.6</a>, <a href="5-mpi.html#SP26_6_7">&#167;26.6.7</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP13">&#167;13</a>, <a href="5-im.html#SP17">&#167;17</a><br/>Colonies - <a href="8-cln.html#SP7">&#167;7</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a>, <a href="8-wcp.html#SP3_2_1">&#167;3.2.1</a><br/>InC Support - <a href="9-is.html#SP2_1_2_2">&#167;2.1.2.2</a><br/>HTML Formats - <a href="10-hf.html#SP5_3">&#167;5.3</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="4-sm.html#SP25" class="function-link"><span class="function-syntax">Str::delete_nth_character</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="constant-syntax">0</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::delete_last_character</span><button class="popup" onclick="togglePopup('usagePopup44')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup44">Usage of <span class="code-font"><span class="function-syntax">Str::delete_last_character</span></span>:<br/>Directories - <a href="3-drc.html#SP6">&#167;6</a><br/>Preprocessor - <a href="4-prp.html#SP5_1_3">&#167;5.1.3</a><br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_7">&#167;25.3.3.7</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP14_1">&#167;14.1</a><br/>Web Contents Pages - <a href="8-wcp.html#SP3">&#167;3</a>, <a href="8-wcp.html#SP3_2_1_3_2">&#167;3.2.1.3.2</a><br/>The Tangler - <a href="8-tt2.html#SP14_2_2">&#167;14.2.2</a><br/>Patterns - <a href="10-pt.html#SP3">&#167;3</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_2">&#167;1.2</a><br/>Makefiles - <a href="11-mk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">) &gt; </span><span class="constant-syntax">0</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">) - </span><span class="constant-syntax">1</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::delete_nth_character</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">n</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">n</span><span class="plain-syntax">); </span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax"> &lt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">); </span><span class="identifier-syntax">P</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">))</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP14" class="function-link"><span class="function-syntax">Str::put</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">, </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP11" class="function-link"><span class="function-syntax">Str::forward</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">P</span><span class="plain-syntax">)));</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::delete_n_characters</span><button class="popup" onclick="togglePopup('usagePopup45')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup45">Usage of <span class="code-font"><span class="function-syntax">Str::delete_n_characters</span></span>:<br/>Command Line Arguments - <a href="3-cla.html#SP5_1">&#167;5.1</a><br/>Pathnames - <a href="3-pth.html#SP7">&#167;7</a><br/>Filenames - <a href="3-fln.html#SP5">&#167;5</a><br/>Markdown Phase I - <a href="5-mpi.html#SP28">&#167;28</a>, <a href="5-mpi.html#SP32">&#167;32</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">n</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">) - </span><span class="identifier-syntax">n</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">L</span><span class="plain-syntax"> &lt;= </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::clear</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">else</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">L</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">            </span><a href="4-sm.html#SP14" class="function-link"><span class="function-syntax">Str::put</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">), </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP10" class="function-link"><span class="function-syntax">Str::at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">n</span><span class="plain-syntax">)));</span>
<span class="plain-syntax">        </span><a href="4-sm.html#SP15" class="function-link"><span class="function-syntax">Str::truncate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">L</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP26" class="paragraph-anchor"></a><b>&#167;26. Substrings.</b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">Str::substr</span><button class="popup" onclick="togglePopup('usagePopup46')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup46">Usage of <span class="code-font"><span class="function-syntax">Str::substr</span></span>:<br/>Pathnames - <a href="3-pth.html#SP8">&#167;8</a><br/>Filenames - <a href="3-fln.html#SP3">&#167;3</a><br/>Literate Source - <a href="8-ls.html#SP25">&#167;25</a><br/>Web Notations - <a href="8-wn.html#SP22_1_3">&#167;22.1.3</a>, <a href="8-wn.html#SP22_1_4">&#167;22.1.4</a><br/>Programming Languages - <a href="9-pl.html#SP7_2">&#167;7.2</a><br/>Conditional Compilation - <a href="9-cc.html#SP1">&#167;1</a><br/>The Painter - <a href="9-tp.html#SP6">&#167;6</a><br/>C-Like Languages - <a href="9-cl.html#SP2_1_1_4">&#167;2.1.1.4</a><br/>InC Support - <a href="9-is.html#SP11_2_2">&#167;11.2.2</a>, <a href="9-is.html#SP11_3">&#167;11.3</a>, <a href="9-is.html#SP11_4">&#167;11.4</a><br/>The Collater - <a href="10-tc.html#SP5_1_9">&#167;5.1.9</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP4_1">&#167;4.1</a>, <a href="10-twot.html#SP4_2">&#167;4.2</a>, <a href="10-twot.html#SP5">&#167;5</a></span></button><span class="plain-syntax">(</span><span class="constant-syntax">OUTPUT_STREAM</span><span class="plain-syntax">, </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">from</span><span class="plain-syntax">, </span><span class="reserved-syntax">string_position</span><span class="plain-syntax"> </span><span class="identifier-syntax">to</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">from</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax"> != </span><span class="identifier-syntax">to</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"substr on two different strings"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="identifier-syntax">from</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax"> &lt; </span><span class="identifier-syntax">to</span><span class="plain-syntax">.</span><span class="element-syntax">index</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">PUT</span><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">from</span><span class="plain-syntax">.</span><span class="element-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">));</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes_character</span><button class="popup" onclick="togglePopup('usagePopup47')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup47">Usage of <span class="code-font"><span class="function-syntax">Str::includes_character</span></span>:<br/>Web Notations - <a href="8-wn.html#SP22_1_3">&#167;22.1.3</a><br/>HTML Formats - <a href="10-hf.html#SP6">&#167;6</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> </span><span class="identifier-syntax">c</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">, </span><span class="identifier-syntax">S</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">) == </span><span class="identifier-syntax">c</span><span class="plain-syntax">)</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes_wide_string_at</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">prefix</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (*</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">]; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">j</span><span class="plain-syntax">) != </span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">])</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes_wide_string_at_insensitive</span><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">prefix</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) || (*</span><span class="identifier-syntax">prefix</span><span class="plain-syntax"> == </span><span class="constant-syntax">0</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">S</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax"> = </span><span class="constant-syntax">0</span><span class="plain-syntax">; </span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">]; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP1" class="function-link"><span class="function-syntax">Characters::tolower</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">j</span><span class="plain-syntax">)) != </span><a href="4-chr.html#SP1" class="function-link"><span class="function-syntax">Characters::tolower</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">prefix</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">]))</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes</span><button class="popup" onclick="togglePopup('usagePopup48')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup48">Usage of <span class="code-font"><span class="function-syntax">Str::includes</span></span>:<br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_2_2">&#167;25.3.3.2.2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">T</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">LS</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">LT</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">T</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;=</span><span class="identifier-syntax">LS</span><span class="plain-syntax">-</span><span class="identifier-syntax">LT</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">failed</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">j</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">LT</span><span class="plain-syntax">; </span><span class="identifier-syntax">j</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">j</span><span class="plain-syntax">) != </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">T</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">failed</span><span class="plain-syntax"> = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">break</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">failed</span><span class="plain-syntax"> == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes_insensitive</span><button class="popup" onclick="togglePopup('usagePopup49')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup49">Usage of <span class="code-font"><span class="function-syntax">Str::includes_insensitive</span></span>:<br/>Markdown Phase I - <a href="5-mpi.html#SP25_3_3_2_2">&#167;25.3.3.2.2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">T</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">LS</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">LT</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">T</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;=</span><span class="identifier-syntax">LS</span><span class="plain-syntax">-</span><span class="identifier-syntax">LT</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">failed</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">j</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">j</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">LT</span><span class="plain-syntax">; </span><span class="identifier-syntax">j</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-chr.html#SP1" class="function-link"><span class="function-syntax">Characters::tolower</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">S</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">+</span><span class="identifier-syntax">j</span><span class="plain-syntax">)) !=</span>
<span class="plain-syntax">                </span><a href="4-chr.html#SP1" class="function-link"><span class="function-syntax">Characters::tolower</span></a><span class="plain-syntax">(</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">T</span><span class="plain-syntax">, </span><span class="identifier-syntax">j</span><span class="plain-syntax">))) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">failed</span><span class="plain-syntax"> = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">break</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">failed</span><span class="plain-syntax"> == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">Str::includes_at</span><button class="popup" onclick="togglePopup('usagePopup50')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup50">Usage of <span class="code-font"><span class="function-syntax">Str::includes_at</span></span>:<br/>JSON - <a href="4-jsn.html#SP12">&#167;12</a>, <a href="4-jsn.html#SP34">&#167;34</a><br/>Literate Source - <a href="8-ls.html#SP25">&#167;25</a><br/>Web Notations - <a href="8-wn.html#SP20">&#167;20</a>, <a href="8-wn.html#SP22_1_1">&#167;22.1.1</a>, <a href="8-wn.html#SP22_1_2">&#167;22.1.2</a>, <a href="8-wn.html#SP22_1_4">&#167;22.1.4</a><br/>The Painter - <a href="9-tp.html#SP2_1">&#167;2.1</a>, <a href="9-tp.html#SP2_2">&#167;2.2</a>, <a href="9-tp.html#SP4">&#167;4</a>, <a href="9-tp.html#SP6">&#167;6</a>, <a href="9-tp.html#SP9_1">&#167;9.1</a>, <a href="9-tp.html#SP9_3_1">&#167;9.3.1</a><br/>Patterns - <a href="10-pt.html#SP8">&#167;8</a><br/>Assets, Plugins and Colour Schemes - <a href="10-apacs.html#SP12_1">&#167;12.1</a>, <a href="10-apacs.html#SP12_5">&#167;12.5</a><br/>The Weaver of Text - <a href="10-twot.html#SP1_1">&#167;1.1</a>, <a href="10-twot.html#SP1_2">&#167;1.2</a>, <a href="10-twot.html#SP1_3">&#167;1.3</a>, <a href="10-twot.html#SP1_5">&#167;1.5</a>, <a href="10-twot.html#SP4_1">&#167;4.1</a>, <a href="10-twot.html#SP4_2">&#167;4.2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">line</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">pattern</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">pattern</span><span class="plain-syntax">) == </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax"> &lt; </span><span class="constant-syntax">0</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">i</span><span class="plain-syntax"> + </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">pattern</span><span class="plain-syntax">) &gt; </span><a href="4-sm.html#SP8" class="function-link"><span class="function-syntax">Str::len</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">line</span><span class="plain-syntax">)) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_THROUGH_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">, </span><span class="identifier-syntax">pattern</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">pos</span><span class="plain-syntax">) != </span><a href="4-sm.html#SP13" class="function-link"><span class="function-syntax">Str::get_at</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">line</span><span class="plain-syntax">, </span><span class="identifier-syntax">i</span><span class="plain-syntax">++))</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP27" class="paragraph-anchor"></a><b>&#167;27. Shim for literal storage.</b>This is where all of those I-literals created in tangling are stored at run-time.
Note that every instance of, say, <span class="extract"><span class="extract-syntax">I"fish"</span></span> would return the same string,
that is, the same <span class="extract"><span class="extract-syntax">text_stream *</span></span> value. To prevent nasty accidents, this
is marked so that the stream value, "fish", cannot be modified at run-time.
</p>

<p class="commentary">The dictionary look-up here would not be thread-safe, so it's protected by
a mutex. There's no real performance concern because the following routine
is run just once per I-literal in the source code, when the program starts up.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">Str::literal</span><button class="popup" onclick="togglePopup('usagePopup51')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup51">Usage of <span class="code-font"><span class="function-syntax">Str::literal</span></span>:<br/>InC Support - <a href="9-is.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="identifier-syntax">inchar32_t</span><span class="plain-syntax"> *</span><span class="identifier-syntax">wide_C_string</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">answer</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">CREATE_MUTEX</span><span class="plain-syntax">(</span><span class="identifier-syntax">mutex</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOCK_MUTEX</span><span class="plain-syntax">(</span><span class="identifier-syntax">mutex</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="named-paragraph-container code-font"><a href="4-sm.html#SP27_1" class="named-paragraph-link"><span class="named-paragraph">Look in dictionary of string literals</span><span class="named-paragraph-number">27.1</span></a></span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">UNLOCK_MUTEX</span><span class="plain-syntax">(</span><span class="identifier-syntax">mutex</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">answer</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP27_1" class="paragraph-anchor"></a><b>&#167;27.1. </b><span class="named-paragraph-container code-font"><span class="named-paragraph-defn">Look in dictionary of string literals</span><span class="named-paragraph-number">27.1</span></span><span class="comment-syntax"> =</span>
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax"> = </span><a href="2-dct.html#SP2" class="function-link"><span class="function-syntax">Dictionaries::new</span></a><span class="plain-syntax">(100, </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">answer</span><span class="plain-syntax"> = </span><a href="2-dct.html#SP10" class="function-link"><span class="function-syntax">Dictionaries::get_text_literal</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax">, </span><span class="identifier-syntax">wide_C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">answer</span><span class="plain-syntax"> == </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><a href="2-dct.html#SP6" class="function-link"><span class="function-syntax">Dictionaries::create_literal</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax">, </span><span class="identifier-syntax">wide_C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">answer</span><span class="plain-syntax"> = </span><a href="2-dct.html#SP10" class="function-link"><span class="function-syntax">Dictionaries::get_text_literal</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">string_literals_dictionary</span><span class="plain-syntax">, </span><span class="identifier-syntax">wide_C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">answer</span><span class="plain-syntax">, </span><span class="string-syntax">"%w"</span><span class="plain-syntax">, </span><span class="identifier-syntax">wide_C_string</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><a href="2-str.html#SP20" class="function-link"><span class="function-syntax">Streams::mark_as_read_only</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">answer</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    }</span>
</pre>
<ul class="endnotetexts"><li>This code is used in <a href="4-sm.html#SP27">&#167;27</a>.</li></ul>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="4-ws.html">&#10094;</a></li><li class="progresschapter"><a href="P-abgtf.html">P</a></li><li class="progresschapter"><a href="1-fm.html">1</a></li><li class="progresschapter"><a href="2-dl.html">2</a></li><li class="progresschapter"><a href="3-em.html">3</a></li><li class="progresscurrentchapter">4</li><li class="progresssection"><a href="4-chr.html">chr</a></li><li class="progresssection"><a href="4-cst.html">cst</a></li><li class="progresssection"><a href="4-ws.html">ws</a></li><li class="progresscurrent">sm</li><li class="progresssection"><a href="4-ts.html">ts</a></li><li class="progresssection"><a href="4-tt.html">tt</a></li><li class="progresssection"><a href="4-tf.html">tf</a></li><li class="progresssection"><a href="4-prp.html">prp</a></li><li class="progresssection"><a href="4-taa.html">taa</a></li><li class="progresssection"><a href="4-fsm.html">fsm</a></li><li class="progresssection"><a href="4-pm.html">pm</a></li><li class="progresssection"><a href="4-jsn.html">jsn</a></li><li class="progresschapter"><a href="5-htm.html">5</a></li><li class="progresschapter"><a href="6-bf.html">6</a></li><li class="progresschapter"><a href="7-vn.html">7</a></li><li class="progresschapter"><a href="8-wcl.html">8</a></li><li class="progresschapter"><a href="9-pl.html">9</a></li><li class="progresschapter"><a href="10-wd.html">10</a></li><li class="progresschapter"><a href="11-mk.html">11</a></li><li class="progressnext"><a href="4-ts.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

