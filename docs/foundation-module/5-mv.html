<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Markdown Variations</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
function togglePopup(material_id) {
  var popup = document.getElementById(material_id);
  popup.classList.toggle("show");
}
</script>

<link href="../docs-assets/Popups.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html">
<img src="../docs-assets/Octagram.png" width=72 height=72">
</a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Module</h2><ul>
<li><a href="index.html"><span class="selectedlink">foundation</span></a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=18> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="../../../inform/docs/index.html">inform</a></li>
<li><a href="../../../intest/docs/index.html">intest</a></li>

</ul>
		</nav>
		<main role="main">
		<!--Weave of 'Markdown Variations' generated by Inweb-->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">foundation</a></li><li><a href="index.html#5">Chapter 5: Generating Websites</a></li><li><b>Markdown Variations</b></li></ul></div>
<p class="purpose">To specify modified versions of the Markdown markup syntax.</p>

<ul class="toc"><li><a href="5-mv.html#SP5">&#167;5. The CommonMark variation</a></li><li><a href="5-mv.html#SP6">&#167;6. Github extensions to CommonMark</a></li><li><a href="5-mv.html#SP7">&#167;7. Methods for features</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1.  </b>In practice, nobody quite uses pure Markdown, because there are always
minor additions or removals people want to make in particular use cases.
We'll call modified versions of the Markdown syntax "variations", but
will provide only one of these here: the baseline of CommonMark.
</p>

<pre class="definitions code-font"><span class="definition-keyword">define</span> <span class="constant-syntax">MAX_MARKDOWNFEATURES</span><span class="plain-syntax"> </span><span class="constant-syntax">256</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">markdown_feature_registry</span><span class="plain-syntax">[</span><span class="constant-syntax">MAX_MARKDOWNFEATURES</span><span class="plain-syntax">];</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::start</span><button class="popup" onclick="togglePopup('usagePopup1')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup1">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::start</span></span>:<br/>Foundation Module - <a href="1-fm.html#SP8">&#167;8</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="5-mrk.html#SP14" class="function-link"><span class="function-syntax">Markdown::create_item_types</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="constant-syntax">MAX_MARKDOWNFEATURES</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) </span><span class="identifier-syntax">markdown_feature_registry</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">] = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP5" class="function-link"><span class="function-syntax">MarkdownVariations::define_CommonMark</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP6" class="function-link"><span class="function-syntax">MarkdownVariations::define_GFM</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">CommonMark_variation</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, *</span><span class="identifier-syntax">GitHub_flavored_Markdown_variation</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="function-syntax">MarkdownVariations::CommonMark</span><button class="popup" onclick="togglePopup('usagePopup2')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup2">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::CommonMark</span></span>:<br/>Markdown - <a href="5-mrk.html#SP5">&#167;5</a>, <a href="5-mrk.html#SP6">&#167;6</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">CommonMark_variation</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="function-syntax">MarkdownVariations::GitHub_flavored_Markdown</span><button class="popup" onclick="togglePopup('usagePopup3')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup3">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::GitHub_flavored_Markdown</span></span>:<br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">GitHub_flavored_Markdown_variation</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2.  </b>A variation is essentially a named collection of features, which may affect
parsing, or rendering, or both.
</p>

<p class="commentary">All newly-created variations begin with the CommonMark baseline set of features
active, and no others. The caller should use <span class="extract"><span class="extract-syntax">MarkdownVariations::add_feature</span></span> to
add a home-brew feature, or <span class="extract"><span class="extract-syntax">MarkdownVariations::remove_feature</span></span> to take away
one of the CommonMark ones.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">typedef</span><span class="plain-syntax"> </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">name</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">NO_DEFINED_MARKDOWNFEATURE_VALUES</span><span class="plain-syntax">];</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">method_set</span><span class="plain-syntax"> *</span><span class="identifier-syntax">methods</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="constant-syntax">CLASS_DEFINITION</span>
<span class="plain-syntax">} </span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="function-syntax">MarkdownVariations::new</span><button class="popup" onclick="togglePopup('usagePopup4')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup4">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::new</span></span>:<br/><a href="5-mv.html#SP5">&#167;5</a>, <a href="5-mv.html#SP6">&#167;6</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">name</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">name</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP3" class="function-link"><span class="function-syntax">Str::duplicate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">name</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">methods</span><span class="plain-syntax"> = </span><a href="2-mth.html#SP2" class="function-link"><span class="function-syntax">Methods::new_set</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">NO_DEFINED_MARKDOWNFEATURE_VALUES</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">] = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP5" class="function-link"><span class="function-syntax">MarkdownVariations::make_baseline_features_active</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">variation</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::add_feature</span><button class="popup" onclick="togglePopup('usagePopup5')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup5">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::add_feature</span></span>:<br/><a href="5-mv.html#SP5">&#167;5</a>, <a href="5-mv.html#SP6">&#167;6</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1_2">&#167;1.2</a>, <a href="5-im.html#SP1_4">&#167;1.4</a>, <a href="5-im.html#SP1_6">&#167;1.6</a>, <a href="5-im.html#SP1_12">&#167;1.12</a>, <a href="5-im.html#SP1_19">&#167;1.19</a>, <a href="5-im.html#SP1_22">&#167;1.22</a>, <a href="5-im.html#SP1_25">&#167;1.25</a>, <a href="5-im.html#SP1_27">&#167;1.27</a>, <a href="5-im.html#SP1_30">&#167;1.30</a>, <a href="5-im.html#SP1_33">&#167;1.33</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">] = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::remove_feature</span><button class="popup" onclick="togglePopup('usagePopup6')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup6">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::remove_feature</span></span>:<br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">] = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::copy_features_of</span><button class="popup" onclick="togglePopup('usagePopup7')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup7">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::copy_features_of</span></span>:<br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">to</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">from</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=0; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;</span><span class="identifier-syntax">NO_DEFINED_MARKDOWNFEATURE_VALUES</span><span class="plain-syntax">; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++)</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">to</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">] = </span><span class="identifier-syntax">from</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">];</span>
<span class="plain-syntax">}</span>
</pre>
<ul class="endnotetexts"><li>The structure markdown_variation is accessed in 2/mth, 2/trs, 4/prp, 4/jsn, 5/mrk, 5/im, 7/ld, 9/pl and here.</li></ul>
<p class="commentary firstcommentary"><a id="SP3" class="paragraph-anchor"></a><b>&#167;3.  </b>A "feature" is an aspect of Markdown syntax or behaviour; any given variation
can either support it or not.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">typedef</span><span class="plain-syntax"> </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">name</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">feature_ID</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">struct</span><span class="plain-syntax"> </span><span class="reserved-syntax">method_set</span><span class="plain-syntax"> *</span><span class="identifier-syntax">methods</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="constant-syntax">CLASS_DEFINITION</span>
<span class="plain-syntax">} </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">;</span>


<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="function-syntax">MarkdownVariations::new_feature</span><button class="popup" onclick="togglePopup('usagePopup8')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup8">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::new_feature</span></span>:<br/><a href="5-mv.html#SP5">&#167;5</a>, <a href="5-mv.html#SP6">&#167;6</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1_2">&#167;1.2</a>, <a href="5-im.html#SP1_4">&#167;1.4</a>, <a href="5-im.html#SP1_6">&#167;1.6</a>, <a href="5-im.html#SP1_12">&#167;1.12</a>, <a href="5-im.html#SP1_19">&#167;1.19</a>, <a href="5-im.html#SP1_22">&#167;1.22</a>, <a href="5-im.html#SP1_25">&#167;1.25</a>, <a href="5-im.html#SP1_27">&#167;1.27</a>, <a href="5-im.html#SP1_30">&#167;1.30</a>, <a href="5-im.html#SP1_33">&#167;1.33</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">name</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">id</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">CREATE</span><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">id</span><span class="plain-syntax"> &gt;= </span><span class="constant-syntax">MAX_MARKDOWNFEATURES</span><span class="plain-syntax">) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"too many Markdown features"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">name</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP3" class="function-link"><span class="function-syntax">Str::duplicate</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">name</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">feature_ID</span><span class="plain-syntax"> = </span><span class="identifier-syntax">id</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">methods</span><span class="plain-syntax"> = </span><a href="2-mth.html#SP2" class="function-link"><span class="function-syntax">Methods::new_set</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">markdown_feature_registry</span><span class="plain-syntax">[</span><span class="identifier-syntax">id</span><span class="plain-syntax">]) </span><span class="identifier-syntax">internal_error</span><span class="plain-syntax">(</span><span class="string-syntax">"Markdown feature ID clash"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">markdown_feature_registry</span><span class="plain-syntax">[</span><span class="identifier-syntax">id</span><span class="plain-syntax">] = </span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<ul class="endnotetexts"><li>The structure markdown_feature is accessed in 2/mth, 2/trs, 4/prp, 4/jsn, 5/mrk, 5/im, 7/ld, 9/pl and here.</li></ul>
<p class="commentary firstcommentary"><a id="SP4" class="paragraph-anchor"></a><b>&#167;4.  </b>The point of the cumbersome business of both defining an ID and creating
an object to represent the same feature was to make this function quick.
</p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::supports</span><button class="popup" onclick="togglePopup('usagePopup9')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup9">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::supports</span></span>:<br/><a href="5-mv.html#SP7">&#167;7</a>, <a href="5-mv.html#SP8">&#167;8</a>, <a href="5-mv.html#SP9">&#167;9</a><br/>Markdown - <a href="5-mrk.html#SP5_1">&#167;5.1</a><br/>Markdown Phase I - <a href="5-mpi.html#SP17_2_1">&#167;17.2.1</a>, <a href="5-mpi.html#SP17_2_2">&#167;17.2.2</a>, <a href="5-mpi.html#SP17_2_3">&#167;17.2.3</a>, <a href="5-mpi.html#SP24_2">&#167;24.2</a>, <a href="5-mpi.html#SP25_2">&#167;25.2</a>, <a href="5-mpi.html#SP25_3">&#167;25.3</a>, <a href="5-mpi.html#SP25_4">&#167;25.4</a>, <a href="5-mpi.html#SP25_5">&#167;25.5</a>, <a href="5-mpi.html#SP25_7">&#167;25.7</a>, <a href="5-mpi.html#SP27">&#167;27</a><br/>Markdown Phase II - <a href="5-mpi2.html#SP3">&#167;3</a>, <a href="5-mpi2.html#SP3_2">&#167;3.2</a>, <a href="5-mpi2.html#SP3_3">&#167;3.3</a>, <a href="5-mpi2.html#SP3_4">&#167;3.4</a>, <a href="5-mpi2.html#SP3_9">&#167;3.9</a>, <a href="5-mpi2.html#SP3_9_5_1">&#167;3.9.5.1</a>, <a href="5-mpi2.html#SP4">&#167;4</a>, <a href="5-mpi2.html#SP5_2">&#167;5.2</a><br/>Markdown Rendering - <a href="5-mr.html#SP2">&#167;2</a>, <a href="5-mr.html#SP2_6">&#167;2.6</a>, <a href="5-mr.html#SP2_7">&#167;2.7</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">variation</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">active_built_in_features</span><span class="plain-syntax">[</span><span class="identifier-syntax">feature_id</span><span class="plain-syntax">];</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP5" class="paragraph-anchor"></a><b>&#167;5. The CommonMark variation. </b>Vanilla ice cream is under-rated:
</p>

<pre class="definitions code-font"><span class="definition-keyword">enum</span> <span class="constant-syntax">BLOCK_QUOTES_MARKDOWNFEATURE</span><span class="plain-syntax"> </span><span class="identifier-syntax">from</span><span class="plain-syntax"> </span><span class="constant-syntax">0</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">ORDERED_LISTS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">UNORDERED_LISTS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">INDENTED_CODE_BLOCKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">FENCED_CODE_BLOCKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">HTML_BLOCKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">THEMATIC_MARKERS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">ATX_HEADINGS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">SETEXT_HEADINGS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">WEB_AUTOLINKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">EMAIL_AUTOLINKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">INLINE_HTML_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">BACKTICKED_CODE_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">LINKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">IMAGES_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">ASTERISK_EMPHASIS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">UNDERSCORE_EMPHASIS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">ENTITIES_MARKDOWNFEATURE</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">block_quotes_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">ordered_lists_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">unordered_lists_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">indented_code_blocks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">fenced_code_blocks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">HTML_blocks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">thematic_markers_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">ATX_headings_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">setext_headings_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">web_autolinks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">email_autolinks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">inline_HTML_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">backticked_code_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">links_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">images_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">asterisk_emphasis_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">underscore_emphasis_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">entities_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::define_CommonMark</span><button class="popup" onclick="togglePopup('usagePopup10')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup10">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::define_CommonMark</span></span>:<br/><a href="5-mv.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">block_quotes_Markdown_feature</span><span class="plain-syntax"> =         </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"block quotes"</span><span class="plain-syntax">,         </span><span class="constant-syntax">BLOCK_QUOTES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">ordered_lists_Markdown_feature</span><span class="plain-syntax"> =        </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"ordered lists"</span><span class="plain-syntax">,        </span><span class="constant-syntax">ORDERED_LISTS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">unordered_lists_Markdown_feature</span><span class="plain-syntax"> =      </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"unordered lists"</span><span class="plain-syntax">,      </span><span class="constant-syntax">UNORDERED_LISTS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">indented_code_blocks_Markdown_feature</span><span class="plain-syntax"> = </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"indented code blocks"</span><span class="plain-syntax">, </span><span class="constant-syntax">INDENTED_CODE_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">fenced_code_blocks_Markdown_feature</span><span class="plain-syntax"> =   </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"fenced code blocks"</span><span class="plain-syntax">,   </span><span class="constant-syntax">FENCED_CODE_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">HTML_blocks_Markdown_feature</span><span class="plain-syntax"> =          </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"HTML blocks"</span><span class="plain-syntax">,          </span><span class="constant-syntax">HTML_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">thematic_markers_Markdown_feature</span><span class="plain-syntax"> =     </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"thematic markers"</span><span class="plain-syntax">,     </span><span class="constant-syntax">THEMATIC_MARKERS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">ATX_headings_Markdown_feature</span><span class="plain-syntax"> =         </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"ATX headings"</span><span class="plain-syntax">,         </span><span class="constant-syntax">ATX_HEADINGS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">setext_headings_Markdown_feature</span><span class="plain-syntax"> =      </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"setext headings"</span><span class="plain-syntax">,      </span><span class="constant-syntax">SETEXT_HEADINGS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><span class="identifier-syntax">web_autolinks_Markdown_feature</span><span class="plain-syntax"> =        </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"web autolinks"</span><span class="plain-syntax">,        </span><span class="constant-syntax">WEB_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">email_autolinks_Markdown_feature</span><span class="plain-syntax"> =      </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"email autolinks"</span><span class="plain-syntax">,      </span><span class="constant-syntax">EMAIL_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">inline_HTML_Markdown_feature</span><span class="plain-syntax"> =          </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"inline HTML"</span><span class="plain-syntax">,          </span><span class="constant-syntax">INLINE_HTML_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">backticked_code_Markdown_feature</span><span class="plain-syntax"> =      </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"backticked code"</span><span class="plain-syntax">,      </span><span class="constant-syntax">BACKTICKED_CODE_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">links_Markdown_feature</span><span class="plain-syntax"> =                </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"links"</span><span class="plain-syntax">,                </span><span class="constant-syntax">LINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">images_Markdown_feature</span><span class="plain-syntax"> =               </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"images"</span><span class="plain-syntax">,               </span><span class="constant-syntax">IMAGES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">asterisk_emphasis_Markdown_feature</span><span class="plain-syntax"> =    </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"emphasis"</span><span class="plain-syntax">,             </span><span class="constant-syntax">ASTERISK_EMPHASIS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">underscore_emphasis_Markdown_feature</span><span class="plain-syntax"> =  </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"emphasis"</span><span class="plain-syntax">,             </span><span class="constant-syntax">UNDERSCORE_EMPHASIS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><span class="identifier-syntax">entities_Markdown_feature</span><span class="plain-syntax"> =             </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"entities"</span><span class="plain-syntax">,             </span><span class="constant-syntax">ENTITIES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><span class="identifier-syntax">CommonMark_variation</span><span class="plain-syntax"> = </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::new</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"CommonMark 0.30"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::make_baseline_features_active</span><button class="popup" onclick="togglePopup('usagePopup11')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup11">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::make_baseline_features_active</span></span>:<br/><a href="5-mv.html#SP2">&#167;2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">BLOCK_QUOTES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">ORDERED_LISTS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">UNORDERED_LISTS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">INDENTED_CODE_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">FENCED_CODE_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">HTML_BLOCKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">THEMATIC_MARKERS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">ATX_HEADINGS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">SETEXT_HEADINGS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">WEB_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">EMAIL_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">INLINE_HTML_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">BACKTICKED_CODE_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">LINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">IMAGES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">ASTERISK_EMPHASIS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">UNDERSCORE_EMPHASIS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">ENTITIES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP6" class="paragraph-anchor"></a><b>&#167;6. Github extensions to CommonMark. </b>See <a href="https://github.github.com/gfm" class="external">GitHub's specification</a>, which is based
on CommonMark, though its description of new features is a little more concise,
since these have been added with more prudent syntax.
</p>

<pre class="definitions code-font"><span class="definition-keyword">enum</span> <span class="constant-syntax">STRIKETHROUGH_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">TABLES_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">TASK_LIST_ITEMS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">EXTENDED_AUTOLINKS_MARKDOWNFEATURE</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">DISALLOWED_RAW_HTML_MARKDOWNFEATURE</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">strikethrough_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tables_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">task_list_items_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">extended_autolinks_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">disallowed_raw_HTML_Markdown_feature</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::define_GFM</span><button class="popup" onclick="togglePopup('usagePopup12')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup12">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::define_GFM</span></span>:<br/><a href="5-mv.html#SP1">&#167;1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">void</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">strikethrough_Markdown_feature</span><span class="plain-syntax"> =       </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"strikethrough"</span><span class="plain-syntax">,       </span><span class="constant-syntax">STRIKETHROUGH_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">tables_Markdown_feature</span><span class="plain-syntax"> =              </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"tables"</span><span class="plain-syntax">,              </span><span class="constant-syntax">TABLES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">task_list_items_Markdown_feature</span><span class="plain-syntax"> =     </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"task list items"</span><span class="plain-syntax">,     </span><span class="constant-syntax">TASK_LIST_ITEMS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">extended_autolinks_Markdown_feature</span><span class="plain-syntax"> =  </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"extended autolinks"</span><span class="plain-syntax">,  </span><span class="constant-syntax">EXTENDED_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">disallowed_raw_HTML_Markdown_feature</span><span class="plain-syntax"> = </span><a href="5-mv.html#SP3" class="function-link"><span class="function-syntax">MarkdownVariations::new_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"disallowed raw HTML"</span><span class="plain-syntax">, </span><span class="constant-syntax">DISALLOWED_RAW_HTML_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>

<span class="plain-syntax">    </span><span class="identifier-syntax">GitHub_flavored_Markdown_variation</span><span class="plain-syntax"> = </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::new</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"GitHub-flavored Markdown 0.29"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP6" class="function-link"><span class="function-syntax">MarkdownVariations::make_GitHub_features_active</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">GitHub_flavored_Markdown_variation</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::make_GitHub_features_active</span><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">STRIKETHROUGH_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">TABLES_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">TASK_LIST_ITEMS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">EXTENDED_AUTOLINKS_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP2" class="function-link"><span class="function-syntax">MarkdownVariations::add_feature</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="constant-syntax">DISALLOWED_RAW_HTML_MARKDOWNFEATURE</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP7" class="paragraph-anchor"></a><b>&#167;7. Methods for features. </b>New features need to be able to intervene in the parsing or rendering algorithms,
so for that we provide methods.
</p>

<p class="commentary"><span class="extract"><span class="extract-syntax">RENDER_MARKDOWN_MTID</span></span> allows a feature to meddle in how a node is rendered.
</p>

<pre class="definitions code-font"><span class="definition-keyword">enum</span> <span class="constant-syntax">RENDER_MARKDOWN_MTID</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="identifier-syntax">INT_METHOD_TYPE</span><span class="plain-syntax">(</span><span class="constant-syntax">RENDER_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">OUT</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">mode</span><span class="plain-syntax">)</span>
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::intervene_in_rendering</span><button class="popup" onclick="togglePopup('usagePopup13')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup13">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::intervene_in_rendering</span></span>:<br/>Markdown Rendering - <a href="5-mr.html#SP2">&#167;2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">OUT</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax">, </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">mode</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_OVER</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="5-mv.html#SP4" class="function-link"><span class="function-syntax">MarkdownVariations::supports</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">feature_ID</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">rv</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">INT_METHOD_CALL</span><span class="plain-syntax">(</span><span class="identifier-syntax">rv</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="constant-syntax">RENDER_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="identifier-syntax">OUT</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">, </span><span class="identifier-syntax">mode</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">rv</span><span class="plain-syntax">) </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP8" class="paragraph-anchor"></a><b>&#167;8.  </b><span class="extract"><span class="extract-syntax">POST_PHASE_I_MARKDOWN_MTID</span></span> allows a feature to restructure or annotate the
block tree produced by Phase I parsing; similarly <span class="extract"><span class="extract-syntax">POST_PHASE_II_MARKDOWN_MTID</span></span>.
</p>

<pre class="definitions code-font"><span class="definition-keyword">enum</span> <span class="constant-syntax">POST_PHASE_I_MARKDOWN_MTID</span>
<span class="definition-keyword">enum</span> <span class="constant-syntax">POST_PHASE_II_MARKDOWN_MTID</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="identifier-syntax">VOID_METHOD_TYPE</span><span class="plain-syntax">(</span><span class="constant-syntax">POST_PHASE_I_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">)</span>
<span class="identifier-syntax">VOID_METHOD_TYPE</span><span class="plain-syntax">(</span><span class="constant-syntax">POST_PHASE_II_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">)</span>
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::intervene_after_Phase_I</span><button class="popup" onclick="togglePopup('usagePopup14')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup14">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::intervene_after_Phase_I</span></span>:<br/>Markdown - <a href="5-mrk.html#SP5_1">&#167;5.1</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_OVER</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="5-mv.html#SP4" class="function-link"><span class="function-syntax">MarkdownVariations::supports</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">feature_ID</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">VOID_METHOD_CALL</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="constant-syntax">POST_PHASE_I_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">}</span>
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::intervene_after_Phase_II</span><button class="popup" onclick="togglePopup('usagePopup15')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup15">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::intervene_after_Phase_II</span></span>:<br/>Markdown - <a href="5-mrk.html#SP5_2">&#167;5.2</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="identifier-syntax">LOOP_OVER</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="5-mv.html#SP4" class="function-link"><span class="function-syntax">MarkdownVariations::supports</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">feature_ID</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">VOID_METHOD_CALL</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="constant-syntax">POST_PHASE_II_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP9" class="paragraph-anchor"></a><b>&#167;9.  </b><span class="extract"><span class="extract-syntax">MULTIFILE_MARKDOWN_MTID</span></span> allows a feature to tell the parser that the content
will end up being split across multiple HTML files. If a feature wants to do
this, it should then set a "file point" at any top-level positions of its
choice, and return <span class="extract"><span class="extract-syntax">TRUE</span></span>.
</p>

<pre class="definitions code-font"><span class="definition-keyword">enum</span> <span class="constant-syntax">MULTIFILE_MARKDOWN_MTID</span>
</pre>
<pre class="displayed-code all-displayed-code code-font">
<span class="identifier-syntax">INT_METHOD_TYPE</span><span class="plain-syntax">(</span><span class="constant-syntax">MULTIFILE_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">)</span>
<span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::multifile_mode</span><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_variation</span><span class="plain-syntax"> *</span><span class="identifier-syntax">variation</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax"> *</span><span class="identifier-syntax">feature</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">LOOP_OVER</span><span class="plain-syntax">(</span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="reserved-syntax">markdown_feature</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="5-mv.html#SP4" class="function-link"><span class="function-syntax">MarkdownVariations::supports</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">variation</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">feature_ID</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">rv</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">INT_METHOD_CALL</span><span class="plain-syntax">(</span><span class="identifier-syntax">rv</span><span class="plain-syntax">, </span><span class="identifier-syntax">feature</span><span class="plain-syntax">, </span><span class="constant-syntax">MULTIFILE_MARKDOWN_MTID</span><span class="plain-syntax">, </span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">rv</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                    </span><a href="5-mv.html#SP9" class="function-link"><span class="function-syntax">MarkdownVariations::assign_URLs_to_headings</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">tree</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                }</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::assign_URLs_to_headings</span><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">tree</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> != </span><span class="constant-syntax">VOLUME_MIT</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">index</span><span class="plain-syntax"> = </span><a href="5-mrk.html#SP31" class="function-link"><span class="function-syntax">Markdown::new_volume_marker</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">I</span><span class="string-syntax">"all in one"</span><span class="plain-syntax">);</span>
<span class="plain-syntax">        </span><span class="identifier-syntax">index</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">; </span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax"> = </span><span class="identifier-syntax">index</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax"> = </span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">VOLUME_MIT</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">, *</span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">while</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">ch</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> != </span><span class="constant-syntax">VOLUME_MIT</span><span class="plain-syntax">)) { </span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">, </span><span class="identifier-syntax">ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">; }</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">ch</span><span class="plain-syntax">) { </span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">; }</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">vol</span><span class="plain-syntax"> = </span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">; </span><span class="identifier-syntax">vol</span><span class="plain-syntax">; </span><span class="identifier-syntax">vol</span><span class="plain-syntax"> = </span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">VOLUME_MIT</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> != </span><span class="constant-syntax">FILE_MIT</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                #</span><span class="identifier-syntax">ifdef</span><span class="plain-syntax"> </span><span class="identifier-syntax">SUPERVISOR_MODULE</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">home_URL</span><span class="plain-syntax"> = </span><span class="identifier-syntax">DocumentationCompiler::home_URL_at_volume_item</span><span class="plain-syntax">(</span><span class="identifier-syntax">vol</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                #</span><span class="identifier-syntax">endif</span>
<span class="plain-syntax">                #</span><span class="identifier-syntax">ifndef</span><span class="plain-syntax"> </span><span class="identifier-syntax">SUPERVISOR_MODULE</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">home_URL</span><span class="plain-syntax"> = </span><span class="identifier-syntax">I</span><span class="string-syntax">"index.html"</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                #</span><span class="identifier-syntax">endif</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">index</span><span class="plain-syntax"> = </span><a href="5-mrk.html#SP31" class="function-link"><span class="function-syntax">Markdown::new_file_marker</span></a><span class="plain-syntax">(</span><a href="3-fln.html#SP3" class="function-link"><span class="function-syntax">Filenames::from_text</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">home_URL</span><span class="plain-syntax">));</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">index</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">; </span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax"> = </span><span class="identifier-syntax">index</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax"> = </span><span class="identifier-syntax">vol</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">FILE_MIT</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                    </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">, *</span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">                    </span><span class="reserved-syntax">while</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">ch</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> != </span><span class="constant-syntax">FILE_MIT</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> != </span><span class="constant-syntax">VOLUME_MIT</span><span class="plain-syntax">)) { </span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">, </span><span class="identifier-syntax">ch</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">; }</span>
<span class="plain-syntax">                    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">ch</span><span class="plain-syntax">) { </span><span class="identifier-syntax">prev_ch</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax"> = </span><span class="identifier-syntax">ch</span><span class="plain-syntax">; }</span>
<span class="plain-syntax">                }</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">    }</span>

<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">headings</span><span class="plain-syntax">[7] = { </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax"> };</span>
<span class="plain-syntax">    </span><a href="5-mv.html#SP10" class="function-link"><span class="function-syntax">MarkdownVariations::multifile_r</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">tree</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">, </span><span class="identifier-syntax">headings</span><span class="plain-syntax">, </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">);</span>
<span class="plain-syntax">}</span>
</pre>
<p class="commentary firstcommentary"><a id="SP10" class="paragraph-anchor"></a><b>&#167;10.  </b></p>

<pre class="displayed-code all-displayed-code code-font">
<span class="reserved-syntax">void</span><span class="plain-syntax"> </span><span class="function-syntax">MarkdownVariations::multifile_r</span><button class="popup" onclick="togglePopup('usagePopup16')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup16">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::multifile_r</span></span>:<br/><a href="5-mv.html#SP9">&#167;9</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax">, </span><span class="reserved-syntax">md_links_dictionary</span><span class="plain-syntax"> *</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">,</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">headings</span><span class="plain-syntax">[7], </span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">file_item</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">non_heading_found</span><span class="plain-syntax"> = </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (; </span><span class="identifier-syntax">md</span><span class="plain-syntax">; </span><span class="identifier-syntax">md</span><span class="plain-syntax"> = </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">next</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">HEADING_MIT</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">L</span><span class="plain-syntax"> = </span><a href="5-mrk.html#SP21" class="function-link"><span class="function-syntax">Markdown::get_heading_level</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">md</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">headings</span><span class="plain-syntax">[</span><span class="identifier-syntax">L</span><span class="plain-syntax">] = </span><span class="identifier-syntax">md</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">for</span><span class="plain-syntax"> (</span><span class="reserved-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">i</span><span class="plain-syntax">=</span><span class="identifier-syntax">L</span><span class="plain-syntax">+1; </span><span class="identifier-syntax">i</span><span class="plain-syntax">&lt;=6; </span><span class="identifier-syntax">i</span><span class="plain-syntax">++) </span><span class="identifier-syntax">headings</span><span class="plain-syntax">[</span><span class="identifier-syntax">i</span><span class="plain-syntax">] = </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="identifier-syntax">URL</span><span class="plain-syntax"> = </span><a href="4-sm.html#SP2" class="function-link"><span class="function-syntax">Str::new</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">file_item</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">URL</span><span class="plain-syntax">, </span><span class="string-syntax">"%f"</span><span class="plain-syntax">, </span><a href="5-mrk.html#SP31" class="function-link"><span class="function-syntax">Markdown::get_filename</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">file_item</span><span class="plain-syntax">));</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">TEMPORARY_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">TEMPORARY_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">match_results</span><span class="plain-syntax"> </span><span class="identifier-syntax">mr</span><span class="plain-syntax"> = </span><a href="4-pm.html#SP9" class="function-link"><span class="function-syntax">Regexp::create_mr</span></a><span class="plain-syntax">();</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Chapter (%d+): *(%c*)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[1]);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"chapter%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Chapter (%d+)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"chapter%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Section (%d+).(%d+): *(%c*)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[2]);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"c%Ss%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0], </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[1]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Section (%d+).(%d+)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"c%Ss%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0], </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[1]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Section (%d+): *(%c*)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[1]);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"s%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><a href="4-pm.html#SP10" class="function-link"><span class="function-syntax">Regexp::match</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">, </span><span class="identifier-syntax">U</span><span class="string-syntax">"Section (%d+)"</span><span class="plain-syntax">)) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"s%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">mr</span><span class="plain-syntax">.</span><span class="element-syntax">exp</span><span class="plain-syntax">[0]);</span>
<span class="plain-syntax">            } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="string-syntax">"%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">);</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">, </span><span class="string-syntax">"heading%d"</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">id</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">            </span><a href="4-pm.html#SP9" class="function-link"><span class="function-syntax">Regexp::dispose_of</span></a><span class="plain-syntax">(&amp;</span><span class="identifier-syntax">mr</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">non_heading_found</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">                </span><span class="identifier-syntax">WRITE_TO</span><span class="plain-syntax">(</span><span class="identifier-syntax">URL</span><span class="plain-syntax">, </span><span class="string-syntax">"#%S"</span><span class="plain-syntax">, </span><span class="identifier-syntax">anchor</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            }</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">user_state</span><span class="plain-syntax"> = </span><span class="identifier-syntax">STORE_POINTER_text_stream</span><span class="plain-syntax">(</span><span class="identifier-syntax">URL</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><a href="5-mrk.html#SP49" class="function-link"><span class="function-syntax">Markdown::create</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">link_references</span><span class="plain-syntax">, </span><span class="identifier-syntax">xref</span><span class="plain-syntax">, </span><span class="identifier-syntax">URL</span><span class="plain-syntax">, </span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">stashed</span><span class="plain-syntax">);</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">DISCARD_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">xref</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">DISCARD_TEXT</span><span class="plain-syntax">(</span><span class="identifier-syntax">anchor</span><span class="plain-syntax">)</span>
<span class="plain-syntax">        } </span><span class="reserved-syntax">else</span><span class="plain-syntax"> {</span>
<span class="plain-syntax">            </span><span class="identifier-syntax">non_heading_found</span><span class="plain-syntax"> = </span><span class="constant-syntax">TRUE</span><span class="plain-syntax">;</span>
<span class="plain-syntax">        }</span>
<span class="plain-syntax">        </span><a href="5-mv.html#SP10" class="function-link"><span class="function-syntax">MarkdownVariations::multifile_r</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">down</span><span class="plain-syntax">, </span><span class="identifier-syntax">link_references</span><span class="plain-syntax">, </span><span class="identifier-syntax">headings</span><span class="plain-syntax">, (</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">FILE_MIT</span><span class="plain-syntax">)?</span><span class="identifier-syntax">md:NULL</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    }</span>
<span class="plain-syntax">}</span>

<span class="reserved-syntax">text_stream</span><span class="plain-syntax"> *</span><span class="function-syntax">MarkdownVariations::URL_for_heading</span><button class="popup" onclick="togglePopup('usagePopup17')"><span class="comment-syntax">?</span><span class="popuptext" id="usagePopup17">Usage of <span class="code-font"><span class="function-syntax">MarkdownVariations::URL_for_heading</span></span>:<br/>Markdown Rendering - <a href="5-mr.html#SP2_5">&#167;2.5</a><br/>Inform-Flavoured Markdown - <a href="5-im.html#SP1_10">&#167;1.10</a>, <a href="5-im.html#SP1_17">&#167;1.17</a></span></button><span class="plain-syntax">(</span><span class="reserved-syntax">markdown_item</span><span class="plain-syntax"> *</span><span class="identifier-syntax">md</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">if</span><span class="plain-syntax"> ((</span><span class="identifier-syntax">md</span><span class="plain-syntax">) &amp;&amp; (</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">type</span><span class="plain-syntax"> == </span><span class="constant-syntax">HEADING_MIT</span><span class="plain-syntax">) &amp;&amp; (</span><a href="5-mrk.html#SP21" class="function-link"><span class="function-syntax">Markdown::get_heading_level</span></a><span class="plain-syntax">(</span><span class="identifier-syntax">md</span><span class="plain-syntax">) &lt;= </span><span class="constant-syntax">2</span><span class="plain-syntax">))</span>
<span class="plain-syntax">        </span><span class="reserved-syntax">if</span><span class="plain-syntax"> (</span><span class="identifier-syntax">GENERAL_POINTER_IS_NULL</span><span class="plain-syntax">(</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">user_state</span><span class="plain-syntax">) == </span><span class="constant-syntax">FALSE</span><span class="plain-syntax">)</span>
<span class="plain-syntax">            </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">RETRIEVE_POINTER_text_stream</span><span class="plain-syntax">(</span><span class="identifier-syntax">md</span><span class="plain-syntax">-&gt;</span><span class="element-syntax">user_state</span><span class="plain-syntax">);</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="identifier-syntax">NULL</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="5-mr.html">&#10094;</a></li><li class="progresschapter"><a href="P-abgtf.html">P</a></li><li class="progresschapter"><a href="1-fm.html">1</a></li><li class="progresschapter"><a href="2-dl.html">2</a></li><li class="progresschapter"><a href="3-em.html">3</a></li><li class="progresschapter"><a href="4-chr.html">4</a></li><li class="progresscurrentchapter">5</li><li class="progresssection"><a href="5-htm.html">htm</a></li><li class="progresssection"><a href="5-he.html">he</a></li><li class="progresssection"><a href="5-mrk.html">mrk</a></li><li class="progresssection"><a href="5-mpi.html">mpi</a></li><li class="progresssection"><a href="5-mpi2.html">mpi2</a></li><li class="progresssection"><a href="5-mr.html">mr</a></li><li class="progresscurrent">mv</li><li class="progresssection"><a href="5-im.html">im</a></li><li class="progresssection"><a href="5-ee.html">ee</a></li><li class="progresschapter"><a href="6-bf.html">6</a></li><li class="progresschapter"><a href="7-vn.html">7</a></li><li class="progresschapter"><a href="8-ws.html">8</a></li><li class="progresschapter"><a href="9-pl.html">9</a></li><li class="progressnext"><a href="5-im.html">&#10095;</a></li></ul></div>
</nav><!--End of weave-->

		</main>
	</body>
</html>

