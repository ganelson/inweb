<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Commentary in Markdown</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script>
MathJax = {
    options: {
    	skipHtmlTags: {'[-]': ['pre']},
    	processHtmlClass: 'mathjax_process'
    },
	loader: {load: ['[tex]/texhtml']},
  	tex: {
		inlineMath: [ ['\\INWEBMATH(', '\\INWEBMATH)'] ],
    	packages: {'[+]': ['texhtml']},
    	allowTexHTML: true
	},
	svg: {
		fontCache: 'global'
	}
};
</script>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-svg.js"></script>

<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Modules</h2><ul>
<li><a href="../foundation-module/index.html">foundation</a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
<li><a href="../literate-module/index.html">literate</a></li>
<li><a href="../literate-test/index.html">literate-test</a></li>
</ul><h2>Documentation</h2><ul>
<li><a href="index.html"><span class="selectedlink">guide</span></a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'Commentary in Markdown' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">The Inweb Guide</a></li><li><a href="index.html#1">Chapter 1: Smaller Webs</a></li><li><b>Commentary in Markdown</b></li></ul></div>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a> Commentary can contain anything expressible in Markdown notation. The dialect
of Markdown used by Inweb is Github-flavored Markdown, an extension of
Common Markdown which also supports (for example) tables and to-do lists,
extended further to allow mathematics and footnotes. So it's quite flexible.
There are many online guides to Markdown, but here are the main points:</p>
<p><strong>Headings</strong>. Markdown has six levels of subheading, denoted <code>#</code> to <code>######</code>. The top two
levels are meaningful to Inweb. The highest level, <code>#</code>, should be used only
on the opening line of a file, and to write the title text:</p>
<pre><code># Heapsort by J. W. J. Williams
</code></pre>
<p>After that, the file can contain any number of <code>##</code> subheadings. Inweb uses
these when breaking the material into &quot;paragraphs&quot;, and renders them neatly
when weaving the web. For example, a file of 500 lines might sensibly be
broken up with five or six subheadings like this one:</p>
<pre><code>## Some Initialization
</code></pre>
<p>Lesser subheadings are ignored by Inweb, or rather, are treated as commentary
features like any other: they're probably best not used, but chacun √† son go√ªt.</p>
<p><strong>Character set</strong>. Inweb uses Unicode throughout and expects files to be
encoded as UTF-8. This means that the commentary in a web can freely use
exotica like this:</p>
<pre><code>Chacun √† son go√ªt, as the French say.üá´üá∑
</code></pre>
<p>Older compilers and interpreters may not accept Unicode in their source code,
but the tangled output from a web will only contain what characters we use in
the holons, not the commentary. So this web:</p>
<pre><code>Œ†ŒµœÅœÉ·Ω≥œâŒΩ Œº·Ω≥ŒΩ ŒΩœÖŒΩ Œø·º± Œª·ΩπŒ≥ŒπŒøŒπ Œ¶Œø·Ω∑ŒΩŒπŒ∫Œ±œÇ Œ±·º∞œÑ·Ω∑ŒøœÖœÇ œÜŒ±œÉ·Ω∑ Œ≥ŒµŒΩ·Ω≥œÉŒ∏Œ±Œπ œÑ·øÜœÇ Œ¥ŒπŒ±œÜŒøœÅ·øÜœÇ.

	phoenicians.angry = true;
</code></pre>
<p>tangles to a program containing no Greek characters, since those were only
present in the commentary.</p>
<p><strong>Styling of text</strong>. The following:</p>
<pre><code>* Code can be written in `backticks` like so.

* _Emphasis_ and **strong emphasis** are technically not the same thing as
  italics and boldface, but are often rendered that way.

* ~Strikethrough~ if a word displeases you.
</code></pre>
<p>renders as:</p>
<ul>
<li>
<p>Code can be written in <code>backticks</code> like so.</p>
</li>
<li>
<p><em>Emphasis</em> and <strong>strong emphasis</strong> are technically not the same thing as
italics and boldface, but are often rendered that way.</p>
</li>
<li>
<p><del>Strikethrough</del> if a word displeases you.</p>
</li>
</ul>
<p>The full rules on how to resolve complex interlacings of these notations
are too arcane to give here. Inweb follows Common Markdown precisely, and
passes all of its test cases. A few cases come up often-ish:</p>
<ul>
<li>
<p><code>this_is_not_emphasis</code> does not produce emphasis because the underscore
characters <code>_</code> are not at word boundaries. It produces this_is_not_emphasis.</p>
</li>
<li>
<p><code>_escaped\_underscore_</code> uses a backslash <code>\_</code> to mean &quot;really an <code>_</code>, not
the end of the current emphasis run&quot;. The result is <em>escaped_underscore</em>.</p>
</li>
<li>
<p><code>``insignificant`backtick``</code> uses doubled backtick markers so that
the inner backtick is not treated as the end of the code matter. The result
is <code>insignificant`backtick</code>. If you're curious as to how to get
<code>``insignificant`backtick``</code> to appear, the answer is
<code>``` ``insignificant`backtick`` ```</code>, and this really ought to cure
your curiosity.</p>
</li>
</ul>
<p><strong>Lists</strong>. Lists are indicated with bullets. This:</p>
<pre><code>A tight list has less vertical space between the items. Both sorts can have
nested sub-lists.
* First item.
* Second item.
   * Nested item 1.
   * Nested item 2.
* Third item.
</code></pre>
<p>Comes out as:</p>
<p>A tight list has less vertical space between the items. Both sorts can have
nested sub-lists.</p>
<ul>
<li>First item.</li>
<li>Second item.
<ul>
<li>Nested item 1.</li>
<li>Nested item 2.</li>
</ul>
</li>
<li>Third item.</li>
</ul>
<p>It's also possible to have a numbered list:</p>
<pre><code>1. First item.
2. Second item.
   * Nested item 1.
   * Nested item 2.
3. Third item.
</code></pre>
<p>...though a quaint feature of Markdown is that it ignores the numbers actually
used in the text, and applied its own counting from 1.</p>
<ol>
<li>First item.</li>
<li>Second item.
<ul>
<li>Nested item 1.</li>
<li>Nested item 2.</li>
</ul>
</li>
<li>Third item.</li>
</ol>
<p><strong>Code shown in commentary</strong>. Short code extracts can be <code>backticked</code> (see above).
In most uses of Markdown, longer code extracts would be indented by one tab
stop, but we can't do that here, because if we did then the code would become
part of the program. Instead we use an alternate Markdown notation, &quot;fences&quot;:</p>
<pre><code>```
int strangiato(int villa) {
    return 0;
}
```
</code></pre>
<p>producing:</p>
</div>
<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">int strangiato(int villa) {</span>
<span class="plain-syntax">    return 0;</span>
<span class="plain-syntax">}</span>
</pre>
<div class="lsmarkdown">
<p>As in regular Markdown, a programming language can be specified, telling Inweb
how to syntax-colour the result:</p>
</div>
<pre class="displayed-code all-displayed-code code-font">
<span class="identifier-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">strangiato</span><span class="plain-syntax">(</span><span class="identifier-syntax">int</span><span class="plain-syntax"> </span><span class="identifier-syntax">villa</span><span class="plain-syntax">) {</span>
<span class="plain-syntax">    </span><span class="reserved-syntax">return</span><span class="plain-syntax"> </span><span class="constant-syntax">0</span><span class="plain-syntax">;</span>
<span class="plain-syntax">}</span>
</pre>
<div class="lsmarkdown">
<p>The language has to be one which Inweb knows about, but Inweb can easily be
taught about new languages as needed: see <a href="5-al.html" class="internal">About Languages</a>.</p>
<p><strong>Links</strong>. Links in the web-page sense are written with square and then round
brackets in Markdown:</p>
<pre><code>[this text is highlighted](https://en.wikipedia.org/wiki/Highlights_(band))
</code></pre>
<p>produces: <a href="https://en.wikipedia.org/wiki/Highlights_(band)">this text is highlighted</a>.</p>
<p>Inweb pre-populates the Markdown links dictionary in such a way that if a web
has multiple sections then the names of those sections can be used as self-contained
links. For example, if a web has a section called &quot;Gold-Digging Ants&quot;, then from
anywhere in the web, the link <code>[Gold-Digging Ants]</code> will produce the words
&quot;Gold-Digging Ants&quot; and also link them to the relevant section. Alternatively,
to provide different text which is still linked there:</p>
<pre><code>Some defend [Herodotus's more improbable claims](Gold-Digging Ants).
</code></pre>
<p>For this to work, the section name can't be a positive number, because that
would be read instead as a footnote (see below).</p>
<p><strong>Mathematics</strong>. The usual reason to dip into mathematics notation in program
commentary is to agonise over running time, like so:</p>
<pre><code>Though it is often said that sorting algorithms cannot run faster than $O(n\log n)$
time when sorting $n$ items, this is only true for comparison-based sorting, and
counting sort trades memory for time in order to run in $O(n+k)$ time, where $k$
is the maximum value of the items being sorted.
</code></pre>
<p>Here the mathematics <code>$n$</code>, <code>$O(n\log n)$</code>, and such are written in \INWEBMATH({\rm\TeX}\INWEBMATH) notation,
and sandwiched in between dollar signs <code>$</code>. This produces \INWEBMATH(n\INWEBMATH), \INWEBMATH(O(n\log n)\INWEBMATH) and so on,
and will be rendered in HTML using the \INWEBMATH({\rm\TeX}\INWEBMATH) engine to produce a typeset fragment of
a page which is then displayed as an image. Longer, centred-on-the-page, formulae
can be displayed using doubled dollar signs <code>$$</code>, so:</p>
<pre><code>$$ \Gamma(z) = \int_0^\infty t^{z-1}e^{-t} {\rm d}t $$
</code></pre>
<p>types a formula for the gamma function:</p>
<p>$$ \Gamma(z) = \int_0^\infty t^{z-1}e^{-t} {\rm d}t $$</p>
<p>All of this takes away the ability to use the dollar character for its own sake,
as in the phrase &quot;Herodotus' <em>Histories</em> currently ship for $18.44 in paperback&quot;.
The trick is to write <code>\$18.44</code> not <code>$18.44</code>, and the backslash then deactivates
the otherwise special behaviour of <code>$</code>. Of course, <em>this</em> then takes away the
backslash, but <code>\\</code> then works. So <code>/a little tent\\</code> produces /a little tent\.</p>
<p><strong>Tables</strong>. See Github's documentation on writing tables in Markdown for
more, but e.g.:</p>
<pre><code>MS | Library                         | Shelfmark              | Century
-- | ------------------------------- | ---------------------- | ---------
A  | Laurentian                      | Plutei 70.03           | 10th
B  | Angelicanus                     |                        | 11th
D  | Vatican                         | gr 2369                | 10th/12th
R  | Vatican                         | gr 123                 | 14th
S  | Emmanuel College Library        | 'Sancroftianus'        | 14th
U  | Vatican                         | Urbinas 88             |
C  | Laurentian                      | conventi soppressi 207 | 11th
E  | Bibliotheque National de France | suppl. 134             | 13th
P  | Bibliotheque National de France | gr. 1633               | 14th
</code></pre>
<p>produces:</p>
<table>
<thead>
<tr>
<th>MS</th>
<th>Library</th>
<th>Shelfmark</th>
<th>Century</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Laurentian</td>
<td>Plutei 70.03</td>
<td>10th</td>
</tr>
<tr>
<td>B</td>
<td>Angelicanus</td>
<td></td>
<td>11th</td>
</tr>
<tr>
<td>D</td>
<td>Vatican</td>
<td>gr 2369</td>
<td>10th/12th</td>
</tr>
<tr>
<td>R</td>
<td>Vatican</td>
<td>gr 123</td>
<td>14th</td>
</tr>
<tr>
<td>S</td>
<td>Emmanuel College Library</td>
<td>'Sancroftianus'</td>
<td>14th</td>
</tr>
<tr>
<td>U</td>
<td>Vatican</td>
<td>Urbinas 88</td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>Laurentian</td>
<td>conventi soppressi 207</td>
<td>11th</td>
</tr>
<tr>
<td>E</td>
<td>Bibliotheque National de France</td>
<td>suppl. 134</td>
<td>13th</td>
</tr>
<tr>
<td>P</td>
<td>Bibliotheque National de France</td>
<td>gr. 1633</td>
<td>14th</td>
</tr>
</tbody>
</table>
<p><strong>Quotations</strong>.</p>
<blockquote>
<p>&quot;Those of the Persians who have knowledge of history declare that the
Phoenicians first began the quarrel. These, they say, came from that which
is called the Erythraian Sea to this of ours; and having settled in the land
where they continue even now to dwell, set themselves forthwith to make
long voyages by sea.&quot;</p>
</blockquote>
<p>was produced by:</p>
<pre><code>&gt; &quot;Those of the Persians who have knowledge of history declare that the
&gt; Phoenicians first began the quarrel. These, they say, came from that which
&gt; is called the Erythraian Sea to this of ours; and having settled in the land
&gt; where they continue even now to dwell, set themselves forthwith to make
&gt; long voyages by sea.&quot;
</code></pre>
<p>Note the running <code>&gt;</code> marks, which are essential on each line. The quotation
marks <code>&quot;</code> at the start and end here were on the other hand optional.</p>
<p><strong>Ruled lines</strong>. Feel free to draw a line:</p>
<hr />
<p>by means of:</p>
<pre><code>Feel free to draw a line:

--- ---
</code></pre>
<p><strong>Pictures</strong>. Traditional Markdown is <code>![Alt text here](/image/url/here.png)</code>.
This works fine, but is a little awkward because you need to know the relative
URL to whichever directory holds the images, and also, you need to put them there.</p>
<p>When Inweb renders Markdown images in a weave to HTML, then, there are two bonus
features. Firstly, <em>if</em> the image filename contains no slashes <code>/</code>, as in the
following example...</p>
<pre><code>![fragment from book VIII on Papyrus Oxyrhynchus 2099](papyrus.jpg)
</code></pre>
<p>...then Inweb finds the image in the <code>Figures</code> subdirectory of the directory
containing the colony file, and automatically copies it to where it's needed.</p>
<p><img src="papyrus.jpg" alt="fragment from book VIII on Papyrus Oxyrhynchus 2099" /></p>
<p>Secondly, images can be resized, which regular Markdown image links would not allow:</p>
<pre><code>![fragment from book VIII on Papyrus Oxyrhynchus 2099](papyrus.jpg@200)

![fragment from book VIII on Papyrus Oxyrhynchus 2099](papyrus.jpg@150x30)
</code></pre>
<p>produces:</p>
<p><img src="papyrus.jpg" alt="fragment from book VIII on Papyrus Oxyrhynchus 2099" width="200" /></p>
<p><img src="papyrus.jpg" alt="fragment from book VIII on Papyrus Oxyrhynchus 2099" width="150" height="30" /></p>
<p>And the text &quot;fragment from book VIII on Papyrus Oxyrhynchus 2099&quot; is used as the
alt-text for the image, which will be shown by screen-readers.</p>
<p><strong>Footnotes</strong>. These add a certain style to commentary,<sup id="fnred:1"><a href="#fn:1" rel="footnote">1</a></sup> and can be used to supply
trivia.<sup id="fnred:2"><a href="#fn:2" rel="footnote">2</a></sup> That last sentence was typed as:</p>
<pre><code>These add a certain style to commentary,[1] and can be used to supply
trivia.[2]

[1] Some would say.

[2] Herodotus was born not far from the site of the future Tomb of Mausolus, one of
the seven wonders of the ancient world, from which the word _mausoleum_ derives.
</code></pre>
<p>Square brackets in Markdown ordinarily mean links. They do here, too: what is
going on is that a link whose text and address are both the same, and are both a
positive integer of 1 to 9 digits, is read as being a link to the footnote of
that number. Javascript (if running) then presents the result as a pop-up.
In each paragraph there must be an equal number of cues as there are notes, and
both numberings must be continguous. In other words, they have to match
perfectly. Footnote texts must be the final things in the paragraph.</p>
<p>In the web as typed, footnote numbering begins again at 1 in each paragraph.
As rendered, though, the notes are renumbered throughout the page they're on:
this happens automatically.</p>
<ul class="inwebfootnotetexts"><li class="footnote" id="fn:1"><p class="inwebfootnote"><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>
Some would say.<a href="#fnref:1" title="return to text"> &#x21A9;</a></p>
</li>
<li class="footnote" id="fn:2"><p class="inwebfootnote"><sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>
Herodotus was born not far from site of the future Tomb of Mausolus, one of
the seven wonders of the ancient world, from which the word <em>mausoleum</em> derives.<a href="#fnref:2" title="return to text"> &#x21A9;</a></p>
</li></ul>
</div>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="1-allp.html">&#10094;</a></li><li class="progresscurrentchapter">1</li><li class="progresssection"><a href="1-gs.html">gs</a></li><li class="progresssection"><a href="1-sw.html">sw</a></li><li class="progresssection"><a href="1-allp.html">allp</a></li><li class="progresscurrent">cim</li><li class="progresssection"><a href="1-mtd.html">mtd</a></li><li class="progresschapter"><a href="2-cp.html">2</a></li><li class="progresschapter"><a href="3-cln.html">3</a></li><li class="progresschapter"><a href="4-an.html">4</a></li><li class="progresschapter"><a href="5-al.html">5</a></li><li class="progresschapter"><a href="6-ap.html">6</a></li><li class="progresschapter"><a href="7-bn.html">7</a></li><li class="progressnext"><a href="1-mtd.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

