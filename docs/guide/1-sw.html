<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Single-File Webs</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Modules</h2><ul>
<li><a href="../foundation-module/index.html">foundation</a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
<li><a href="../literate-module/index.html">literate</a></li>
<li><a href="../literate-test/index.html">literate-test</a></li>
</ul><h2>Documentation</h2><ul>
<li><a href="index.html"><span class="selectedlink">guide</span></a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'Single-File Webs' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">The Inweb Guide</a></li><li><a href="index.html#1">Chapter 1: Smaller Webs</a></li><li><b>Single-File Webs</b></li></ul></div>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a></p>
<h2>A simple example</h2>
<p>Because LP is designed to help manage the complexity of difficult or large
programs, it looks artificial when applied to &quot;hello world&quot;-sized examples.
Still, here goes.</p>
<p>We will create a single-file web of a Python program to implement one of the
simplest (also most dubious) sorting algorithms: counting sort. This will be
written in the simplest notation Inweb supports, Markdown, and the web is
as follows:</p>
<pre><code># Counting Sort

This is a Python implementation of the counting sort algorithm. The following
function takes an array of non-negative integers, sorts it, and returns the result:

    def countingSort(unsorted):
        sorted = []

        if unsorted:
            max_val = max(unsorted)
            counts = [0] * (max_val + 1)

            for value in unsorted:
                counts[value] += 1

            for value, count in enumerate(counts):
                sorted.extend([value] * count)

        return sorted

And this code tests the function:

    A = [4, 2, 2, 6, 3, 3, 1, 6, 5, 2, 3]
    print(&quot;Unsorted:&quot;, A)
    print(&quot;Sorted:&quot;, countingSort(A))

Here's what you should see when this runs:

```
Unsorted: [4, 2, 2, 6, 3, 3, 1, 6, 5, 2, 3]
Sorted: [1, 2, 2, 2, 3, 3, 3, 4, 5, 6, 6]
```
</code></pre>
<p>We store that as the text file <code>countsort.py.md</code>. Note that this filename has
two filename extensions: the <code>.py</code> part marks this as a web for a program
in the Python programming language, and the <code>.md</code> says it is written in Markdown
notation.</p>
<p>This is a web with the title &quot;Counting Sort&quot;, since that is written as a heading
at the top line. It contains just three paragraphs, which begin with the words
<code>This is a...</code>, <code>And this code...</code> and <code>Here's what...</code> respectively. Paragraphs
1 and 2 each contain both commentary and also pieces of code from the program,
indicated by being indented one tab stop in the usual Markdown way. (Like
Markdown, Inweb takes a tab stop to be equivalent to four spaces.) Paragraph 3
is pure commentary: note that the so-called fenced extract is not taken as part
of the program.</p>
<p>To reassure ourselves that this file makes sense to Inweb, we could try:</p>
<pre><code>$ inweb inspect countsort.py.md
web &quot;Counting Sort&quot; (Python program in MarkdownCode notation): 3 paragraphs : 33 lines
</code></pre>
<p>The title &quot;Counting Sort&quot; has been correctly extracted, and there are indeed 3 paras,
so this is looking good.</p>
<p>The notation is described as <code>MarkdownCode</code> rather than plain <code>Markdown</code> because
Inweb can also read Markdown files which are straightforwardly documents, not
containing a program at all. In fact, if we had called the exact same file
<code>countsort.md</code>, not <code>countsort.py.md</code>, that's just what would have happened:</p>
<pre><code>$ inweb inspect countsort.md
web &quot;Counting Sort&quot; (Markdown notation): 1 paragraph : 33 lines
</code></pre>
<p>Here the entire file would be a single paragraph, and all of it is commentary.
Note that Inweb does not now say it is a <code>Python program</code>.</p>
<p>It may seem precarious that Inweb reads the same file in quite different ways
depending only on its filename, but these are all just the <em>default</em> ways
Inweb makes these decisions, when it hasn't been told any different.</p>
<h2>Tangling</h2>
<p>It's time to tangle the web to an actual program, and run it:</p>
<pre><code>$ inweb tangle countsort.py.md
tangling web &quot;Counting Sort&quot; (Python program in MarkdownCode notation) to file 'countsort.py'

$ python3 countsort.py
Unsorted: [4, 2, 2, 6, 3, 3, 1, 6, 5, 2, 3]
Sorted: [1, 2, 2, 2, 3, 3, 3, 4, 5, 6, 6]
</code></pre>
<p>As this demonstrates, the <code>python3</code> interpreter is only asked to run the tangled
output file <code>countsort.py</code>.</p>
<p>Inweb chose the filename <code>countsort.py</code> for the output file because that seemed
the obvious way to express that Markdown formatting had been stripped from <code>countsort.py.md</code>.
But this can be overridden with the <code>-to FILE</code> switch:</p>
<pre><code>$ inweb tangle countsort.py.md -to tangled_stuff/mystery.py
tangling web &quot;Counting Sort&quot; (Python program in MarkdownCode notation) to file 'tangled_stuff/mystery.py'
</code></pre>
<p>The special output file <code>-</code> can be used to mean &quot;print the result of tangling
rather than saving it in a file&quot;: it doesn't create a file literally called <code>-</code>.
Using this automatically engages <code>-silent</code> mode to suppress the heading, because
we wouldn't want the familiar &quot;tangling web...&quot; text to be mixed into the output.
The main purpose of <code>-to -</code> is so that Inweb's tangled output can be decanted
into a Unix pipe. Pipes are a feature of Unix-like operating systems in which
the output printed by one tool becomes the input read by another. So, for example:</p>
<pre><code>$ inweb tangle countsort.py.md -to - | python3
Unsorted: [4, 2, 2, 6, 3, 3, 1, 6, 5, 2, 3]
Sorted: [1, 2, 2, 2, 3, 3, 3, 4, 5, 6, 6]
</code></pre>
<p>The pipe character <code>|</code> indicates that output from <code>inweb tangle countsort.py.md -to -</code>
should be fed continuously into <code>python3</code> until it runs out. Since <code>python3</code>,
the interpreter for the Python programming language, can read its program from
so-called &quot;standard input&quot;, the result is that the program just runs. No file
called <code>countsort.py</code> needed to be written at all, which seems tidy.</p>
<p>This can also sometimes be used to inspect the tangled output. For example:</p>
<pre><code>$ inweb tangle countsort.py.md -to - | more
$ inweb tangle countsort.py.md -to - | bbedit
</code></pre>
<p>Here we pipe to either <code>more</code>, a standard Unix tool for displaying files which
are too long to show on screen all at once, or to the MacOS text editor BBEdit.</p>
<h2>Weaving</h2>
<p>Weaving next:</p>
<pre><code>$ inweb weave countsort.py.md
weaving web &quot;Counting Sort&quot; (Python program in MarkdownCode notation) as HTML
the weave would require this directory to exist:
    countsort2-assets
inweb: fatal error: giving up: either make it by hand, or run again with -creating set
</code></pre>
<p>As this reply shows, Inweb is a little cautious about creating directories
automatically: this one looks harmless enough, but for really large weaves,
better safe than sorry. Typing <code>mkdir countsort2-assets</code> would make this go away,
but instead why not take Inweb's advice:</p>
<pre><code> $ inweb weave countsort.py.md -creating
weaving web &quot;Counting Sort&quot; (Python program in MarkdownCode notation) as HTML
(created directory 'countsort2-assets')
	generated: countsort2.html
	10 files copied to: countsort2-assets
</code></pre>
<p>And now that the directory exists, we don't need to use <code>-creating</code> again.</p>
<p>Depending on the format being woven, weaving is more complicated than tangling,
and often generates multiple files, which have to be put somewhere. What the
reply above is trying to communicate is that the actual text has been put into
a single HTML file, <code>countsort.html</code>, and that a number of supporting files
(mostly CSS and JavaScript, and loosely called &quot;assets&quot;) have been put into a
new directory called <code>countsort-assets</code>.</p>
<p>Larger webs, with multiple sections, produce more elaborate websites, and the
reply from <code>inweb weave</code> is then longer. Here's the output from weaving a longer
program:</p>
<pre><code>weaving web &quot;longer&quot; (InC program) as GitHubPages (based on HTML)
    [longer/docs/M-iti.html] [M-wtaw] [M-htwaw] [M-mwiw] [M-awwp] [M-spl] [M-tid] [M-rc]
    [P-htpw]
    [1-pc] [1-cnf] [1-ias] [1-iis] [1-ims] [1-ims2] [1-its] [1-its2] [1-iws]
    [index]
    18 files copied to: longer/docs/docs-assets
    7 files copied to: longer/docs
</code></pre>
<p>The filenames in square brackets are abbreviated for legibility: only the first
filename is written in full, <code>longer/docs/M-iti.html</code>, and all subsequent files
are understood to be in the same directory and with the same file extension
unless otherwise indicated. So, <code>[M-wtaw]</code> means in fact <code>longer/docs/M-wtaw.html</code>,
and so on.</p>
</div>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="1-gs.html">&#10094;</a></li><li class="progresscurrentchapter">1</li><li class="progresssection"><a href="1-gs.html">gs</a></li><li class="progresscurrent">sw</li><li class="progresssection"><a href="1-allp.html">allp</a></li><li class="progresssection"><a href="1-cim.html">cim</a></li><li class="progresssection"><a href="1-mtd.html">mtd</a></li><li class="progresschapter"><a href="2-cp.html">2</a></li><li class="progresschapter"><a href="3-cln.html">3</a></li><li class="progresschapter"><a href="4-an.html">4</a></li><li class="progresschapter"><a href="5-wikal.html">5</a></li><li class="progresschapter"><a href="6-ap.html">6</a></li><li class="progresschapter"><a href="7-bn.html">7</a></li><li class="progressnext"><a href="1-allp.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

