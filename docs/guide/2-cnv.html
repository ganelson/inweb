<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Conventions</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Modules</h2><ul>
<li><a href="../foundation-module/index.html">foundation</a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
<li><a href="../literate-module/index.html">literate</a></li>
<li><a href="../literate-test/index.html">literate-test</a></li>
</ul><h2>Documentation</h2><ul>
<li><a href="index.html"><span class="selectedlink">guide</span></a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'Conventions' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">The Inweb Guide</a></li><li><a href="index.html#2">Chapter 2: Larger Webs</a></li><li><b>Conventions</b></li></ul></div>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a> A <em>convention</em> is a sort of preference setting which changes the normal way
a web is woven, tangled, or simply read in. There are relatively few of these,
and the generic values are usually sensible, so most webs will never need
to change them.</p>
<p>The currently applicable conventions can be seen using <code>inweb inspect -conventions</code>:</p>
<pre><code>$ inweb inspect -conventions smorgasbord
web &quot;Sorting Smorgasbord&quot; (Python program in MarkdownCode notation): 2 sections : 10 paragraphs : 114 lines
(generic)  paragraph numbers are visible
(generic)  namespaces are unenforced
(generic)  sections are not numbered sequentially
</code></pre>
<p>...and so forth. For example, <code>paragraph numbers are visible</code> is a convention.
<code>(generic)</code> means that it applies because this generically applies to every web,
unless Inweb is given any instructions to the contrary.</p>
<p>Conventions can be specified on the contents page of a web. For example, we could
rewrite <code>Contents.inweb</code> for <code>smorgasbord</code> to read:</p>
<pre><code>Title: Sorting Smorgasbord
Author: Various Artists
Notation: MarkdownCode
Language: Python

Sections
	Counting Sort
	Quick Sort

Conventions {
	sections are numbered sequentially
}
</code></pre>
<p>Note that conventions appear after the contents rundown, and in braces. (That's
because this is technically a <em>declaration</em>: see <a href="2-rad.html" class="internal">Resources and Declarations</a>.)
We then see:</p>
<pre><code>$ inweb inspect -conventions smorgasbord
web &quot;Sorting Smorgasbord&quot; (Python program in MarkdownCode notation): 2 sections : 10 paragraphs : 114 lines
(generic)  paragraph numbers are visible
(generic)  namespaces are unenforced
(web)      sections are numbered sequentially
</code></pre>
<p>...and so on. Note that <code>(web)</code>, showing that the web makes the convention this
time. (For the effect this change actually has, see below.)</p>
<p>Conventions can be made, in fact, in five ways:</p>
<ul>
<li><code>(generic)</code> means this is Inweb's default;</li>
<li><code>(language)</code> means that the language, in the above example <code>Python</code>, chose this;</li>
<li><code>(notation)</code> means that the web's notation, in the above example <code>MarkdownCode</code>, chose this;</li>
<li><code>(-using)</code> means that a file of conventions read by <code>-using FILE</code> chose this;</li>
<li><code>(colony)</code> means that the colony, if there is one, made the choice;</li>
<li>and <code>(web)</code> means that the web's contents page said so.</li>
</ul>
<p>In this list, later sources beat earlier ones. (<code>inweb inspect -conventions -fuller</code>
shows exactly how this trail is resolved.)</p>
<p>So, for example, if you have many unrelated programs which you want to set some
common preferences for, or if you want to set preferences for a single-file web
which has no contents page, the best way is probably to create a standalone preferences
file — called, say, <code>prefs.inweb</code>. This could for example read:</p>
<pre><code>Conventions {
	namespaces are enforced
	holon names are written between ▶️ and ◀️
}
</code></pre>
<p>Whereupon <code>inweb weave program.c.md -using prefs.inweb</code> would have these
conventions applied, but <code>inweb weave program.c.md</code> would not.</p>
<p>On the other hand, if you want to apply some conventions across a set of programs
which are closely related, it's probably better to create a colony for them
(see <a href="3-cln.html" class="internal">Colonies</a>) and then include conventions at the foot of the colony file.</p>
<h2>Conventions changing how webs are read in</h2>
<ul>
<li>
<p><code>commentary uses Markdown markup</code>, <code>commentary uses simplified markup</code>,
or <code>commentary uses TeX markup</code>. Here, something confusing must be explained:
Inweb supports multiple notations for webs, including the one called <code>MarkdownCode</code>
which is used in most of this guide. Other notations look very different.
But all of them feature some sort of markup features in their
commentary: some way to indicate that text should be italicised, for example.
So it can be the case that <code>commentary uses Markdown markup</code>, even
if the notation is not <code>MarkdownCode</code>. Older Inweb webs have traditionally
used <code>commentary uses simplified markup</code>, which as the name suggests, is
more restricted. At present, <code>commentary uses TeX markup</code> is experimental
and not fully working. Generically, <code>commentary uses simplified markup</code>.</p>
</li>
<li>
<p><code>a summary under the title is read as the purpose</code>,
<code>an italicised summary under the title is read as the purpose</code>, or
<code>a summary under the title is not read as the purpose</code>.
See <a href="1-mtd.html" class="internal">Metadata</a>, which describes what <code>an italicised summary under the title is read as the purpose</code>
does, since that's the normal setting for Markdown-notation webs. Older
Inweb webs tended to use <code>a summary under the title is read as the purpose</code>,
which doesn't require the summary to be in italics, but does require it to
be the only text &quot;in limbo&quot;, that is, occurring before the first explicit
paragraph opening. (This makes no sense for Markdown because there are no
explicit paragraph markers in that notation.) Generically, though,
<code>a summary under the title is not read as the purpose</code>; notations must
actively decide to allow this.</p>
</li>
<li>
<p><code>holon names can be abbreviated</code>, <code>holon names can be abbreviated even at declarations</code>,
or <code>holon names cannot be abbreviated</code>.
This controls whether it's legal to refer to a holon like <code>{{do something long}}</code>
with three dots, i.e., as <code>{{do something...}</code>. Generically, <code>holon names can be abbreviated</code>,
which means that <em>uses</em> of holons can be abbreviated, but <em>declarations</em>
cannot. <code>holon names can be abbreviated even at declarations</code> enables the
freer use of abbreviations customary in Knuth's original literate programming
tools, which is just a little risqué for Inweb's more conservative tastes.
For example, it allows:</p>
<pre><code>{{Start up}} =
    print(&quot;Welcome.&quot;)
    {{Initialise all the variables and allocate memory}}

{{Init...}} =
    x = 1
</code></pre>
<p>...which Inweb would ordinarily reject.</p>
</li>
<li>
<p><code>holon names can contain styling</code> or <code>holon names cannot contain styling</code>.
Should the name of a holon be treated as commentary text, allowing italics
or maths notation, for example, or should it be plain text? This affects,
for example, how <code>{{if $x_i &lt; 2^7$, clear `buffer`}}</code> would be woven
(though of course it makes no difference to the resulting program).
Generically, <code>holon names can contain styling</code>.</p>
</li>
<li>
<p><code>comments can contain styling</code> or <code>comments cannot contain styling</code>.
Same issue, but for comments in code. Should <code>x++; /* since $x&lt;2^7$ */</code>
have the TeX notation converted to mathematics, for example? This is
more contentious, because people do use comments to comment out code,
and that might contain notations which coincide with markup; and so
generically, <code>comments cannot contain styling</code>. But especially
mathematical programs might benefit from changing this.</p>
</li>
<li>
<p><code>holon names are written between LEFT and RIGHT</code>. This changes the notation
being used so that holon names are delimited by whatever characters you give
in the strings <code>LEFT</code> and <code>RIGHT</code>. You might want to do this just to change
the aesthetics. For example,</p>
<pre><code>holon names are written between ⟨ and ⟩
holon names are written between (* and *)
</code></pre>
<p>Or you might need to make a change because the language you're programming
in clashes against your preferred notation. It is also possible to remove
the ability to name holons altogether:</p>
<pre><code>holons are not named
</code></pre>
<p>Generically, <code>holon names are written between {{ and }}</code>.</p>
</li>
<li>
<p><code>paragraph tags are written between LEFT and RIGHT</code>. This changes the notation
being used so that tags attached to certain paragraphs are written in a
different way. For example,</p>
<pre><code>paragraph tags are written between (TAG: and )
</code></pre>
<p>It is also possible to remove the ability to to tag paragraphs altogether:</p>
<pre><code>paragraph tags are not recognised
</code></pre>
<p>Generically, <code>paragraph tags are not recognised</code>, but</p>
</li>
<li>
<p><code>TeX notation is used for mathematics</code> or <code>TeX notation is not used for mathematics</code>.
Some Inweb notations (including its Markdown ones) recognise TeX notation with
<code>$</code> and <code>$$</code> to delineate mathematical formulae. But this can be turned off.
Generically, <code>TeX notation is used for mathematics</code>.</p>
</li>
<li>
<p><code>footnotes are recognised</code> or <code>footnotes are not recognised</code>. Similarly, some
notations (including its Markdown ones) recognise <code>[1]</code>, <code>[2]</code> and so forth
as footnote numbers, and react accordingly. But this can be turned off.
Generically, <code>footnotes are recognised</code>.</p>
</li>
</ul>
<h2>Conventions affecting weaving</h2>
<ul>
<li>
<p><code>paragraph numbers are visible</code> or <code>paragraph numbers are invisible</code>. Affects
only weaving. Holons of code are normally numbered in woven output: for example,
§1, §1.1, and so on. Occasionally this is a distraction, so it can be turned
off. Generically, <code>paragraph numbers are visible</code>.</p>
</li>
<li>
<p><code>sections are numbered sequentially</code> or <code>sections are not numbered sequentially</code>.
Affects how commands are read, and affects weaving. Sections are ordinarily given
brief abbreviations derived from their titles: for example, &quot;Commentary in Markdown&quot;
might be abbreviated <code>cim</code>. This affects leafnames of HTML files generated by
weaving, and also how some commands like <code>inweb weave guide -only cim</code> are read.
If <code>sections are numbered sequentially</code> is used, sections are instead abbreviated
<code>s1</code>, <code>s2</code>, <code>s3</code> and so on. Generically, <code>sections are not numbered sequentially</code>.</p>
</li>
</ul>
<h2>Conventions affecting tangling</h2>
<ul>
<li>
<p><code>metadata in strings are written between LEFT and RIGHT</code>. This changes the notation
being used when metadata like <code>Author</code> need to be expanded inside strings
within holons. For example,</p>
<pre><code>metadata in strings are written between &lt;substitute: and &gt;
</code></pre>
<p>It is also possible to remove this feature altogether:</p>
<pre><code>metadata in strings are not recognised
</code></pre>
<p>Generically, in fact, <code>metadata in strings are not recognised</code>, but the
notations mostly used by Inweb say that <code>metadata in strings are written between [[ and ]]</code>,
so in practice this is the default.</p>
</li>
<li>
<p><code>namespaces are enforced</code> or <code>namespaces are unenforced</code>. Affects only tangling.
This will produce an error if the program attempts to make a function declaration
which doesn't belong to the namespace declared by the section as its own.
In practice, this is useful only for the pseudo-language InC. Generically,
<code>namespaces are unenforced</code>.</p>
</li>
<li>
<p><code>whitespace lines opening holons are tangled</code> or <code>whitespace lines opening holons are not tangled</code>.
If a holon of code opens with one or more lines of white space, should they be
included in the tangled output? (This can't arise with the Markdown notation,
but other notations might allow it to.) Generically, <code>whitespace lines opening holons are tangled</code>.</p>
</li>
<li>
<p><code>whitespace lines closing holons are tangled</code> or <code>whitespace lines closing holons are not tangled</code>.
If a holon of code closes with one or more lines of white space, should they be
included in the tangled output? (This can't arise with the Markdown notation,
but other notations might allow it to.) Generically, <code>whitespace lines closing holons are tangled</code>.</p>
</li>
<li>
<p><code>named holons are tangled between PREFIX and SUFFIX</code> or
<code>named holons are not tangled with prefix or suffix</code>. Generically,
<code>named holons are tangled between &lt;NEWLINE&gt; and &lt;NEWLINE&gt;</code>, but for example,
the language definition for C includes the convention
<code>named holons are tangled between &lt;NEWLINE&gt;{&lt;NEWLINE&gt; and }&lt;NEWLINE&gt;</code>, and
the CWEB-compatibility notation takes it away again, since this was not a
feature of CWEB, and it will cause some CWEB programs to fail to compile.</p>
<p>This convention is a device to enable holons to behave like code blocks in
C (and similar languages): see <a href="5-wikal.html" class="internal">What Inweb Knows about Languages</a>.</p>
</li>
</ul>
<h2>Conventions affecting tangling of C and related languages</h2>
<ul>
<li>
<p><code>standard library #includes are tangled early in the program</code> or
<code>standard library #includes are treated like any other code</code>. Pulls forward
lines like <code>#include &lt;stdio.h&gt;</code> (written with angle brackets) for the C standard
library files only, so that they're tangled early.</p>
<p>Generically, <code>standard library #includes are treated like any other code</code>, but
language definitions for C and similar usually say otherwise.</p>
</li>
<li>
<p><code>typedefs are tangled early in the program</code> or
<code>typedefs are treated like any other code</code>: Relevant only to dialects of C
which support <code>typedef</code>, and affecting only &quot;simple&quot; declarations where the
type is not a <code>struct</code>: e.g., <code>typedef big unsigned long long</code>.</p>
<p>Generically, <code>typedefs are treated like any other code</code>, but language definitions for
C and similar usually say otherwise.</p>
</li>
<li>
<p><code>typedef structs are tangled early and reordered logically</code> or
<code>typedef structs are treated like any other code</code>: Relevant only to dialects of C
which support <code>typedef struct</code>. For example, suppose the program contains:</p>
<pre><code>cake birthday_cake;
...
typedef struct cake {
    struct filling f;
} cake;
...
typedef struct filling {
    int jam;
}
</code></pre>
<p>This will fail to compile for two reasons: <code>cake</code> is unknown at the time
<code>cake birthday_cake</code> is read, because the compiler has not yet reached
the typedef of <code>cake</code>; and <code>struct filling</code> needs to be fully declared
<em>before</em> <code>struct cake</code> is declared (since it is incorporated, rather
than simply pointed to). If <code>typedef structs are tangled early and reordered logically</code>,
both these problems are solved automatically, as Inweb tangles the code
into the right order to avoid them.</p>
<p>Generically, <code>typedef structs are treated like any other code</code>, but language
definitions for C and similar usually say otherwise.</p>
</li>
<li>
<p><code>function predeclarations are tangled automatically</code> or
<code>functions are treated like any other code</code>: Relevant only to dialects of C in
which a function must be predeclared before use. For example, suppose the program contains:</p>
<pre><code>void first(void) {
    second();
}
void second(void) {
    printf(&quot;Hello, conventioners.\n&quot;);
}
</code></pre>
<p>This will fail to compile because <code>second</code> is unknown when <code>first</code> is compiled.
Often by means of header files, C programmers overcome this with predeclarations:</p>
<pre><code>void second(void); /* predeclaration */
void first(void) {
    second();
}
void second(void) {
    printf(&quot;Hello, conventioners.\n&quot;);
}
</code></pre>
<p>This is a nuisance, and if <code>function predeclarations are tangled automatically</code> then
Inweb will automatically tangle predeclarations of all functions.</p>
<p>Generically, <code>functions are treated like any other code</code>,
but language definitions for C and similar usually say otherwise.</p>
</li>
</ul>
</div>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="2-tgs.html">&#10094;</a></li><li class="progresschapter"><a href="1-gs.html">1</a></li><li class="progresscurrentchapter">2</li><li class="progresssection"><a href="2-cp.html">cp</a></li><li class="progresssection"><a href="2-mdl.html">mdl</a></li><li class="progresssection"><a href="2-tgs.html">tgs</a></li><li class="progresscurrent">cnv</li><li class="progresssection"><a href="2-rad.html">rad</a></li><li class="progresschapter"><a href="3-cln.html">3</a></li><li class="progresschapter"><a href="4-an.html">4</a></li><li class="progresschapter"><a href="5-wikal.html">5</a></li><li class="progresschapter"><a href="6-ap.html">6</a></li><li class="progresschapter"><a href="7-bn.html">7</a></li><li class="progressnext"><a href="2-rad.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

