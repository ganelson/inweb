<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Colonies</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Modules</h2><ul>
<li><a href="../foundation-module/index.html">foundation</a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
<li><a href="../literate-module/index.html">literate</a></li>
<li><a href="../literate-test/index.html">literate-test</a></li>
</ul><h2>Documentation</h2><ul>
<li><a href="index.html"><span class="selectedlink">guide</span></a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'Colonies' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">The Inweb Guide</a></li><li><a href="index.html#3">Chapter 3: Colonies of Webs</a></li><li><b>Colonies</b></li></ul></div>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a> A <em>colony</em> is a collection of related webs called <em>members</em>, and gets its
name because social spiders, in so far as there are any, merge their webs into
what are called colonies.</p>
<p>Colony is the largest-scale structure supported by Inweb, and colonies can in
principle grow quite large. At time of writing, the main colony for the Inform
compiler has 59 members. But they can be useful with as few as two members,
and sometimes even a single web can benefit from being the only member of its
own diminutive colony.</p>
<p>Creating a colony is very easy. For example, suppose we wanted our <code>smorgasbord</code>
example web to start a colony. It would be enough to create a file called
<code>colony.inweb</code>, placed alongside <code>smorgasbord</code>, with the contents:</p>
<pre><code>Colony {
	member: &quot;smorgasbord&quot;
}
</code></pre>
<p>But for the sake of a more interesting example, suppose we have written two
programs called <code>front-office</code> and <code>back-office</code>, which each share a library of
code called <code>inventory-module</code> (also a web). These will all live inside a
directory called <code>retail</code>. So, we create a file <code>colony.inweb</code>, also inside
<code>retail</code>, with the following contents:</p>
<pre><code>Colony {
	member: &quot;front&quot;     at &quot;front-office&quot;
	member: &quot;back&quot;      at &quot;back-office.py.md&quot;
	member: &quot;inventory&quot; at &quot;inventory-module&quot;
}
</code></pre>
<p>So at this point, assuming <code>retail</code> is the current working directory:</p>
<pre><code>$ ls
back-office.py.md   colony.inweb    front-office    inventory-module
</code></pre>
<h2>Member names</h2>
<p>Each member has a <em>name</em>. These names can be used as a shorthand when typing
commands. For example:</p>
<pre><code>$ inweb inspect ::back
web &quot;The Back Office&quot; (Python program in MarkdownCode notation): 13 paragraphs : 248 lines
</code></pre>
<p>Here <code>inweb inspect ::back</code> achieved the same result as <code>inweb inspect back-office.py.md</code>.
And in general, <code>COLONY::MEMBER</code> can be used on the Inweb command line to mean
the web which is the member named <code>MEMBER</code> of the colony <code>COLONY</code>. If we don't
specify <code>COLONY</code>, it's taken to be the colony file in the current working directory,
which is why <code>::back</code> works from inside <code>retail</code>. If we stepped up one level:</p>
<pre><code>$ cd ..
$ ls
retail
$ inweb inspect retail::back
web &quot;The Back Office&quot; (Python program in MarkdownCode notation): 13 paragraphs : 248 lines
</code></pre>
<p>The <code>COLONY</code> part of <code>COLONY::MEMBER</code> can either give the filename of the colony
file, or can just give a directory name, in which case Inweb looks for a file
called <code>colony.inweb</code> in that directory. (It's because of this convention
that it's generally a good idea to call a colony file <code>colony.inweb</code>, and since
it never really makes sense to have two colonies trying to share the same
directory, this is no hardship.)</p>
<h2>Member locations</h2>
<p>As lines like this demonstrate, the <em>name</em> of a member can be different from
its <em>location</em>:</p>
<pre><code>	member: &quot;front&quot;     at &quot;front-office&quot;
</code></pre>
<p>Thus the member <code>front</code> is a web located in the directory <code>front-office</code>,
which is in the same directory as <code>colony.inweb</code>. But in practice, name and
location often coincide, and then <code>at ...</code> can be omitted. For example,</p>
<pre><code>	member: &quot;smorgasbord&quot;
</code></pre>
<p>is equivalent to writing</p>
<pre><code>	member: &quot;smorgasbord&quot; at &quot;smorgasbord&quot;
</code></pre>
<p>The location following <code>at</code> is in fact a pathname or filename relative to the
directory holding the colony file, i.e., for us, relative to <code>retail</code>. There's
nothing to stop this path leading us outside and some distance away:</p>
<pre><code>	member: &quot;distant&quot; at &quot;../around/the/houses/distant.c.md&quot;
</code></pre>
<h2>Placing a colony inside a web directory</h2>
<p>Here's another perhaps surprising use of <code>at</code>. Simplifying the truth a little,
Inweb itself is a web called <code>inweb</code> which contains two subsidiary modules,
<code>foundation-module</code> and <code>literate-module</code>. Those actually sit inside <code>inweb</code>
as subdirectories of it. As well as being a web, <code>inweb</code> is a git repository.
We want its colony file to be included in that repository, so it's not
convenient to place this <em>outside</em> <code>inweb</code>: if we did, it couldn't be added
to the repository with <code>git add</code>. So what we actually do is to place the
colony file inside <code>inweb</code>. That gives a directory structure like so:</p>
<pre><code>inweb
	colony.inweb
	Contents.w
	...
	foundation-module
		Contents.w
		...
	literate-module
		Contents.w
		...
</code></pre>
<p>And the colony file is then written like this:</p>
<pre><code>	member: &quot;inweb&quot;      at &quot;&quot;
	member: &quot;foundation&quot; at &quot;foundation-module&quot;
	member: &quot;literate&quot;   at &quot;literate-module&quot;
</code></pre>
<p>Note the <code>at &quot;&quot;</code> for <code>inweb</code> itself: because relative to the location of
<code>colony.inweb</code>, you're already there. (This could also have been written <code>&quot;.&quot;</code>,
meaning &quot;the current directory&quot;, but there's no need to.)</p>
<h2>Tangling and weaving an entire colony</h2>
<p>Most of Inweb's commands are meant to be applied to webs rather than colonies,
though <code>inweb weave</code> and <code>inweb tangle</code> can be applied to either. Thus
<code>inweb weave COLONY</code> weaves each member of the colony in turn, and similarly
for tangling. If our current working directory contains a <code>colony.inweb</code> file,
then we don't even need to indicate what <code>COLONY</code> we mean: Inweb will see it
automatically. Thus, in the above <code>retail</code> example, we can tangle:</p>
<pre><code>$ inweb tangle
(Tangle 1 of 3: front)
tangling web &quot;The Front Office&quot; (Python program in MarkdownCode notation) to file 'front-office/Tangled/The Front Office.py'

(Tangle 2 of 3: back)
tangling web &quot;The Back Office&quot; (Python program in MarkdownCode notation) to file 'back-office.py'

(Tangle 3 of 3: inventory)
tangling web &quot;inventory-module&quot; (Python program in MarkdownCode notation) to file 'inventory-module/Tangled/inventory-module.py'
</code></pre>
<p>When we weave, it's clear at once that a skeleton of directories will be needed
in order to hold all the HTML generated:</p>
<pre><code>$ inweb weave
the weave would require these 5 directories to exist:
	docs
	docs/docs-assets
	docs/front
	docs/back
	docs/inventory
inweb: fatal error: giving up: either make them by hand, or run again with -creating set
</code></pre>
<p>Note a subtle change here: once Inweb thinks in terms of a colony, it defaults
to weaving output into a directory called <code>docs</code>. (This is to follow the convention
used by GitHub when serving web pages associated with a repository.) We can
change that, of course:</p>
<pre><code>inweb weave -to my/funny/area
the weave would require these 7 directories to exist:
	my
	my/funny
	my/funny/area
	my/funny/area/docs-assets
	my/funny/area/front
	my/funny/area/back
	my/funny/area/inventory
inweb: fatal error: giving up: either make them by hand, or run again with -creating set
</code></pre>
<p>But on second thoughts, <code>docs</code> wasn't such a bad idea, so:</p>
<pre><code>$ inweb weave -creating
(created directory 'docs')
(created directory 'docs/docs-assets')
(created directory 'docs/front')
(created directory 'docs/back')
(created directory 'docs/inventory')
(Weave 1 of 3: front)
weaving web &quot;The Front Office&quot; (Python program in MarkdownCode notation) as GitHubPages (based on HTML)
	[docs/front/invh.html] [sales] [promo]
	[index]
	11 files copied to: docs/docs-assets
</code></pre>
<p>...and so on.</p>
<h2>External members</h2>
<p>So far, all of the members of the <code>retail</code> colony have been webs defined in
that colony. But now suppose those webs need to import code from a module
defined in another colony altogether.</p>
<p>This is not as remote an idea as it sounds: all InC programs import code from
the <code>foundation</code> module defined in the Inweb colony. The Intest program is in
just that situation, and its colony deals with this by defining:</p>
<pre><code>Colony {
	default: pattern &quot;GitHubPages&quot; breadcrumbs &quot;Home: //overview//&quot;

	member:   &quot;overview&quot;   to &quot;index.html&quot; breadcrumbs &quot;&quot;
	member:   &quot;intest&quot;     at &quot;&quot; to &quot;intest&quot;
	member:   &quot;arch&quot;       at &quot;arch-module&quot; to &quot;arch-module&quot;
	external: &quot;inweb&quot;      at &quot;../inweb&quot;
	external: &quot;foundation&quot; at &quot;../inweb/foundation-module&quot;

	...
}
</code></pre>
<p>Note the two <code>external:</code> declarations, which are just like <code>member:</code> ones,
but tell Inweb that these members are remote from us. (Their file paths lead
outside the Intest repository and assume that Intest and Inweb are sitting
next to each other.) <code>inweb</code> and <code>foundation</code> are like overseas corresponding
members of some society, who are not expected to attend every meeting.</p>
<p>In particular, <code>inweb weave</code> applied to the Intest colony does not weave them,
because it's assumed they have already been woven in their colony. On the
other hand, colony links like <code>//foundation//</code> do reach them safely.</p>
<h2>Other resources in colony files</h2>
<p>So far, we've placed three different sorts of declaration inside our colony
declaration: <code>Page</code> (text of a single-section web), <code>Web</code> (contents for a multi-section web),
and <code>Navigation</code> (set of sidebar links).</p>
<p>We can also write <code>Conventions</code>, like so:</p>
<pre><code>Colony {
	...

	Conventions {
		sections are numbered sequentially
	}
}
</code></pre>
<p>This would apply the <code>sections are numbered sequentially</code> rule to all the webs
in the colony (unless they individually override that: see <a href="2-cnv.html" class="internal">Conventions</a>).</p>
<p>Then, too, we can place <code>Language</code> and <code>Notation</code> declarations inside a colony,
and that makes them available to all webs in that colony. For example, we could
tell Inweb about the Rust language, and then any web in the colony could use Rust
if it wanted to. These declarations override any others built in to Inweb, so
we could also redefine the C language (say) with our own redesigned version,
and then members of the colony would use that declaration, not the built-in one.</p>
<p>These declarations might become a little lengthy, and deserve to be stored
elsewhere, rather than in the colony file itself. If so, adding this line:</p>
<pre><code>Colony {
	...
	using: &quot;my_declarations.inweb&quot;
	...
}
</code></pre>
<p>would tell Inweb to read declarations from the file <code>my_declarations.inweb</code>,
and make anything inside (conventions, languages, notations, navigations, and
such) available to the colony's members. There can be any number of <code>using:</code>
lines in a colony declaration; it will read each file named. The file paths
are, as usual, relative to the directory holding the colony file.</p>
</div>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="2-rad.html">&#10094;</a></li><li class="progresschapter"><a href="1-gs.html">1</a></li><li class="progresschapter"><a href="2-cp.html">2</a></li><li class="progresscurrentchapter">3</li><li class="progresscurrent">cln</li><li class="progresssection"><a href="3-stm.html">stm</a></li><li class="progresssection"><a href="3-soc.html">soc</a></li><li class="progresschapter"><a href="4-an.html">4</a></li><li class="progresschapter"><a href="5-al.html">5</a></li><li class="progresschapter"><a href="6-ap.html">6</a></li><li class="progresschapter"><a href="7-bn.html">7</a></li><li class="progressnext"><a href="3-stm.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

