<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>README Files</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Octagram.png" height=72> </a></h1>
<ul><li><a href="../inweb/index.html">inweb</a></li>
</ul><h2>Foundation Modules</h2><ul>
<li><a href="../foundation-module/index.html">foundation</a></li>
<li><a href="../foundation-test/index.html">foundation-test</a></li>
<li><a href="../literate-module/index.html">literate</a></li>
<li><a href="../literate-test/index.html">literate-test</a></li>
</ul><h2>Documentation</h2><ul>
<li><a href="index.html"><span class="selectedlink">guide</span></a></li>
</ul><h2>Example Webs</h2><ul>
<li><a href="../goldbach/index.html">goldbach</a></li>
<li><a href="../twinprimes/twinprimes.html">twinprimes</a></li>
<li><a href="../eastertide/index.html">eastertide</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> inform</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'README Files' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="index.html">The Inweb Guide</a></li><li><b>README Files</b></li></ul></div>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a> Almost all repositories at Github have a file called <code>README.md</code>, in Markdown
format, which describes what the program is, how to install it, and so on.</p>
<p>Inweb provides a convenient way to keep such files up to date. Suppose we
take our example web <code>smorgasbord</code>, and create a <em>script</em> <code>smorgasbord.rmscript</code>
inside it, reading:</p>
<pre><code># Sorting Smorgasbord

This is version {metadata: Semantic Version Number}, dated {metadata: Build Date}.
</code></pre>
<p>As part of the build process for the program, we can include this command:</p>
<pre><code>$ inweb make-readme smorgasbord
smorgasbord/smorgasbord.rmscript -&gt; smorgasbord/README.md
</code></pre>
<p>And this will create the <code>README.md</code> with contents such as:</p>
<pre><code># Sorting Smorgasbord

This is version 1-early-beta+1A02, dated 21 December 2025.
</code></pre>
<p>Optional switches allow both the script and destination file to be changed:
<code>inweb make-readme WEB -script S -to RM</code> creates a file <code>RM</code> from the script <code>S</code>
in the context of the web <code>WEB</code>, and similarly for a colony instead of a web.</p>
<p>If <code>-script</code> is not specified, Inweb first tries <code>smorgasbord.rmscript</code>
and then <code>scripts/smorgasbord.rmscript</code> in the web (or colony) directory,
which for this example is <code>smorgasbord</code>: if neither file exists, Inweb throws
an error. If <code>-to</code> is not specified, Inweb assumes <code>README.md</code> in the web (or
colony) directory. If <code>-to</code> is set to <code>-</code>, Inweb writes to standard output
instead of to a file:</p>
<pre><code>$ inweb make-readme smorgasbord -to -
# Sorting Smorgasbord

This is version 1-early-beta+1A02, dated 21 December 2025.
</code></pre>
<p>Mostly, whatever is in the script copies directly through into the output, but
three characters have special rules:</p>
<ul>
<li>Braces <code>{</code> and <code>}</code> must be used in neatly paired ways: and their
contents have to be meaningful to Inweb, or an error is thrown.</li>
<li>Literal braces can be obtained with <code>\{</code> and <code>\}</code>,</li>
<li>Literal tabs and newlines can be written <code>\t</code> and <code>\n</code>, and of course</li>
<li>Literal backslashes can be obtained with <code>\\</code>.</li>
</ul>
<p>A usage of braces is called an <em>expansion</em>, and:</p>
<ul>
<li>
<p><code>{web}</code> expands to the colony member name for the web named
in the command (or, if a colony is named, for the <em>first</em> web in that colony).</p>
</li>
<li>
<p><code>{list-of-webs}</code> expands to a comma-separated list of colony member names for
the colony named in the command; or, if a web is named, to the colony it
belongs to; or, if it does not belong to a colony, then just to a list with
one member, the name of the web. In effect, <code>{list-of-webs}</code> expands to
everything Inweb can see.</p>
</li>
<li>
<p><code>{metadata: DATUM}</code> expands to the metadata of that name for the web named
in the command (or, if a colony is named, for the <em>first</em> web in that colony).
To see the possible choices of <code>DATUM</code>, see <a href="mtdt.html" class="internal">Metadata</a>.</p>
</li>
<li>
<p><code>{metadata: DATUM of: WEB}</code> expands to the metadata of that name for the web
given. This only makes sense for a colony, and <code>WEB</code> can then be the name of
a colony member.</p>
</li>
<li>
<p><code>{set name: VARIABLE to: TEXT}</code> creates a new <em>variable</em> with the given
context, and <code>{VARIABLE}</code> thereafter expands to its value. Variable names
are always in full capitals, and contain no spaces. For example:</p>
<pre><code>{set name: URL to: https://www.inform7.com}
See [the project home page]({URL}) for more.
</code></pre>
<p>would expand to:</p>
<pre><code>See [the project home page](https://www.inform7.com) for more.
</code></pre>
</li>
<li>
<p><code>{repeat with VARIABLE in LIST}</code> followed in due course by <code>{end-repeat}</code>
causes material to be generated over and over. For example,</p>
<pre><code>{repeat with SEA in Black, Caspian}
Welcome to the {SEA} Sea.
{end-repeat}
</code></pre>
<p>expands to</p>
<pre><code>Welcome to the Black Sea.
Welcome to the Caspian Sea.
</code></pre>
<p>and</p>
<pre><code>Seas available:{repeat with SEA in Sargasso, Libyan} {SEA} Sea;{end-repeat}
</code></pre>
<p>expands to</p>
<pre><code>Seas available: Sargasso Sea; Libyan Sea;
</code></pre>
</li>
<li>
<p><code>{define: NAME}</code> or <code>{define: NAME ARGUMENTS}</code> followed in due course by <code>{end-define}</code>
creates a new expansion. For example,</p>
<pre><code>{define: describe content: STUFF}
Also available here is {STUFF}.
{end-define}
{describe content: inbuild}
{describe content: infix}
</code></pre>
<p>expands to</p>
<pre><code>Also available here is inbuild.
Also available here is infix.
</code></pre>
<p>Here the <code>NAME</code> is <code>describe</code> and the <code>ARGUMENTS</code> part is <code>content: STUFF</code>.
There can be any number of arguments; if the argument name is preceded by <code>?</code>
then it is optional.</p>
</li>
</ul>
<p>So for example, this produces a table of all the webs in the current colony:</p>
<pre><code>Title | Current version | Build date
----- | --------------- | ----------
{repeat with: W in: {list-of-webs}}
{metadata: Title of: {W}} | {metadata: Semantic Version Number of: {W}} | {metadata: Build Date of: {W}}
{end-repeat}
</code></pre>
<p>And this would be a script for a generic read-me file which could be used to
make individual <code>README.md</code> files for multiple colony members:</p>
<pre><code># {metadata: Title} version {metadata: Semantic Version Number}

This is version {metadata: Semantic Version Number}, dated {metadata: Build Date}.
It can be tangled with `inweb tangle ::{web}`.
</code></pre>
<h2>Conveniences for Inform</h2>
<p>Two other expansions are available which are almost certainly useful only for
the Inform project. <code>{version ...}</code> and <code>{date ...}</code> produce a version number
and date for a piece of software in a repository which is not necessarily a
colony member, because it is not necessarily a web. Specifically:</p>
<ul>
<li>
<p><code>{version web:W}</code> does the same as <code>{metadata: Version Number on: W}</code>, for
completeness.</p>
</li>
<li>
<p><code>{version program:P}</code> looks in the directory <code>P</code> (relative to the current
colony) for a file called <code>README.txt</code> or <code>README.md</code>, then scans it.
It looks for the patterns <code>CheapGlk Library: N</code> or <code>- Version N</code>, where
<code>N</code> is the version number.</p>
</li>
<li>
<p><code>{version extension:E}</code> looks at the Inform extension file (it has to be
a single file) <code>E</code>, reckoned relative to the colony, and extracts a
version number from its header.</p>
</li>
<li>
<p><code>{version template:T}</code> does similarly for an Inform template (note: not
an Inweb one) <code>T</code>.</p>
</li>
<li>
<p><code>{version inform6:C}</code> does similarly for a source tree of the Inform 6
compiler, located at path <code>C</code> with respect to the current colony.</p>
</li>
</ul>
<p>And <code>{date ...}</code> is similar, but less likely to find anything, because
these do not all record dates as well as version numbers.</p>
</div>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="blnm.html">&#10094;</a></li><li class="progresssection"><a href="intrd.html">intrd</a></li><li class="progresssection"><a href="snwb.html">snwb</a></li><li class="progresssection"><a href="allp.html">allp</a></li><li class="progresssection"><a href="cim.html">cim</a></li><li class="progresssection"><a href="mtdt.html">mtdt</a></li><li class="progresssection"><a href="cnpg.html">cnpg</a></li><li class="progresssection"><a href="tgs.html">tgs</a></li><li class="progresssection"><a href="cnvnt.html">cnvnt</a></li><li class="progresssection"><a href="clns.html">clns</a></li><li class="progresssection"><a href="rad.html">rad</a></li><li class="progresssection"><a href="wikal.html">wikal</a></li><li class="progresssection"><a href="blnm.html">blnm</a></li><li class="progresscurrent">rdfl</li><li class="progresssection"><a href="mkfls.html">mkfls</a></li><li class="progresssection"><a href="gtfl.html">gtfl</a></li><li class="progressnext"><a href="mkfls.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

